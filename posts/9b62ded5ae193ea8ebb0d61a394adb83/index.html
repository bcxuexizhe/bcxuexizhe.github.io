<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python版【植物大战僵尸 &#43;源码】 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/9b62ded5ae193ea8ebb0d61a394adb83/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="Python版【植物大战僵尸 &#43;源码】">
  <meta property="og:description" content="文章目录 粉丝 专属：写在前面：功能实现环境要求怎么玩个性化定义项目演示：源码分享Map地图:Menubar.py主菜单 主函数：项目开源地址 粉丝 专属： 写在前面： 今天给大家推荐一个Gtihub开源项目：PythonPlantsVsZombies，翻译成中就是植物大战僵尸。
《植物大战僵尸》是一款极富策略性的小游戏。可怕的僵尸即将入侵，每种僵尸都有不同的特点，例如铁桶僵尸拥有极强的抗击打能力，矿工僵尸可以挖地道绕过种植在土壤表面的植物等。玩家防御僵尸的方式就是栽种植物。49种植物每种都有不同的功能，例如樱桃炸弹可以和周围一定范围内的所有僵尸同归于尽，而食人花可以吃掉最靠近自己的一只僵尸。玩家可以针对不同僵尸的弱点来合理地种植植物，这也是胜利的诀窍。游戏根据玩法不同分为五种游戏模式：冒险模式、迷你模式、解谜模式、生存模式、禅境花园。加之黑夜、屋顶、浓雾以及泳池之类的障碍增加了其挑战性。该游戏近乎永无止境。
功能实现 支持的植物：向日葵、豌豆射手、胡桃、雪豌豆射手、樱桃炸弹、三豌豆射手、大嘴花、puffshroom、马铃薯胺、穗状杂草、南瓜、胆小菇、墨西哥胡椒、阳光菇、冰川菇、催眠蘑菇。
支持僵尸：普通僵尸，旗帜僵尸，路障僵尸，铁桶僵尸，报纸僵尸。
支持在关卡开始时选择植物卡片。
支持白天级别、夜间级别、移动卡选择级别和胡桃保龄球级别。
环境要求 1、python3.7
注意： Python3.7是最佳运行环境，但是不是强制性要求。对于Linux： 如果你的 Linux 有预装的 Python3&#43; 就可以运行了。LINUX Mint 操作系统直接升级到 Python 3.7 有可能导致系统自带的 python 版本无法执行。
2、Python-Pygame 1.9
怎么玩 使用鼠标收集阳光，选择植物卡片并播种植物
您可以通过更改 source/constants.py 中的START_LEVEL_NUM值来设置起始级别
级别 1 和 2：天级别
第 3 级：夜间级别
第 4 级：移动卡片选择级别
5级：墙果保龄球级别
个性化定义 游戏的关卡数据，存储在json文件里的。具体目录：PythonPlantsVsZombies-master\source\data。我们可以进行自定义配置，例如僵尸的位置和时间，背景信息。
项目演示： 源码分享 Map地图: __author__ = &#39;marble_xu&#39; import random import pygame as pg from .. import tool from .. import constants as c class Map(): def __init__(self, width, height): self.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-08T23:38:47+08:00">
    <meta property="article:modified_time" content="2024-05-08T23:38:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python版【植物大战僵尸 &#43;源码】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#__1" rel="nofollow">粉丝 专属：</a></li><li><a href="#_4" rel="nofollow">写在前面：</a></li><li><a href="#_16" rel="nofollow">功能实现</a></li><li><a href="#_29" rel="nofollow">环境要求</a></li><li><a href="#_39" rel="nofollow">怎么玩</a></li><li><a href="#_49" rel="nofollow">个性化定义</a></li><li><a href="#_58" rel="nofollow">项目演示：</a></li><li><a href="#_62" rel="nofollow">源码分享</a></li><li><ul><li><a href="#Map_64" rel="nofollow">Map地图:</a></li><li><a href="#Menubarpy_115" rel="nofollow">Menubar.py</a></li><li><a href="#_560" rel="nofollow">主菜单</a></li></ul> 
   </li><li><a href="#_635" rel="nofollow">主函数：</a></li><li><a href="#_655" rel="nofollow">项目开源地址</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="__1"></a>粉丝 专属：</h3> 
<p><img src="https://images2.imgbox.com/13/55/I56LwwLM_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_4"></a>写在前面：</h3> 
<p>今天给大家推荐一个Gtihub开源项目：PythonPlantsVsZombies，翻译成中就是植物大战僵尸。</p> 
<p><img src="https://images2.imgbox.com/bd/96/Hqkr8HPZ_o.png" alt="在这里插入图片描述"></p> 
<p>《植物大战僵尸》是一款极富策略性的小游戏。可怕的僵尸即将入侵，每种僵尸都有不同的特点，例如铁桶僵尸拥有极强的抗击打能力，矿工僵尸可以挖地道绕过种植在土壤表面的植物等。玩家防御僵尸的方式就是栽种植物。49种植物每种都有不同的功能，例如樱桃炸弹可以和周围一定范围内的所有僵尸同归于尽，而食人花可以吃掉最靠近自己的一只僵尸。玩家可以针对不同僵尸的弱点来合理地种植植物，这也是胜利的诀窍。游戏根据玩法不同分为五种游戏模式：冒险模式、迷你模式、解谜模式、生存模式、禅境花园。加之黑夜、屋顶、浓雾以及泳池之类的障碍增加了其挑战性。该游戏近乎永无止境。</p> 
<h3><a id="_16"></a>功能实现</h3> 
<ul><li> <p>支持的植物：向日葵、豌豆射手、胡桃、雪豌豆射手、樱桃炸弹、三豌豆射手、大嘴花、puffshroom、马铃薯胺、穗状杂草、南瓜、胆小菇、墨西哥胡椒、阳光菇、冰川菇、催眠蘑菇。</p> </li><li> <p>支持僵尸：普通僵尸，旗帜僵尸，路障僵尸，铁桶僵尸，报纸僵尸。</p> </li><li> <p>支持在关卡开始时选择植物卡片。</p> </li><li> <p>支持白天级别、夜间级别、移动卡选择级别和胡桃保龄球级别。</p> </li></ul> 
<h3><a id="_29"></a>环境要求</h3> 
<ul><li> <p>1、python3.7<br> <mark>注意： Python3.7是最佳运行环境，但是不是强制性要求。对于Linux： 如果你的 Linux 有预装的 Python3+ 就可以运行了。LINUX Mint 操作系统直接升级到 Python 3.7 有可能导致系统自带的 python 版本无法执行。</mark></p> </li><li> <p>2、Python-Pygame 1.9</p> </li></ul> 
<h3><a id="_39"></a>怎么玩</h3> 
<p>使用鼠标收集阳光，选择植物卡片并播种植物<br> 您可以通过更改 source/constants.py 中的START_LEVEL_NUM值来设置起始级别<br> 级别 1 和 2：天级别<br> 第 3 级：夜间级别<br> 第 4 级：移动卡片选择级别<br> 5级：墙果保龄球级别</p> 
<h3><a id="_49"></a>个性化定义</h3> 
<p>游戏的关卡数据，存储在json文件里的。具体目录：PythonPlantsVsZombies-master\source\data。我们可以进行自定义配置，例如僵尸的位置和时间，背景信息。</p> 
<p><img src="https://images2.imgbox.com/60/d8/FBwd85OQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_58"></a>项目演示：</h3> 
<p><img src="https://images2.imgbox.com/6c/d4/0eHDjB5z_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/97/ad/xHcxWj4k_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_62"></a>源码分享</h3> 
<h4><a id="Map_64"></a>Map地图:</h4> 
<pre><code class="prism language-python">__author__ <span class="token operator">=</span> <span class="token string">'marble_xu'</span>

<span class="token keyword">import</span> random
<span class="token keyword">import</span> pygame <span class="token keyword">as</span> pg
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> tool
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> constants <span class="token keyword">as</span> c

<span class="token keyword">class</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>width <span class="token operator">=</span> width
        self<span class="token punctuation">.</span>height <span class="token operator">=</span> height
        self<span class="token punctuation">.</span><span class="token builtin">map</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">isValid</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>map_x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">or</span> map_x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>width <span class="token keyword">or</span>
            map_y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">or</span> map_y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    
    <span class="token keyword">def</span> <span class="token function">isMovable</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">[</span>map_y<span class="token punctuation">]</span><span class="token punctuation">[</span>map_x<span class="token punctuation">]</span> <span class="token operator">==</span> c<span class="token punctuation">.</span>MAP_EMPTY<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">getMapIndex</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x <span class="token operator">-=</span> c<span class="token punctuation">.</span>MAP_OFFSET_X
        y <span class="token operator">-=</span> c<span class="token punctuation">.</span>MAP_OFFSET_Y
        <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">//</span> c<span class="token punctuation">.</span>GRID_X_SIZE<span class="token punctuation">,</span> y <span class="token operator">//</span> c<span class="token punctuation">.</span>GRID_Y_SIZE<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">getMapGridPos</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>map_x <span class="token operator">*</span> c<span class="token punctuation">.</span>GRID_X_SIZE <span class="token operator">+</span> c<span class="token punctuation">.</span>GRID_X_SIZE<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">+</span> c<span class="token punctuation">.</span>MAP_OFFSET_X<span class="token punctuation">,</span>
                map_y <span class="token operator">*</span> c<span class="token punctuation">.</span>GRID_Y_SIZE <span class="token operator">+</span> c<span class="token punctuation">.</span>GRID_Y_SIZE<span class="token operator">//</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> c<span class="token punctuation">.</span>MAP_OFFSET_Y<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">setMapGridType</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">[</span>map_y<span class="token punctuation">]</span><span class="token punctuation">[</span>map_x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">type</span>

    <span class="token keyword">def</span> <span class="token function">getRandomMapIndex</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        map_x <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>width<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        map_y <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>height<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">showPlant</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pos <span class="token operator">=</span> <span class="token boolean">None</span>
        map_x<span class="token punctuation">,</span> map_y <span class="token operator">=</span> self<span class="token punctuation">.</span>getMapIndex<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>isValid<span class="token punctuation">(</span>map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>isMovable<span class="token punctuation">(</span>map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            pos <span class="token operator">=</span> self<span class="token punctuation">.</span>getMapGridPos<span class="token punctuation">(</span>map_x<span class="token punctuation">,</span> map_y<span class="token punctuation">)</span>
        <span class="token keyword">return</span> pos
</code></pre> 
<h4><a id="Menubarpy_115"></a>Menubar.py</h4> 
<pre><code class="prism language-python">__author__ <span class="token operator">=</span> <span class="token string">'marble_xu'</span>

<span class="token keyword">import</span> random
<span class="token keyword">import</span> pygame <span class="token keyword">as</span> pg
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> tool
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> constants <span class="token keyword">as</span> c

PANEL_Y_START <span class="token operator">=</span> <span class="token number">87</span>
PANEL_X_START <span class="token operator">=</span> <span class="token number">22</span>
PANEL_Y_INTERNAL <span class="token operator">=</span> <span class="token number">74</span>
PANEL_X_INTERNAL <span class="token operator">=</span> <span class="token number">53</span>
CARD_LIST_NUM <span class="token operator">=</span> <span class="token number">8</span>

card_name_list <span class="token operator">=</span> <span class="token punctuation">[</span>c<span class="token punctuation">.</span>CARD_SUNFLOWER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_PEASHOOTER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_SNOWPEASHOOTER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_WALLNUT<span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>CARD_CHERRYBOMB<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_THREEPEASHOOTER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_REPEATERPEA<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_CHOMPER<span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>CARD_PUFFSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_POTATOMINE<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_SQUASH<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_SPIKEWEED<span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>CARD_JALAPENO<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_SCAREDYSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_SUNSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_ICESHROOM<span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>CARD_HYPNOSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_WALLNUT<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CARD_REDWALLNUT<span class="token punctuation">]</span>
plant_name_list <span class="token operator">=</span> <span class="token punctuation">[</span>c<span class="token punctuation">.</span>SUNFLOWER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>PEASHOOTER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>SNOWPEASHOOTER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>WALLNUT<span class="token punctuation">,</span>
                   c<span class="token punctuation">.</span>CHERRYBOMB<span class="token punctuation">,</span> c<span class="token punctuation">.</span>THREEPEASHOOTER<span class="token punctuation">,</span> c<span class="token punctuation">.</span>REPEATERPEA<span class="token punctuation">,</span> c<span class="token punctuation">.</span>CHOMPER<span class="token punctuation">,</span>
                   c<span class="token punctuation">.</span>PUFFSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>POTATOMINE<span class="token punctuation">,</span> c<span class="token punctuation">.</span>SQUASH<span class="token punctuation">,</span> c<span class="token punctuation">.</span>SPIKEWEED<span class="token punctuation">,</span>
                   c<span class="token punctuation">.</span>JALAPENO<span class="token punctuation">,</span> c<span class="token punctuation">.</span>SCAREDYSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>SUNSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>ICESHROOM<span class="token punctuation">,</span>
                   c<span class="token punctuation">.</span>HYPNOSHROOM<span class="token punctuation">,</span> c<span class="token punctuation">.</span>WALLNUTBOWLING<span class="token punctuation">,</span> c<span class="token punctuation">.</span>REDWALLNUTBOWLING<span class="token punctuation">]</span>
plant_sun_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">175</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">325</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
plant_frozen_time_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span>
                          <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
all_card_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">getSunValueImage</span><span class="token punctuation">(</span>sun_value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    font <span class="token operator">=</span> pg<span class="token punctuation">.</span>font<span class="token punctuation">.</span>SysFont<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span>
    width <span class="token operator">=</span> <span class="token number">32</span>
    msg_image <span class="token operator">=</span> font<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>sun_value<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>NAVYBLUE<span class="token punctuation">,</span> c<span class="token punctuation">.</span>LIGHTYELLOW<span class="token punctuation">)</span>
    msg_rect <span class="token operator">=</span> msg_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    msg_w <span class="token operator">=</span> msg_rect<span class="token punctuation">.</span>width

    image <span class="token operator">=</span> pg<span class="token punctuation">.</span>Surface<span class="token punctuation">(</span><span class="token punctuation">[</span>width<span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    x <span class="token operator">=</span> width <span class="token operator">-</span> msg_w

    image<span class="token punctuation">.</span>fill<span class="token punctuation">(</span>c<span class="token punctuation">.</span>LIGHTYELLOW<span class="token punctuation">)</span>
    image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>msg_image<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> msg_rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> msg_rect<span class="token punctuation">.</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span>
    image<span class="token punctuation">.</span>set_colorkey<span class="token punctuation">(</span>c<span class="token punctuation">.</span>BLACK<span class="token punctuation">)</span>
    <span class="token keyword">return</span> image

<span class="token keyword">def</span> <span class="token function">getCardPool</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    card_pool <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> card <span class="token keyword">in</span> data<span class="token punctuation">:</span>
        tmp <span class="token operator">=</span> card<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span>name <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>plant_name_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> name <span class="token operator">==</span> tmp<span class="token punctuation">:</span>
                card_pool<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                <span class="token keyword">break</span>
    <span class="token keyword">return</span> card_pool

<span class="token keyword">class</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> name_index<span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">0.78</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>card_name_list<span class="token punctuation">[</span>name_index<span class="token punctuation">]</span><span class="token punctuation">,</span> scale<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> y
        
        self<span class="token punctuation">.</span>name_index <span class="token operator">=</span> name_index
        self<span class="token punctuation">.</span>sun_cost <span class="token operator">=</span> plant_sun_list<span class="token punctuation">[</span>name_index<span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>frozen_time <span class="token operator">=</span> plant_frozen_time_list<span class="token punctuation">[</span>name_index<span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>frozen_timer <span class="token operator">=</span> <span class="token operator">-</span>self<span class="token punctuation">.</span>frozen_time
        self<span class="token punctuation">.</span>refresh_timer <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>select <span class="token operator">=</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">loadFrame</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> scale<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame <span class="token operator">=</span> tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        rect <span class="token operator">=</span> frame<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        width<span class="token punctuation">,</span> height <span class="token operator">=</span> rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>h

        self<span class="token punctuation">.</span>orig_image <span class="token operator">=</span> tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> c<span class="token punctuation">.</span>BLACK<span class="token punctuation">,</span> scale<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>image <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image

    <span class="token keyword">def</span> <span class="token function">checkMouseClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> mouse_pos
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>
           y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token keyword">and</span> y <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">canClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sun_value<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>sun_cost <span class="token operator">&lt;=</span> sun_value <span class="token keyword">and</span> <span class="token punctuation">(</span>current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>frozen_timer<span class="token punctuation">)</span> <span class="token operator">&gt;</span> self<span class="token punctuation">.</span>frozen_time<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">canSelect</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>select

    <span class="token keyword">def</span> <span class="token function">setSelect</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> can_select<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>select <span class="token operator">=</span> can_select
        <span class="token keyword">if</span> can_select<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">setFrozenTime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>frozen_timer <span class="token operator">=</span> current_time

    <span class="token keyword">def</span> <span class="token function">createShowImage</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sun_value<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">'''create a card image to show cool down status
           or disable status when have not enough sun value'''</span>
        time <span class="token operator">=</span> current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>frozen_timer
        <span class="token keyword">if</span> time <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>frozen_time<span class="token punctuation">:</span> <span class="token comment">#cool down status</span>
            image <span class="token operator">=</span> pg<span class="token punctuation">.</span>Surface<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>h<span class="token punctuation">]</span><span class="token punctuation">)</span>
            frozen_image <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
            frozen_image<span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>
            frozen_height <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>frozen_time <span class="token operator">-</span> time<span class="token punctuation">)</span><span class="token operator">/</span>self<span class="token punctuation">.</span>frozen_time <span class="token operator">*</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>h
            
            image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>frozen_image<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> frozen_height<span class="token punctuation">)</span><span class="token punctuation">)</span>
            image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>orig_image<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>frozen_height<span class="token punctuation">)</span><span class="token punctuation">,</span>
                       <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> frozen_height<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>h <span class="token operator">-</span> frozen_height<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>sun_cost <span class="token operator">&gt;</span> sun_value<span class="token punctuation">:</span> <span class="token comment">#disable status</span>
            image <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
            image<span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">192</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            image <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image
        <span class="token keyword">return</span> image

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sun_value<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>refresh_timer<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">250</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>image <span class="token operator">=</span> self<span class="token punctuation">.</span>createShowImage<span class="token punctuation">(</span>sun_value<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>refresh_timer <span class="token operator">=</span> current_time

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> surface<span class="token punctuation">)</span><span class="token punctuation">:</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MenuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card_list<span class="token punctuation">,</span> sun_value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>c<span class="token punctuation">.</span>MENUBAR_BACKGROUND<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">10</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span>
        
        self<span class="token punctuation">.</span>sun_value <span class="token operator">=</span> sun_value
        self<span class="token punctuation">.</span>card_offset_x <span class="token operator">=</span> <span class="token number">32</span>
        self<span class="token punctuation">.</span>setupCards<span class="token punctuation">(</span>card_list<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">loadFrame</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame <span class="token operator">=</span> tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        rect <span class="token operator">=</span> frame<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frame_rect <span class="token operator">=</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>x<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>y<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>h<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>image <span class="token operator">=</span> tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>frame_rect<span class="token punctuation">,</span> c<span class="token punctuation">.</span>WHITE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>current_time <span class="token operator">=</span> current_time
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            card<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sun_value<span class="token punctuation">,</span> self<span class="token punctuation">.</span>current_time<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">createImage</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span>
        img <span class="token operator">=</span> self<span class="token punctuation">.</span>image
        rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        width <span class="token operator">=</span> rect<span class="token punctuation">.</span>w
        height <span class="token operator">=</span> rect<span class="token punctuation">.</span>h
        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pg<span class="token punctuation">.</span>Surface<span class="token punctuation">(</span><span class="token punctuation">(</span>width <span class="token operator">*</span> num<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> y
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
            x <span class="token operator">=</span> i <span class="token operator">*</span> width
            self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>set_colorkey<span class="token punctuation">(</span>c<span class="token punctuation">.</span>BLACK<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">setupCards</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>card_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        x <span class="token operator">=</span> self<span class="token punctuation">.</span>card_offset_x
        y <span class="token operator">=</span> <span class="token number">8</span>
        <span class="token keyword">for</span> index <span class="token keyword">in</span> card_list<span class="token punctuation">:</span>
            x <span class="token operator">+=</span> <span class="token number">55</span>
            self<span class="token punctuation">.</span>card_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Card<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">checkCardClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            <span class="token keyword">if</span> card<span class="token punctuation">.</span>checkMouseClick<span class="token punctuation">(</span>mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> card<span class="token punctuation">.</span>canClick<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sun_value<span class="token punctuation">,</span> self<span class="token punctuation">.</span>current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    result <span class="token operator">=</span> <span class="token punctuation">(</span>plant_name_list<span class="token punctuation">[</span>card<span class="token punctuation">.</span>name_index<span class="token punctuation">]</span><span class="token punctuation">,</span> card<span class="token punctuation">)</span>
                <span class="token keyword">break</span>
        <span class="token keyword">return</span> result
    
    <span class="token keyword">def</span> <span class="token function">checkMenuBarClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> mouse_pos
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>
           y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token keyword">and</span> y <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">decreaseSunValue</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>sun_value <span class="token operator">-=</span> value

    <span class="token keyword">def</span> <span class="token function">increaseSunValue</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>sun_value <span class="token operator">+=</span> value

    <span class="token keyword">def</span> <span class="token function">setCardFrozenTime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> plant_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            <span class="token keyword">if</span> plant_name_list<span class="token punctuation">[</span>card<span class="token punctuation">.</span>name_index<span class="token punctuation">]</span> <span class="token operator">==</span> plant_name<span class="token punctuation">:</span>
                card<span class="token punctuation">.</span>setFrozenTime<span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_time<span class="token punctuation">)</span>
                <span class="token keyword">break</span>

    <span class="token keyword">def</span> <span class="token function">drawSunValue</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>value_image <span class="token operator">=</span> getSunValueImage<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sun_value<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>value_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>value_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>value_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">21</span>
        self<span class="token punctuation">.</span>value_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">-</span> <span class="token number">21</span>
        
        self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>value_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>value_rect<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> surface<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>drawSunValue<span class="token punctuation">(</span><span class="token punctuation">)</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            card<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>surface<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Panel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card_list<span class="token punctuation">,</span> sun_value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>loadImages<span class="token punctuation">(</span>sun_value<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>selected_cards <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>selected_num <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>setupCards<span class="token punctuation">(</span>card_list<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">loadFrame</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame <span class="token operator">=</span> tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        rect <span class="token operator">=</span> frame<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frame_rect <span class="token operator">=</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>x<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>y<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>h<span class="token punctuation">)</span>

        <span class="token keyword">return</span> tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>frame_rect<span class="token punctuation">,</span> c<span class="token punctuation">.</span>WHITE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">loadImages</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sun_value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>menu_image <span class="token operator">=</span> self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>c<span class="token punctuation">.</span>MENUBAR_BACKGROUND<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>menu_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>menu_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>menu_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>menu_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span>

        self<span class="token punctuation">.</span>panel_image <span class="token operator">=</span> self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>c<span class="token punctuation">.</span>PANEL_BACKGROUND<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>panel_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>panel_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>panel_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>panel_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> PANEL_Y_START

        
        self<span class="token punctuation">.</span>value_image <span class="token operator">=</span> getSunValueImage<span class="token punctuation">(</span>sun_value<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>value_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>value_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>value_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">21</span>
        self<span class="token punctuation">.</span>value_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> self<span class="token punctuation">.</span>menu_rect<span class="token punctuation">.</span>bottom <span class="token operator">-</span> <span class="token number">21</span>

        self<span class="token punctuation">.</span>button_image <span class="token operator">=</span>  self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>c<span class="token punctuation">.</span>START_BUTTON<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>button_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">155</span>
        self<span class="token punctuation">.</span>button_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">547</span>

    <span class="token keyword">def</span> <span class="token function">setupCards</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>card_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        x <span class="token operator">=</span> PANEL_X_START <span class="token operator">-</span> PANEL_X_INTERNAL
        y <span class="token operator">=</span> PANEL_Y_START <span class="token operator">+</span> <span class="token number">43</span> <span class="token operator">-</span> PANEL_Y_INTERNAL
        <span class="token keyword">for</span> i<span class="token punctuation">,</span> index <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>card_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">8</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                x <span class="token operator">=</span> PANEL_X_START <span class="token operator">-</span> PANEL_X_INTERNAL
                y <span class="token operator">+=</span> PANEL_Y_INTERNAL
            x <span class="token operator">+=</span> PANEL_X_INTERNAL
            self<span class="token punctuation">.</span>card_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Card<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">checkCardClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        delete_card <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>selected_cards<span class="token punctuation">:</span>
            <span class="token keyword">if</span> delete_card<span class="token punctuation">:</span> <span class="token comment"># when delete a card, move right cards to left</span>
                card<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">55</span>
            <span class="token keyword">elif</span> card<span class="token punctuation">.</span>checkMouseClick<span class="token punctuation">(</span>mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>deleteCard<span class="token punctuation">(</span>card<span class="token punctuation">.</span>name_index<span class="token punctuation">)</span>
                delete_card <span class="token operator">=</span> card

        <span class="token keyword">if</span> delete_card<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>selected_cards<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>delete_card<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>selected_num <span class="token operator">-=</span> <span class="token number">1</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>selected_num <span class="token operator">==</span> CARD_LIST_NUM<span class="token punctuation">:</span>
            <span class="token keyword">return</span>

        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            <span class="token keyword">if</span> card<span class="token punctuation">.</span>checkMouseClick<span class="token punctuation">(</span>mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> card<span class="token punctuation">.</span>canSelect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>addCard<span class="token punctuation">(</span>card<span class="token punctuation">)</span>
                <span class="token keyword">break</span>

    <span class="token keyword">def</span> <span class="token function">addCard</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card<span class="token punctuation">)</span><span class="token punctuation">:</span>
        card<span class="token punctuation">.</span>setSelect<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        y <span class="token operator">=</span> <span class="token number">8</span>
        x <span class="token operator">=</span> <span class="token number">78</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>selected_num <span class="token operator">*</span> <span class="token number">55</span>
        self<span class="token punctuation">.</span>selected_cards<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Card<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> card<span class="token punctuation">.</span>name_index<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>selected_num <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token keyword">def</span> <span class="token function">deleteCard</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>card_list<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>setSelect<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">checkStartButtonClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>selected_num <span class="token operator">&lt;</span> CARD_LIST_NUM<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>

        x<span class="token punctuation">,</span> y <span class="token operator">=</span> mouse_pos
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>button_rect<span class="token punctuation">.</span>x <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>button_rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>
            y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>button_rect<span class="token punctuation">.</span>y <span class="token keyword">and</span> y <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>button_rect<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>
           <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">getSelectedCards</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        card_index_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>selected_cards<span class="token punctuation">:</span>
            card_index_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>card<span class="token punctuation">.</span>name_index<span class="token punctuation">)</span>
        <span class="token keyword">return</span> card_index_list

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> surface<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>menu_image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>value_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>value_rect<span class="token punctuation">)</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>menu_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>menu_rect<span class="token punctuation">)</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>panel_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>panel_rect<span class="token punctuation">)</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            card<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>surface<span class="token punctuation">)</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>selected_cards<span class="token punctuation">:</span>
            card<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>surface<span class="token punctuation">)</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>selected_num <span class="token operator">==</span> CARD_LIST_NUM<span class="token punctuation">:</span>
            surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>button_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>button_rect<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MoveCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> card_name<span class="token punctuation">,</span> plant_name<span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">0.78</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>card_name<span class="token punctuation">,</span> scale<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> y
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>image <span class="token operator">=</span> self<span class="token punctuation">.</span>createShowImage<span class="token punctuation">(</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>card_name <span class="token operator">=</span> card_name
        self<span class="token punctuation">.</span>plant_name <span class="token operator">=</span> plant_name
        self<span class="token punctuation">.</span>move_timer <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>select <span class="token operator">=</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">loadFrame</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> scale<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame <span class="token operator">=</span> tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        rect <span class="token operator">=</span> frame<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        width<span class="token punctuation">,</span> height <span class="token operator">=</span> rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>h

        self<span class="token punctuation">.</span>orig_image <span class="token operator">=</span> tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> c<span class="token punctuation">.</span>BLACK<span class="token punctuation">,</span> scale<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>orig_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>image <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image

    <span class="token keyword">def</span> <span class="token function">checkMouseClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> mouse_pos
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>
           y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token keyword">and</span> y <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">createShowImage</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">'''create a part card image when card appears from left'''</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>orig_rect<span class="token punctuation">.</span>w<span class="token punctuation">:</span> <span class="token comment">#create a part card image</span>
            image <span class="token operator">=</span> pg<span class="token punctuation">.</span>Surface<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>h<span class="token punctuation">]</span><span class="token punctuation">)</span>
            image<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>orig_image<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>w <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            image <span class="token operator">=</span> self<span class="token punctuation">.</span>orig_image
        <span class="token keyword">return</span> image

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left_x<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>move_timer <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>move_timer <span class="token operator">=</span> current_time
        <span class="token keyword">elif</span> <span class="token punctuation">(</span>current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>move_timer<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> c<span class="token punctuation">.</span>CARD_MOVE_TIME<span class="token punctuation">:</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> left_x<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">1</span>
                self<span class="token punctuation">.</span>image <span class="token operator">=</span> self<span class="token punctuation">.</span>createShowImage<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>move_timer <span class="token operator">+=</span> c<span class="token punctuation">.</span>CARD_MOVE_TIME

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> surface<span class="token punctuation">)</span><span class="token punctuation">:</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MoveBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card_pool<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>loadFrame<span class="token punctuation">(</span>c<span class="token punctuation">.</span>MOVEBAR_BACKGROUND<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">90</span>
        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span>
        
        self<span class="token punctuation">.</span>card_start_x <span class="token operator">=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">8</span>
        self<span class="token punctuation">.</span>card_end_x <span class="token operator">=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token operator">-</span> <span class="token number">5</span>
        self<span class="token punctuation">.</span>card_pool <span class="token operator">=</span> card_pool
        self<span class="token punctuation">.</span>card_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>create_timer <span class="token operator">=</span> <span class="token operator">-</span>c<span class="token punctuation">.</span>MOVEBAR_CARD_FRESH_TIME

    <span class="token keyword">def</span> <span class="token function">loadFrame</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame <span class="token operator">=</span> tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        rect <span class="token operator">=</span> frame<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frame_rect <span class="token operator">=</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>x<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>y<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>w<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>h<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>image <span class="token operator">=</span> tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>frame_rect<span class="token punctuation">,</span> c<span class="token punctuation">.</span>WHITE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">createCard</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card_list<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token operator">&gt;</span> self<span class="token punctuation">.</span>card_end_x<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        x <span class="token operator">=</span> self<span class="token punctuation">.</span>card_end_x
        y <span class="token operator">=</span> <span class="token number">6</span>
        index <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card_pool<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
        card_index <span class="token operator">=</span> self<span class="token punctuation">.</span>card_pool<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
        card_name <span class="token operator">=</span> card_name_list<span class="token punctuation">[</span>card_index<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'_move'</span>
        plant_name <span class="token operator">=</span> plant_name_list<span class="token punctuation">[</span>card_index<span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>card_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>MoveCard<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> card_name<span class="token punctuation">,</span> plant_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> current_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>current_time <span class="token operator">=</span> current_time
        left_x <span class="token operator">=</span> self<span class="token punctuation">.</span>card_start_x
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            card<span class="token punctuation">.</span>update<span class="token punctuation">(</span>left_x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>current_time<span class="token punctuation">)</span>
            left_x <span class="token operator">=</span> card<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token operator">+</span> <span class="token number">1</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>create_timer<span class="token punctuation">)</span> <span class="token operator">&gt;</span> c<span class="token punctuation">.</span>MOVEBAR_CARD_FRESH_TIME<span class="token punctuation">:</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>createCard<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>create_timer <span class="token operator">=</span> self<span class="token punctuation">.</span>current_time

    <span class="token keyword">def</span> <span class="token function">checkCardClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">for</span> index<span class="token punctuation">,</span> card <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> card<span class="token punctuation">.</span>checkMouseClick<span class="token punctuation">(</span>mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
                result <span class="token operator">=</span> <span class="token punctuation">(</span>card<span class="token punctuation">.</span>plant_name<span class="token punctuation">,</span> card<span class="token punctuation">)</span>
                <span class="token keyword">break</span>
        <span class="token keyword">return</span> result
    
    <span class="token keyword">def</span> <span class="token function">checkMenuBarClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> mouse_pos
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>
           y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token keyword">and</span> y <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">deleateCard</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> card<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>card_list<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>card<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> surface<span class="token punctuation">)</span><span class="token punctuation">:</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span>
        <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>card_list<span class="token punctuation">:</span>
            card<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>surface<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_560"></a>主菜单</h4> 
<pre><code class="prism language-python">__author__ <span class="token operator">=</span> <span class="token string">'marble_xu'</span>

<span class="token keyword">import</span> pygame <span class="token keyword">as</span> pg
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> tool
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> constants <span class="token keyword">as</span> c

<span class="token keyword">class</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span>tool<span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        tool<span class="token punctuation">.</span>State<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">startup</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> current_time<span class="token punctuation">,</span> persist<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> c<span class="token punctuation">.</span>LEVEL
        self<span class="token punctuation">.</span>persist <span class="token operator">=</span> persist
        self<span class="token punctuation">.</span>game_info <span class="token operator">=</span> persist
        
        self<span class="token punctuation">.</span>setupBackground<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setupOption<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">setupBackground</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        frame_rect <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>bg_image <span class="token operator">=</span> tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>c<span class="token punctuation">.</span>MAIN_MENU_IMAGE<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>frame_rect<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>bg_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>bg_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>bg_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span>
        
    <span class="token keyword">def</span> <span class="token function">setupOption</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>option_frames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        frame_names <span class="token operator">=</span> <span class="token punctuation">[</span>c<span class="token punctuation">.</span>OPTION_ADVENTURE <span class="token operator">+</span> <span class="token string">'_0'</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>OPTION_ADVENTURE <span class="token operator">+</span> <span class="token string">'_1'</span><span class="token punctuation">]</span>
        frame_rect <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">165</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span>
        
        <span class="token keyword">for</span> name <span class="token keyword">in</span> frame_names<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>option_frames<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tool<span class="token punctuation">.</span>get_image<span class="token punctuation">(</span>tool<span class="token punctuation">.</span>GFX<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>frame_rect<span class="token punctuation">,</span> c<span class="token punctuation">.</span>BLACK<span class="token punctuation">,</span> <span class="token number">1.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        self<span class="token punctuation">.</span>option_frame_index <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>option_image <span class="token operator">=</span> self<span class="token punctuation">.</span>option_frames<span class="token punctuation">[</span>self<span class="token punctuation">.</span>option_frame_index<span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>option_rect <span class="token operator">=</span> self<span class="token punctuation">.</span>option_image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option_rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">435</span>
        self<span class="token punctuation">.</span>option_rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">75</span>
        
        self<span class="token punctuation">.</span>option_start <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>option_timer <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>option_clicked <span class="token operator">=</span> <span class="token boolean">False</span>
    
    <span class="token keyword">def</span> <span class="token function">checkOptionClick</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> mouse_pos
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>option_rect<span class="token punctuation">.</span>x <span class="token keyword">and</span> x <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>option_rect<span class="token punctuation">.</span>right <span class="token keyword">and</span>
           y <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>option_rect<span class="token punctuation">.</span>y <span class="token keyword">and</span> y <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>option_rect<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>option_clicked <span class="token operator">=</span> <span class="token boolean">True</span>
            self<span class="token punctuation">.</span>option_timer <span class="token operator">=</span> self<span class="token punctuation">.</span>option_start <span class="token operator">=</span> self<span class="token punctuation">.</span>current_time
        <span class="token keyword">return</span> <span class="token boolean">False</span>
        
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> surface<span class="token punctuation">,</span> current_time<span class="token punctuation">,</span> mouse_pos<span class="token punctuation">,</span> mouse_click<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>current_time <span class="token operator">=</span> self<span class="token punctuation">.</span>game_info<span class="token punctuation">[</span>c<span class="token punctuation">.</span>CURRENT_TIME<span class="token punctuation">]</span> <span class="token operator">=</span> current_time
        
        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>option_clicked<span class="token punctuation">:</span>
            <span class="token keyword">if</span> mouse_pos<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>checkOptionClick<span class="token punctuation">(</span>mouse_pos<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>option_timer<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">200</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>option_frame_index <span class="token operator">+=</span> <span class="token number">1</span>
                <span class="token keyword">if</span> self<span class="token punctuation">.</span>option_frame_index <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>option_frame_index <span class="token operator">=</span> <span class="token number">0</span>
                self<span class="token punctuation">.</span>option_timer <span class="token operator">=</span> self<span class="token punctuation">.</span>current_time
                self<span class="token punctuation">.</span>option_image <span class="token operator">=</span> self<span class="token punctuation">.</span>option_frames<span class="token punctuation">[</span>self<span class="token punctuation">.</span>option_frame_index<span class="token punctuation">]</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_time <span class="token operator">-</span> self<span class="token punctuation">.</span>option_start<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1300</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">True</span>

        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>bg_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>bg_rect<span class="token punctuation">)</span>
        surface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>option_image<span class="token punctuation">,</span> self<span class="token punctuation">.</span>option_rect<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_635"></a>主函数：</h3> 
<pre><code class="prism language-python">__author__ <span class="token operator">=</span> <span class="token string">'marble_xu'</span>

<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> tool
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> constants <span class="token keyword">as</span> c
<span class="token keyword">from</span> <span class="token punctuation">.</span>state <span class="token keyword">import</span> mainmenu<span class="token punctuation">,</span> screen<span class="token punctuation">,</span> level

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    game <span class="token operator">=</span> tool<span class="token punctuation">.</span>Control<span class="token punctuation">(</span><span class="token punctuation">)</span>
    state_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>c<span class="token punctuation">.</span>MAIN_MENU<span class="token punctuation">:</span> mainmenu<span class="token punctuation">.</span>Menu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>GAME_VICTORY<span class="token punctuation">:</span> screen<span class="token punctuation">.</span>GameVictoryScreen<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>GAME_LOSE<span class="token punctuation">:</span> screen<span class="token punctuation">.</span>GameLoseScreen<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  c<span class="token punctuation">.</span>LEVEL<span class="token punctuation">:</span> level<span class="token punctuation">.</span>Level<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    game<span class="token punctuation">.</span>setup_states<span class="token punctuation">(</span>state_dict<span class="token punctuation">,</span> c<span class="token punctuation">.</span>MAIN_MENU<span class="token punctuation">)</span>
    game<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_655"></a>项目开源地址</h3> 
<blockquote> 
 <p><a href="https://github.com/marblexu/PythonPlantsVsZombies">https://github.com/marblexu/PythonPlantsVsZombies</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cc7c37202ab7542f165f41c165bbefac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis（主从复制搭建）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/703235e48311621e9dfa12239c147b39/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">本地搭建AI环境</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>