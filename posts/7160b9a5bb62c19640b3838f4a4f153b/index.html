<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ROS：move_base路径规划介绍、更换全局路径规划算法（A star、Dijkstra、DWA，测试当前是哪种算法，效果展示图） - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/7160b9a5bb62c19640b3838f4a4f153b/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="ROS：move_base路径规划介绍、更换全局路径规划算法（A star、Dijkstra、DWA，测试当前是哪种算法，效果展示图）">
  <meta property="og:description" content="前提：需要安装navigation包，才可以运行move_base。
move_base包默认算法：
全局路径规划：Dijkstra；局部路径规划：航迹推算； 一.move_base路径规划包内容 二.更换全局路径规划算法（A*、Dijkstra、DWA） A*、Dijkstra属于全局路径规划、DWA属于局部路径规划。
1、move_base.launch move_base.launch文件需要添加以下内容：
&lt;!--加载A star、Dijkstra算法--&gt; &lt;param name=&#34;base_global_planner&#34; value=&#34;global_planner/GlobalPlanner&#34;/&gt; &lt;param name=&#34;planner_frequency&#34; value=&#34;1.0&#34; /&gt; &lt;param name=&#34;planner_patience&#34; value=&#34;5.0&#34; /&gt; &lt;!--加载DWA算法--&gt; &lt;param name=&#34;base_local_planner&#34; value=&#34;dwa_local_planner/DWAPlannerROS&#34; /&gt; 整体的move_base.launch文件内容如下（其中turtlebot3_navigation内容需要修改为对应自己的包）：
&lt;launch&gt; &lt;!-- Arguments --&gt; &lt;arg name=&#34;model&#34; default=&#34;$(env TURTLEBOT3_MODEL)&#34; doc=&#34;model type [burger, waffle, waffle_pi]&#34;/&gt; &lt;arg name=&#34;cmd_vel_topic&#34; default=&#34;/cmd_vel&#34; /&gt; &lt;arg name=&#34;odom_topic&#34; default=&#34;odom&#34; /&gt; &lt;arg name=&#34;move_forward_only&#34; default=&#34;false&#34;/&gt; &lt;!-- move_base --&gt; &lt;node pkg=&#34;move_base&#34; type=&#34;move_base&#34; respawn=&#34;false&#34; name=&#34;move_base&#34; output=&#34;screen&#34;&gt; &lt;!--加载A star算法--&gt; &lt;param name=&#34;base_global_planner&#34; value=&#34;global_planner/GlobalPlanner&#34;/&gt; &lt;param name=&#34;planner_frequency&#34; value=&#34;1.0&#34; /&gt; &lt;param name=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-02T10:21:35+08:00">
    <meta property="article:modified_time" content="2023-08-02T10:21:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ROS：move_base路径规划介绍、更换全局路径规划算法（A star、Dijkstra、DWA，测试当前是哪种算法，效果展示图）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>前提：<span style="background-color:#a2e043;">需要安装navigation包</span>，才可以运行move_base。</p> 
<p>move_base包默认算法：</p> 
<ol><li>全局路径规划：Dijkstra；</li><li>局部路径规划：航迹推算；</li></ol> 
<h2>一.move_base路径规划包内容</h2> 
<p><img alt="" height="628" src="https://images2.imgbox.com/7e/60/I6ZAWCjZ_o.png" width="1200"><img alt="" height="634" src="https://images2.imgbox.com/84/61/L3SCkp2s_o.png" width="1200"></p> 
<p><img alt="" height="648" src="https://images2.imgbox.com/9c/a8/8uhGjpwP_o.png" width="1200"></p> 
<h2> 二.更换全局路径规划算法（A*、Dijkstra、DWA）</h2> 
<p>A*、Dijkstra属于全局路径规划、DWA属于局部路径规划。</p> 
<h3>1、move_base.launch</h3> 
<p>move_base.launch文件需要<span style="background-color:#a2e043;">添加以下内容</span>：</p> 
<pre><code class="language-cpp">    &lt;!--加载A star、Dijkstra算法--&gt;
    &lt;param name="base_global_planner" value="global_planner/GlobalPlanner"/&gt;
    &lt;param name="planner_frequency" value="1.0" /&gt;
    &lt;param name="planner_patience" value="5.0" /&gt;
    &lt;!--加载DWA算法--&gt;
    &lt;param name="base_local_planner" value="dwa_local_planner/DWAPlannerROS" /&gt;</code></pre> 
<p>整体的move_base.launch文件内容如下（其中<span style="color:#a2e043;">turtlebot3_navigation</span>内容需要修改为对应自己的包）：</p> 
<pre><code class="language-cpp">&lt;launch&gt;
  &lt;!-- Arguments --&gt;
  &lt;arg name="model" default="$(env TURTLEBOT3_MODEL)" doc="model type [burger, waffle, waffle_pi]"/&gt;
  &lt;arg name="cmd_vel_topic" default="/cmd_vel" /&gt;
  &lt;arg name="odom_topic" default="odom" /&gt;
  &lt;arg name="move_forward_only" default="false"/&gt;

  &lt;!-- move_base --&gt;
  &lt;node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen"&gt;
    &lt;!--加载A star算法--&gt;
    &lt;param name="base_global_planner" value="global_planner/GlobalPlanner"/&gt;
    &lt;param name="planner_frequency" value="1.0" /&gt;
    &lt;param name="planner_patience" value="5.0" /&gt;
    &lt;!--加载DWA算法--&gt;
    &lt;param name="base_local_planner" value="dwa_local_planner/DWAPlannerROS" /&gt;
    &lt;!----&gt;
    &lt;rosparam file="$(find turtlebot3_navigation)/param/costmap_common_params_$(arg model).yaml" command="load" ns="global_costmap" /&gt;
    &lt;rosparam file="$(find turtlebot3_navigation)/param/costmap_common_params_$(arg model).yaml" command="load" ns="local_costmap" /&gt;
    &lt;rosparam file="$(find turtlebot3_navigation)/param/local_costmap_params.yaml" command="load" /&gt;
    &lt;rosparam file="$(find turtlebot3_navigation)/param/global_costmap_params.yaml" command="load" /&gt;
    &lt;rosparam file="$(find turtlebot3_navigation)/param/move_base_params.yaml" command="load" /&gt;
    &lt;rosparam file="$(find turtlebot3_navigation)/param/dwa_local_planner_params_$(arg model).yaml" command="load" /&gt;
    &lt;remap from="cmd_vel" to="$(arg cmd_vel_topic)"/&gt;
    &lt;remap from="odom" to="$(arg odom_topic)"/&gt;
    &lt;param name="DWAPlannerROS/min_vel_x" value="0.0" if="$(arg move_forward_only)" /&gt;
  &lt;/node&gt;
&lt;/launch&gt;</code></pre> 
<h3>2、修改planner_core.cpp文件</h3> 
<p> planner_core.cpp文件是navigation包中的文件，其具体目录如下（对应自己的路径）：</p> 
<p><img alt="" height="192" src="https://images2.imgbox.com/74/a5/cMCWYTc1_o.png" width="806"></p> 
<p> 修改如下内容：</p> 
<p><img alt="" height="568" src="https://images2.imgbox.com/97/4a/ck9D9cc8_o.png" width="797"></p> 
<pre><code class="language-cpp">private_nh.param("use_dijkstra", use_dijkstra, false);</code></pre> 
<p><span style="background-color:#a2e043;">此句true为使用dijkstra算法，false为使用A star算法。</span></p> 
<pre><code class="language-cpp">ROS_INFO("use_dijkstra");
ROS_INFO("use_A_star");</code></pre> 
<p><span style="background-color:#a2e043;">此句可以在运行路径规划时，查看自己使用的是dijkstra还是A star。</span></p> 
<p>注意：修改完代码之后，需要<span style="color:#a2e043;">删除build和devel文件，重新catkin_make编译</span>。</p> 
<h3>3、效果展示</h3> 
<p>默认算法：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4f/64/82CpfH2e_o.gif"></p> 
<p> dijkstra算法：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/33/d5/xVmLXMmI_o.gif"></p> 
<p>A star算法：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bc/ce/gFgv1C4k_o.gif"></p> 
<p> 验证算法：</p> 
<p><img alt="" height="380" src="https://images2.imgbox.com/c7/9a/lwZuvE2T_o.png" width="1200"></p> 
<h3>4、展望（未来需要注意问题）</h3> 
<p><strong>1、A*算法并不是最优路径（如上），也是会出现问题（如下），还是需要优化。</strong></p> 
<p><img alt="" height="138" src="https://images2.imgbox.com/ea/e6/mFyCo3So_o.png" width="1118"></p> 
<p> 出现上述原因是因为膨胀半径设置问题，需要自己设置，最简单方法是将膨胀半径设置为机器人外切圆。</p> 
<p><strong>2、使用的turtlebot3机器人在运行时会出现倒着走的现象。</strong></p> 
<p>解决：将base_local_planner_params.yaml中holonomic_robot参数改为false；</p> 
<p>holonomic_robot参数意义：代表是否是全向机器人。</p> 
<p><strong>3、未来添加新的路径规划算法也可以如此加入move_base中。</strong></p> 
<p>比如安装TEB包：<a href="https://blog.csdn.net/weixin_44190648/article/details/131200969" title="ROS-melodic：源码安裝teb_local_planner算法、替换DWA算法_ros teb源码编译_Charlesffff的博客-CSDN博客">ROS-melodic：源码安裝teb_local_planner算法、替换DWA算法_ros teb源码编译_Charlesffff的博客-CSDN博客</a></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/081db2d9ab5769f06c9d647c47c80248/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Gradio搭建Stable Diffusion模型生成图像：简单快捷的图像生成体验</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c595b28d377f82be396a91eddff2704/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">文心一言没有体验上，看看讯飞星火认知大模型</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>