<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€Rustã€‘â€”â€”ä½¿ç”¨çº¿ç¨‹åŒæ—¶è¿è¡Œä»£ç  - ç¼–ç¨‹å­¦ä¹ è€…</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/f3e01fd8c7aa837c20ef4ecef6a9f1b3/">
  <meta property="og:site_name" content="ç¼–ç¨‹å­¦ä¹ è€…">
  <meta property="og:title" content="ã€Rustã€‘â€”â€”ä½¿ç”¨çº¿ç¨‹åŒæ—¶è¿è¡Œä»£ç ">
  <meta property="og:description" content="ğŸ’»åšä¸»ç°æœ‰ä¸“æ ï¼š
C51å•ç‰‡æœºï¼ˆSTC89C516ï¼‰ï¼Œcè¯­è¨€ï¼Œc&#43;&#43;ï¼Œç¦»æ•£æ•°å­¦ï¼Œç®—æ³•è®¾è®¡ä¸åˆ†æï¼Œæ•°æ®ç»“æ„ï¼ŒPythonï¼ŒJavaåŸºç¡€ï¼ŒMySQLï¼Œlinuxï¼ŒåŸºäºHTML5çš„ç½‘é¡µè®¾è®¡åŠåº”ç”¨ï¼ŒRustï¼ˆå®˜æ–¹æ–‡æ¡£é‡ç‚¹æ€»ç»“ï¼‰ï¼ŒjQueryï¼Œå‰ç«¯vue.jsï¼ŒJavawebå¼€å‘ï¼ŒPythonæœºå™¨å­¦ä¹ ç­‰
ğŸ¥ä¸»é¡µé“¾æ¥ï¼š
Yå°å¤œ-CSDNåšå®¢
ç›®å½•
ğŸ¯ä½¿ç”¨soawnåˆ›å»ºæ–°çº¿ç¨‹
ğŸ¯ä½¿ç”¨joinç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ
ğŸ¯å°†moveé—­åŒ…ä¸çº¿ç¨‹ä¸€åŒä½¿ç”¨
åœ¨å¤§éƒ¨åˆ†ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œå·²æ‰§è¡Œç¨‹åºçš„ä»£ç åœ¨ä¸€ä¸ªÂ è¿›ç¨‹ï¼ˆprocessï¼‰ä¸­è¿è¡Œï¼Œæ“ä½œç³»ç»Ÿåˆ™ä¼šè´Ÿè´£ç®¡ç†å¤šä¸ªè¿›ç¨‹ã€‚åœ¨ç¨‹åºå†…éƒ¨ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰å¤šä¸ªåŒæ—¶è¿è¡Œçš„ç‹¬ç«‹éƒ¨åˆ†ã€‚è¿™äº›è¿è¡Œè¿™äº›ç‹¬ç«‹éƒ¨åˆ†çš„åŠŸèƒ½è¢«ç§°ä¸ºÂ çº¿ç¨‹ï¼ˆthreadsï¼‰ã€‚ä¾‹å¦‚ï¼Œweb æœåŠ¡å™¨å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ä»¥ä¾¿å¯ä»¥åŒæ—¶å“åº”å¤šä¸ªè¯·æ±‚ã€‚
å°†ç¨‹åºä¸­çš„è®¡ç®—æ‹†åˆ†è¿›å¤šä¸ªçº¿ç¨‹å¯ä»¥æ”¹å–„æ€§èƒ½ï¼Œå› ä¸ºç¨‹åºå¯ä»¥åŒæ—¶è¿›è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä¸è¿‡è¿™ä¹Ÿä¼šå¢åŠ å¤æ‚æ€§ã€‚å› ä¸ºçº¿ç¨‹æ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œæ‰€ä»¥æ— æ³•é¢„å…ˆä¿è¯ä¸åŒçº¿ç¨‹ä¸­çš„ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿™ä¼šå¯¼è‡´è¯¸å¦‚æ­¤ç±»çš„é—®é¢˜ï¼š
ç«æ€æ¡ä»¶ï¼ˆRace conditionsï¼‰ï¼Œå¤šä¸ªçº¿ç¨‹ä»¥ä¸ä¸€è‡´çš„é¡ºåºè®¿é—®æ•°æ®æˆ–èµ„æºæ­»é”ï¼ˆDeadlocksï¼‰ï¼Œä¸¤ä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…å¯¹æ–¹ï¼Œè¿™ä¼šé˜»æ­¢ä¸¤è€…ç»§ç»­è¿è¡Œåªä¼šå‘ç”Ÿåœ¨ç‰¹å®šæƒ…å†µä¸”éš¾ä»¥ç¨³å®šé‡ç°å’Œä¿®å¤çš„ bug Rust å°è¯•å‡è½»ä½¿ç”¨çº¿ç¨‹çš„è´Ÿé¢å½±å“ã€‚ä¸è¿‡åœ¨å¤šçº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­ç¼–ç¨‹ä»éœ€æ ¼å¤–å°å¿ƒï¼ŒåŒæ—¶å…¶æ‰€è¦æ±‚çš„ä»£ç ç»“æ„ä¹Ÿä¸åŒäºè¿è¡Œäºå•çº¿ç¨‹çš„ç¨‹åºã€‚
ç¼–ç¨‹è¯­è¨€æœ‰ä¸€äº›ä¸åŒçš„æ–¹æ³•æ¥å®ç°çº¿ç¨‹ï¼Œè€Œä¸”å¾ˆå¤šæ“ä½œç³»ç»Ÿæä¾›äº†åˆ›å»ºæ–°çº¿ç¨‹çš„ APIã€‚Rust æ ‡å‡†åº“ä½¿ç”¨Â 1:1Â çº¿ç¨‹å®ç°ï¼Œè¿™ä»£è¡¨ç¨‹åºçš„æ¯ä¸€ä¸ªè¯­è¨€çº§çº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ã€‚æœ‰ä¸€äº› crate å®ç°äº†å…¶ä»–æœ‰ç€ä¸åŒäº 1:1 æ¨¡å‹å–èˆçš„çº¿ç¨‹æ¨¡å‹ã€‚
ğŸ¯ä½¿ç”¨soawnåˆ›å»ºæ–°çº¿ç¨‹ ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œéœ€è¦è°ƒç”¨Â thread::spawnÂ å‡½æ•°å¹¶ä¼ é€’ä¸€ä¸ªé—­åŒ…ï¼Œå¹¶åœ¨å…¶ä¸­åŒ…å«å¸Œæœ›åœ¨æ–°çº¿ç¨‹è¿è¡Œçš„ä»£ç ã€‚ç¤ºä¾‹ 16-1 ä¸­çš„ä¾‹å­åœ¨ä¸»çº¿ç¨‹æ‰“å°äº†ä¸€äº›æ–‡æœ¬è€Œå¦ä¸€äº›æ–‡æœ¬åˆ™ç”±æ–°çº¿ç¨‹æ‰“å°ï¼š
use std::thread; use std::time::Duration; fn main() { thread::spawn(|| { for i in 1..10 { println!(&#34;hi number {} from the spawned thread!&#34;, i); thread::sleep(Duration::from_millis(1)); } }); for i in 1..5 { println!(&#34;hi number {} from the main thread!">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-21T13:14:45+08:00">
    <meta property="article:modified_time" content="2024-05-21T13:14:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å­¦ä¹ è€…" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å­¦ä¹ è€…</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€Rustã€‘â€”â€”ä½¿ç”¨çº¿ç¨‹åŒæ—¶è¿è¡Œä»£ç </h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>ğŸ’»åšä¸»ç°æœ‰ä¸“æ ï¼š</strong></p> 
 <p><strong>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â C51å•ç‰‡æœºï¼ˆSTC89C516ï¼‰ï¼Œcè¯­è¨€ï¼Œc++ï¼Œç¦»æ•£æ•°å­¦ï¼Œç®—æ³•è®¾è®¡ä¸åˆ†æï¼Œæ•°æ®ç»“æ„ï¼ŒPythonï¼ŒJavaåŸºç¡€ï¼ŒMySQLï¼Œlinuxï¼ŒåŸºäºHTML5çš„ç½‘é¡µè®¾è®¡åŠåº”ç”¨ï¼ŒRustï¼ˆå®˜æ–¹æ–‡æ¡£é‡ç‚¹æ€»ç»“ï¼‰ï¼ŒjQueryï¼Œå‰ç«¯vue.jsï¼ŒJavawebå¼€å‘ï¼ŒPythonæœºå™¨å­¦ä¹ ç­‰<br> ğŸ¥ä¸»é¡µé“¾æ¥ï¼š</strong></p> 
 <p><strong>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </strong><a href="https://blog.csdn.net/shsjssnn?spm=1000.2115.3001.5343" title="Yå°å¤œ-CSDNåšå®¢">Yå°å¤œ-CSDNåšå®¢</a></p> 
</blockquote> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="%F0%9F%8E%AF%E4%BD%BF%E7%94%A8soawn%E5%88%9B%E5%BB%BA%E6%96%B0%E7%BA%BF%E7%A8%8B-toc" style="margin-left:0px;"><a href="#%F0%9F%8E%AF%E4%BD%BF%E7%94%A8soawn%E5%88%9B%E5%BB%BA%E6%96%B0%E7%BA%BF%E7%A8%8B" rel="nofollow">ğŸ¯ä½¿ç”¨soawnåˆ›å»ºæ–°çº¿ç¨‹</a></p> 
<p id="%F0%9F%8E%AF%E4%BD%BF%E7%94%A8join%E7%AD%89%E5%BE%85%E6%89%80%E6%9C%89%E7%BA%BF%E7%A8%8B%E7%BB%93%E6%9D%9F-toc" style="margin-left:0px;"><a href="#%F0%9F%8E%AF%E4%BD%BF%E7%94%A8join%E7%AD%89%E5%BE%85%E6%89%80%E6%9C%89%E7%BA%BF%E7%A8%8B%E7%BB%93%E6%9D%9F" rel="nofollow">ğŸ¯ä½¿ç”¨joinç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ</a></p> 
<p id="%F0%9F%8E%AF%E5%B0%86move%E9%97%AD%E5%8C%85%E4%B8%8E%E7%BA%BF%E7%A8%8B%E4%B8%80%E5%90%8C%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#%F0%9F%8E%AF%E5%B0%86move%E9%97%AD%E5%8C%85%E4%B8%8E%E7%BA%BF%E7%A8%8B%E4%B8%80%E5%90%8C%E4%BD%BF%E7%94%A8" rel="nofollow">ğŸ¯å°†moveé—­åŒ…ä¸çº¿ç¨‹ä¸€åŒä½¿ç”¨</a></p> 
<hr id="hr-toc"> 
<p></p> 
<blockquote> 
 <p>Â Â Â Â Â Â Â Â åœ¨å¤§éƒ¨åˆ†ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œå·²æ‰§è¡Œç¨‹åºçš„ä»£ç åœ¨ä¸€ä¸ªÂ <strong>è¿›ç¨‹</strong>ï¼ˆ<em>process</em>ï¼‰ä¸­è¿è¡Œï¼Œæ“ä½œç³»ç»Ÿåˆ™ä¼šè´Ÿè´£ç®¡ç†å¤šä¸ªè¿›ç¨‹ã€‚åœ¨ç¨‹åºå†…éƒ¨ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰å¤šä¸ªåŒæ—¶è¿è¡Œçš„ç‹¬ç«‹éƒ¨åˆ†ã€‚è¿™äº›è¿è¡Œè¿™äº›ç‹¬ç«‹éƒ¨åˆ†çš„åŠŸèƒ½è¢«ç§°ä¸ºÂ <strong>çº¿ç¨‹</strong>ï¼ˆ<em>threads</em>ï¼‰ã€‚ä¾‹å¦‚ï¼Œweb æœåŠ¡å™¨å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ä»¥ä¾¿å¯ä»¥åŒæ—¶å“åº”å¤šä¸ªè¯·æ±‚ã€‚</p> 
 <p>Â Â Â Â Â Â Â Â å°†ç¨‹åºä¸­çš„è®¡ç®—æ‹†åˆ†è¿›å¤šä¸ªçº¿ç¨‹å¯ä»¥æ”¹å–„æ€§èƒ½ï¼Œå› ä¸ºç¨‹åºå¯ä»¥åŒæ—¶è¿›è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä¸è¿‡è¿™ä¹Ÿä¼šå¢åŠ å¤æ‚æ€§ã€‚å› ä¸ºçº¿ç¨‹æ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œæ‰€ä»¥æ— æ³•é¢„å…ˆä¿è¯ä¸åŒçº¿ç¨‹ä¸­çš„ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿™ä¼šå¯¼è‡´è¯¸å¦‚æ­¤ç±»çš„é—®é¢˜ï¼š</p> 
 <ul><li>ç«æ€æ¡ä»¶ï¼ˆRace conditionsï¼‰ï¼Œå¤šä¸ªçº¿ç¨‹ä»¥ä¸ä¸€è‡´çš„é¡ºåºè®¿é—®æ•°æ®æˆ–èµ„æº</li><li>æ­»é”ï¼ˆDeadlocksï¼‰ï¼Œä¸¤ä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…å¯¹æ–¹ï¼Œè¿™ä¼šé˜»æ­¢ä¸¤è€…ç»§ç»­è¿è¡Œ</li><li>åªä¼šå‘ç”Ÿåœ¨ç‰¹å®šæƒ…å†µä¸”éš¾ä»¥ç¨³å®šé‡ç°å’Œä¿®å¤çš„ bug</li></ul> 
 <p>Â Â Â Â Â Â Â Â Rust å°è¯•å‡è½»ä½¿ç”¨çº¿ç¨‹çš„è´Ÿé¢å½±å“ã€‚ä¸è¿‡åœ¨å¤šçº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­ç¼–ç¨‹ä»éœ€æ ¼å¤–å°å¿ƒï¼ŒåŒæ—¶å…¶æ‰€è¦æ±‚çš„ä»£ç ç»“æ„ä¹Ÿä¸åŒäºè¿è¡Œäºå•çº¿ç¨‹çš„ç¨‹åºã€‚</p> 
 <p>Â Â Â Â Â Â Â Â ç¼–ç¨‹è¯­è¨€æœ‰ä¸€äº›ä¸åŒçš„æ–¹æ³•æ¥å®ç°çº¿ç¨‹ï¼Œè€Œä¸”å¾ˆå¤šæ“ä½œç³»ç»Ÿæä¾›äº†åˆ›å»ºæ–°çº¿ç¨‹çš„ APIã€‚Rust æ ‡å‡†åº“ä½¿ç”¨Â <em>1:1</em>Â çº¿ç¨‹å®ç°ï¼Œè¿™ä»£è¡¨ç¨‹åºçš„æ¯ä¸€ä¸ªè¯­è¨€çº§çº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ã€‚æœ‰ä¸€äº› crate å®ç°äº†å…¶ä»–æœ‰ç€ä¸åŒäº 1:1 æ¨¡å‹å–èˆçš„çº¿ç¨‹æ¨¡å‹ã€‚</p> 
</blockquote> 
<h2 id="%F0%9F%8E%AF%E4%BD%BF%E7%94%A8soawn%E5%88%9B%E5%BB%BA%E6%96%B0%E7%BA%BF%E7%A8%8B">ğŸ¯ä½¿ç”¨soawnåˆ›å»ºæ–°çº¿ç¨‹</h2> 
<blockquote> 
 <p>Â Â Â Â Â Â Â Â ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œéœ€è¦è°ƒç”¨Â <code>thread::spawn</code>Â å‡½æ•°å¹¶ä¼ é€’ä¸€ä¸ªé—­åŒ…ï¼Œå¹¶åœ¨å…¶ä¸­åŒ…å«å¸Œæœ›åœ¨æ–°çº¿ç¨‹è¿è¡Œçš„ä»£ç ã€‚ç¤ºä¾‹ 16-1 ä¸­çš„ä¾‹å­åœ¨ä¸»çº¿ç¨‹æ‰“å°äº†ä¸€äº›æ–‡æœ¬è€Œå¦ä¸€äº›æ–‡æœ¬åˆ™ç”±æ–°çº¿ç¨‹æ‰“å°ï¼š</p> 
 <pre><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {} from the spawned thread!", i);
            thread::sleep(Duration::from_millis(1));
        }
    });

    for i in 1..5 {
        println!("hi number {} from the main thread!", i);
        thread::sleep(Duration::from_millis(1));
    }
}</code></pre> 
 <p>Â Â Â Â Â Â Â Â æ³¨æ„å½“ Rust ç¨‹åºçš„ä¸»çº¿ç¨‹ç»“æŸæ—¶ï¼Œæ–°çº¿ç¨‹ä¹Ÿä¼šç»“æŸï¼Œè€Œä¸ç®¡å…¶æ˜¯å¦æ‰§è¡Œå®Œæ¯•ã€‚è¿™ä¸ªç¨‹åºçš„è¾“å‡ºå¯èƒ½æ¯æ¬¡éƒ½ç•¥æœ‰ä¸åŒï¼Œä¸è¿‡å®ƒå¤§ä½“ä¸Šçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p> 
 <pre><code class="language-rust">hi number 1 from the main thread!
hi number 1 from the spawned thread!
hi number 2 from the main thread!
hi number 2 from the spawned thread!
hi number 3 from the main thread!
hi number 3 from the spawned thread!
hi number 4 from the main thread!
hi number 4 from the spawned thread!
hi number 5 from the spawned thread!
</code></pre> 
 <p><code>Â Â thread::sleep</code>Â è°ƒç”¨å¼ºåˆ¶çº¿ç¨‹åœæ­¢æ‰§è¡Œä¸€å°æ®µæ—¶é—´ï¼Œè¿™ä¼šå…è®¸å…¶ä»–ä¸åŒçš„çº¿ç¨‹è¿è¡Œã€‚è¿™äº›çº¿ç¨‹å¯èƒ½ä¼šè½®æµè¿è¡Œï¼Œä¸è¿‡å¹¶ä¸ä¿è¯å¦‚æ­¤ï¼šè¿™ä¾èµ–æ“ä½œç³»ç»Ÿå¦‚ä½•è°ƒåº¦çº¿ç¨‹ã€‚åœ¨è¿™é‡Œï¼Œä¸»çº¿ç¨‹é¦–å…ˆæ‰“å°ï¼Œå³ä¾¿æ–°åˆ›å»ºçº¿ç¨‹çš„æ‰“å°è¯­å¥ä½äºç¨‹åºçš„å¼€å¤´ï¼Œç”šè‡³å³ä¾¿æˆ‘ä»¬å‘Šè¯‰æ–°å»ºçš„çº¿ç¨‹æ‰“å°ç›´åˆ°Â <code>i</code>Â ç­‰äº 9ï¼Œå®ƒåœ¨ä¸»çº¿ç¨‹ç»“æŸä¹‹å‰ä¹Ÿåªæ‰“å°åˆ°äº† 5ã€‚</p> 
</blockquote> 
<h2 id="%F0%9F%8E%AF%E4%BD%BF%E7%94%A8join%E7%AD%89%E5%BE%85%E6%89%80%E6%9C%89%E7%BA%BF%E7%A8%8B%E7%BB%93%E6%9D%9F">ğŸ¯ä½¿ç”¨joinç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ</h2> 
<blockquote> 
 <p>Â Â Â Â Â Â Â Â å¯ä»¥é€šè¿‡å°†Â <code>thread::spawn</code>Â çš„è¿”å›å€¼å‚¨å­˜åœ¨å˜é‡ä¸­æ¥ä¿®å¤æ–°å»ºçº¿ç¨‹éƒ¨åˆ†æ²¡æœ‰æ‰§è¡Œæˆ–è€…å®Œå…¨æ²¡æœ‰æ‰§è¡Œçš„é—®é¢˜ã€‚<code>thread::spawn</code>Â çš„è¿”å›å€¼ç±»å‹æ˜¯Â <code>JoinHandle</code>ã€‚<code>JoinHandle</code>Â æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ‰€æœ‰æƒçš„å€¼ï¼Œå½“å¯¹å…¶è°ƒç”¨Â <code>join</code>Â æ–¹æ³•æ—¶ï¼Œå®ƒä¼šç­‰å¾…å…¶çº¿ç¨‹ç»“æŸã€‚</p> 
 <pre><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    let handle = thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {} from the spawned thread!", i);
            thread::sleep(Duration::from_millis(1));
        }
    });

    for i in 1..5 {
        println!("hi number {} from the main thread!", i);
        thread::sleep(Duration::from_millis(1));
    }

    handle.join().unwrap();
}</code></pre> 
 <p>Â Â Â Â Â Â Â Â é€šè¿‡è°ƒç”¨ handle çš„Â <code>join</code>Â ä¼šé˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ° handle æ‰€ä»£è¡¨çš„çº¿ç¨‹ç»“æŸã€‚<strong>é˜»å¡</strong>ï¼ˆ<em>Blocking</em>ï¼‰çº¿ç¨‹æ„å‘³ç€é˜»æ­¢è¯¥çº¿ç¨‹æ‰§è¡Œå·¥ä½œæˆ–é€€å‡ºã€‚å› ä¸ºæˆ‘ä»¬å°†Â <code>join</code>Â è°ƒç”¨æ”¾åœ¨äº†ä¸»çº¿ç¨‹çš„Â <code>for</code>Â å¾ªç¯ä¹‹åï¼Œè¿è¡Œç¤ºä¾‹ 16-2 åº”è¯¥ä¼šäº§ç”Ÿç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p> 
 <pre><code class="language-rust">hi number 1 from the main thread!
hi number 2 from the main thread!
hi number 1 from the spawned thread!
hi number 3 from the main thread!
hi number 2 from the spawned thread!
hi number 4 from the main thread!
hi number 3 from the spawned thread!
hi number 4 from the spawned thread!
hi number 5 from the spawned thread!
hi number 6 from the spawned thread!
hi number 7 from the spawned thread!
hi number 8 from the spawned thread!
hi number 9 from the spawned thread!
</code></pre> 
 <p>Â Â Â Â Â Â Â Â è¿™ä¸¤ä¸ªçº¿ç¨‹ä»ç„¶ä¼šäº¤æ›¿æ‰§è¡Œï¼Œä¸è¿‡ä¸»çº¿ç¨‹ä¼šç”±äºÂ <code>handle.join()</code>Â è°ƒç”¨ä¼šç­‰å¾…ç›´åˆ°æ–°å»ºçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚</p> 
 <pre><code class="language-rust">use std::thread;
use std::time::Duration;

fn main() {
    let handle = thread::spawn(|| {
        for i in 1..10 {
            println!("hi number {} from the spawned thread!", i);
            thread::sleep(Duration::from_millis(1));
        }
    });

    handle.join().unwrap();

    for i in 1..5 {
        println!("hi number {} from the main thread!", i);
        thread::sleep(Duration::from_millis(1));
    }
}</code></pre> 
 <pre><code class="language-rust">hi number 1 from the spawned thread!
hi number 2 from the spawned thread!
hi number 3 from the spawned thread!
hi number 4 from the spawned thread!
hi number 5 from the spawned thread!
hi number 6 from the spawned thread!
hi number 7 from the spawned thread!
hi number 8 from the spawned thread!
hi number 9 from the spawned thread!
hi number 1 from the main thread!
hi number 2 from the main thread!
hi number 3 from the main thread!
hi number 4 from the main thread!
</code></pre> 
</blockquote> 
<h2 id="%F0%9F%8E%AF%E5%B0%86move%E9%97%AD%E5%8C%85%E4%B8%8E%E7%BA%BF%E7%A8%8B%E4%B8%80%E5%90%8C%E4%BD%BF%E7%94%A8">ğŸ¯å°†moveé—­åŒ…ä¸çº¿ç¨‹ä¸€åŒä½¿ç”¨</h2> 
<blockquote> 
 <p><code>Â move</code>Â å…³é”®å­—ç»å¸¸ç”¨äºä¼ é€’ç»™Â <code>thread::spawn</code>Â çš„é—­åŒ…ï¼Œå› ä¸ºé—­åŒ…ä¼šè·å–ä»ç¯å¢ƒä¸­å–å¾—çš„å€¼çš„æ‰€æœ‰æƒï¼Œå› æ­¤ä¼šå°†è¿™äº›å€¼çš„æ‰€æœ‰æƒä»ä¸€ä¸ªçº¿ç¨‹ä¼ é€åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚</p> 
 <p>Â Â Â Â Â Â Â Â ä¼ é€’ç»™Â <code>thread::spawn</code>Â çš„é—­åŒ…å¹¶æ²¡æœ‰ä»»ä½•å‚æ•°ï¼šå¹¶æ²¡æœ‰åœ¨æ–°å»ºçº¿ç¨‹ä»£ç ä¸­ä½¿ç”¨ä»»ä½•ä¸»çº¿ç¨‹çš„æ•°æ®ã€‚ä¸ºäº†åœ¨æ–°å»ºçº¿ç¨‹ä¸­ä½¿ç”¨æ¥è‡ªäºä¸»çº¿ç¨‹çš„æ•°æ®ï¼Œéœ€è¦æ–°å»ºçº¿ç¨‹çš„é—­åŒ…è·å–å®ƒéœ€è¦çš„å€¼ã€‚</p> 
 <pre><code class="language-rust">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(|| {
        println!("Here's a vector: {:?}", v);
    });

    handle.join().unwrap();
}</code></pre> 
 <p>Â Â Â Â Â Â Â Â é—­åŒ…ä½¿ç”¨äº†Â <code>v</code>ï¼Œæ‰€ä»¥é—­åŒ…ä¼šæ•è·Â <code>v</code>Â å¹¶ä½¿å…¶æˆä¸ºé—­åŒ…ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ã€‚å› ä¸ºÂ <code>thread::spawn</code>Â åœ¨ä¸€ä¸ªæ–°çº¿ç¨‹ä¸­è¿è¡Œè¿™ä¸ªé—­åŒ…ï¼Œæ‰€ä»¥å¯ä»¥åœ¨æ–°çº¿ç¨‹ä¸­è®¿é—®Â <code>v</code>ã€‚ç„¶è€Œå½“ç¼–è¯‘è¿™ä¸ªä¾‹å­æ—¶ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p> 
 <pre><code class="language-rust">$ cargo run
   Compiling threads v0.1.0 (file:///projects/threads)
error[E0373]: closure may outlive the current function, but it borrows `v`, which is owned by the current function
 --&gt; src/main.rs:6:32
  |
6 |     let handle = thread::spawn(|| {
  |                                ^^ may outlive borrowed value `v`
7 |         println!("Here's a vector: {:?}", v);
  |                                           - `v` is borrowed here
  |
note: function requires argument type to outlive `'static`
 --&gt; src/main.rs:6:18
  |
6 |       let handle = thread::spawn(|| {
  |  __________________^
7 | |         println!("Here's a vector: {:?}", v);
8 | |     });
  | |______^
help: to force the closure to take ownership of `v` (and any other referenced variables), use the `move` keyword
  |
6 |     let handle = thread::spawn(move || {
  |                                ++++

For more information about this error, try `rustc --explain E0373`.
error: could not compile `threads` due to previous error
</code></pre> 
 <p>Â Â Â Â Â Â Â Â Rust ä¼šÂ <strong>æ¨æ–­</strong>Â å¦‚ä½•æ•è·Â <code>v</code>ï¼Œå› ä¸ºÂ <code>println!</code>Â åªéœ€è¦Â <code>v</code>Â çš„å¼•ç”¨ï¼Œé—­åŒ…å°è¯•å€Ÿç”¨Â <code>v</code>ã€‚ç„¶è€Œè¿™æœ‰ä¸€ä¸ªé—®é¢˜ï¼šRust ä¸çŸ¥é“è¿™ä¸ªæ–°å»ºçº¿ç¨‹ä¼šæ‰§è¡Œå¤šä¹…ï¼Œæ‰€ä»¥æ— æ³•çŸ¥æ™“å¯¹Â <code>v</code>Â çš„å¼•ç”¨æ˜¯å¦ä¸€ç›´æœ‰æ•ˆã€‚</p> 
 <pre><code class="language-rust">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(|| {
        println!("Here's a vector: {:?}", v);
    });

    drop(v); // oh no!

    handle.join().unwrap();
}</code></pre> 
 <p>Â Â Â Â Â Â Â Â å¦‚æœ Rust å…è®¸è¿™æ®µä»£ç è¿è¡Œï¼Œåˆ™æ–°å»ºçº¿ç¨‹åˆ™å¯èƒ½ä¼šç«‹åˆ»è¢«è½¬ç§»åˆ°åå°å¹¶å®Œå…¨æ²¡æœ‰æœºä¼šè¿è¡Œã€‚æ–°å»ºçº¿ç¨‹å†…éƒ¨æœ‰ä¸€ä¸ªÂ <code>v</code>Â çš„å¼•ç”¨ï¼Œä¸è¿‡ä¸»çº¿ç¨‹ç«‹åˆ»å°±ä½¿ç”¨ç¬¬åäº”ç« è®¨è®ºçš„Â <code>drop</code>Â ä¸¢å¼ƒäº†Â <code>v</code>ã€‚æ¥ç€å½“æ–°å»ºçº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼Œ<code>v</code>Â å·²ä¸å†æœ‰æ•ˆï¼Œæ‰€ä»¥å…¶å¼•ç”¨ä¹Ÿæ˜¯æ— æ•ˆçš„ã€‚å™¢ï¼Œè¿™å¤ªç³Ÿäº†ï¼</p> 
 <p>Â Â Â Â Â Â Â Â é€šè¿‡åœ¨é—­åŒ…ä¹‹å‰å¢åŠ Â <code>move</code>Â å…³é”®å­—ï¼Œæˆ‘ä»¬å¼ºåˆ¶é—­åŒ…è·å–å…¶ä½¿ç”¨çš„å€¼çš„æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯ä»»ç”± Rust æ¨æ–­å®ƒåº”è¯¥å€Ÿç”¨å€¼ã€‚ç¤ºä¾‹ 16-5 ä¸­å±•ç¤ºçš„å¯¹ç¤ºä¾‹ 16-3 ä»£ç çš„ä¿®æ”¹ï¼Œå¯ä»¥æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸç¼–è¯‘å¹¶è¿è¡Œï¼š</p> 
 <pre><code class="language-rust">use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(move || {
        println!("Here's a vector: {:?}", v);
    });

    handle.join().unwrap();
}</code></pre> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9b7f8fd0dd55227fa58f88ba6804cb8f/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼• ---- äºŒåˆ†æŸ¥æ‰¾</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0fa6ff9fc5ac9b156499520a553b4375/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">å­—èŠ‚æºæ¸¯å¤§å—å¤§å‡çº§ LLaVA-NeXTï¼šå€Ÿ LLaMA-3 å’Œ Qwen-1.5 è„±èƒæ¢éª¨ï¼Œè½»æ¾è¿½å¹³ GPT-4V</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å­¦ä¹ è€….
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>