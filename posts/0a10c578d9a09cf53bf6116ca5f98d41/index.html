<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>怎么调用文心一言的api接口生成一个简单的聊天机器人（python代码） - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/0a10c578d9a09cf53bf6116ca5f98d41/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="怎么调用文心一言的api接口生成一个简单的聊天机器人（python代码）">
  <meta property="og:description" content="寒假在学习大模型，但也没弄出多少眉目，电脑性能还有点小问题，大模型总跑不起来，只会简单调用一下现有的大模型的接口，例如：文心一言，下面展示一下代码：
import tkinter as tk import requests import json #此处需填入自己的API_KEY以及SECRET_KEY API_KEY = &#34;*****&#34; SECRET_KEY = &#34;*******&#34; class ChatBot: def __init__(self, master): self.master = master master.title(&#34;Chat Bot&#34;) # 创建控件 self.message_input = tk.Entry(master, width=50) self.send_button = tk.Button(master, text=&#34;Send&#34;, command=self.send_message) self.chat_box = tk.Text(master, width=60, height=20) # 布局控件 self.message_input.pack(side=tk.LEFT, padx=10) self.send_button.pack(side=tk.LEFT) self.chat_box.pack(side=tk.BOTTOM, pady=20) def send_message(self): message = self.message_input.get() self.message_input.delete(0, tk.END) self.chat_box.insert(tk.END, &#34;You: &#34; &#43; message &#43; &#34;\n&#34;) response = self.get_response(message) self.chat_box.insert(tk.END, &#34;Bot: &#34; &#43; response &#43; &#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-29T22:04:00+08:00">
    <meta property="article:modified_time" content="2024-02-29T22:04:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">怎么调用文心一言的api接口生成一个简单的聊天机器人（python代码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>寒假在学习大模型，但也没弄出多少眉目，电脑性能还有点小问题，大模型总跑不起来，只会简单调用一下现有的大模型的接口，例如：文心一言，下面展示一下代码：</p> 
<pre><code class="hljs">import tkinter as tk
import requests
import json

#此处需填入自己的API_KEY以及SECRET_KEY
API_KEY = "*****"
SECRET_KEY = "*******"


class ChatBot:
    def __init__(self, master):
        self.master = master
        master.title("Chat Bot")

        # 创建控件
        self.message_input = tk.Entry(master, width=50)
        self.send_button = tk.Button(master, text="Send", command=self.send_message)
        self.chat_box = tk.Text(master, width=60, height=20)

        # 布局控件
        self.message_input.pack(side=tk.LEFT, padx=10)
        self.send_button.pack(side=tk.LEFT)
        self.chat_box.pack(side=tk.BOTTOM, pady=20)

    def send_message(self):
        message = self.message_input.get()
        self.message_input.delete(0, tk.END)
        self.chat_box.insert(tk.END, "You: " + message + "\n")
        response = self.get_response(message)
        self.chat_box.insert(tk.END, "Bot: " + response + "\n")

    def get_response(self, message):
        url = "https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions?access_token=" + self.get_access_token()
        payload = json.dumps({
            "messages": [
                {
                    "role": "user",
                    "content": message
                }
            ]
        })
        headers = {
            'Content-Type': 'application/json'
        }

        response = requests.request("POST", url, headers=headers, data=payload)
        return response.json()["result"]

    def get_access_token(self):
        url = "https://aip.baidubce.com/oauth/2.0/token"
        params = {"grant_type": "client_credentials", "client_id": API_KEY, "client_secret": SECRET_KEY}
        return str(requests.post(url, params=params).json().get("access_token"))


root = tk.Tk()
chat_bot = ChatBot(root)
root.mainloop()


</code></pre> 
<p>至于如何获取这其中的两个key，网上有太多文章了，大家可以去找找看，比如这篇文章：<a href="https://zhuanlan.zhihu.com/p/641298242" rel="nofollow" title="百度文心一言API申请和python/Go使用教程 - 知乎 (zhihu.com)">百度文心一言API申请和python/Go使用教程 - 知乎 (zhihu.com)</a></p> 
<p>不过内容我没细看，如果不满足要求的话可以再找找。之前我看过的那篇很有用的文章本来想推荐给大家，刚刚发现不存在了。因为网上相关太多了，我就不写了，当然，如果大家想看，我也可以出。</p> 
<p>结果如下所示：</p> 
<p><img alt="" height="334" src="https://images2.imgbox.com/67/a0/w6stmb19_o.png" width="849"></p> 
<p>之前录的视频没保存，找不着了，人又比较懒，下面是我之前发在b站的视频，大家可以看看，当然，愿意关注的话，也可以关注下，虽然我b站发布的内容好像和技术没啥关系哈：</p> 
<p><a href="https://www.bilibili.com/video/BV1kZ4y1J789/?vd_source=38eca862e82b813542521111b579c044" rel="nofollow" title="python调用文心一言大模型接口生成一个简陋版聊天机器人_哔哩哔哩_bilibili">python调用文心一言大模型接口生成一个简陋版聊天机器人_哔哩哔哩_bilibili</a></p> 
<p>这次就这样啦，与大家共勉。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b59157f99cd69ca2c0cd474a04a7d6c7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">图数据库Neo4j——Neo4j简介、数据结构 &amp; Docker版本的部署安装 &amp; Cypher语句的入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e5cbfc5332b869119a4122da77d7b1b7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【提效指南】怎样利用AIGC提高自己的工作效率</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>