<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>大数据Hadoop之——部署hadoop&#43;hive&#43;Mysql环境（window11） - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/0e8cb32fe4a59c5bf35d6259ebb9864e/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="大数据Hadoop之——部署hadoop&#43;hive&#43;Mysql环境（window11）">
  <meta property="og:description" content="目录
一、安装JDK8
1）JDK下载地址
2）设置环境变量
二、Hadoop安装（window10环境）
1）下载Hadoop3.1.3
2）Hadoop配置环境变量
3）在hadoop解压目录下创建相关目录
4）修改Hadoop配置文件
1、core-site.xml文件：添加以下配置
2、hdfs-site.xml文件：添加以下配置，路径改成自己的安装路径
3、mapred-site.xml文件：添加以下配置
4、yarn-site.xml文件：添加以下配置
5）替换文件
1、替换bin目录下文件（winutils）
2、按照路径找到图中该文件
6）格式化节点
7）运行
8）验证
三、安装mysql8.x
1、下载mysql
2、配置mysql环境变量
3、初始化mysql
4、安装mysql服务
5、通过命令启动服务
6、通过mysql客户端登录验证并修改root密码
8、重置mysql root密码（命令行都要以管理员运行 ）
四、Hive安装（window10环境）
1）下载Hive
2）Hive配置环境变量
3）新建本地目录（后面配置文件会用到）
4）在hadoop上创建hdfs目录（后面配置文件会用到）
5）修改Hive 配置文件
1、hive-site.xml 文件：配置文件内容如下
2、hive-env.sh 文件：配置文件内容如下
6）替换hvie中的bin目录
7）下载mysql-connector-java-*.jar
8）创建Hive 初始化依赖的数据库hive,注意编码格式：latin1
9）Hive 初始化数据
10）启动Hive 服务
1、首先启动Hadoop
2、再启动Hive 服务
3、验证
11）配置beeline
1、添加beeline配置
2、启动hiveserver2
正常登录，一切OK。
一、安装JDK8 【温馨提示】对应后面安装的hadoop和hive版本，这里使用jdk8，这里不要用其他jdk了，可能会出现一些其他问题。
1）JDK下载地址 Java Downloads | Oracle
按正常下载是需要先登录的，这里提供一个不用登录下载的方法
复制的连接如下：https://www.oracle.com/webapps/redirect/signon?nexturl=https://download.oracle.com/otn/java/jdk/8u321-b07/df5ad55fdd604472a86a45a217032c7d/jdk-8u321-windows-x64.exe
获取下载地址：使用复制的连接后半部分，将otn换成otn-pub就可以直接下载了
https://download.oracle.com/otn-pub/java/jdk/8u321-b07/df5ad55fdd604472a86a45a217032c7d/jdk-8u321-windows-x64.exe
下载完后就是傻瓜式安装了
2）设置环境变量 3）验证">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-19T13:25:05+08:00">
    <meta property="article:modified_time" content="2023-12-19T13:25:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">大数据Hadoop之——部署hadoop&#43;hive&#43;Mysql环境（window11）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85JDK8-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85JDK8" rel="nofollow">一、安装JDK8</a></p> 
<p id="1%EF%BC%89JDK%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80-toc" style="margin-left:80px;"><a href="#1%EF%BC%89JDK%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" rel="nofollow">1）JDK下载地址</a></p> 
<p id="2%EF%BC%89%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:80px;"><a href="#2%EF%BC%89%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">2）设置环境变量</a></p> 
<p id="%E4%BA%8C%E3%80%81Hadoop%E5%AE%89%E8%A3%85%EF%BC%88window10%E7%8E%AF%E5%A2%83%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81Hadoop%E5%AE%89%E8%A3%85%EF%BC%88window10%E7%8E%AF%E5%A2%83%EF%BC%89" rel="nofollow">二、Hadoop安装（window10环境）</a></p> 
<p id="1%EF%BC%89%E4%B8%8B%E8%BD%BDHadoop3.1.3-toc" style="margin-left:80px;"><a href="#1%EF%BC%89%E4%B8%8B%E8%BD%BDHadoop3.1.3" rel="nofollow">1）下载Hadoop3.1.3</a></p> 
<p id="2%EF%BC%89Hadoop%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:80px;"><a href="#2%EF%BC%89Hadoop%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">2）Hadoop配置环境变量</a></p> 
<p id="3%EF%BC%89%E5%9C%A8hadoop%E8%A7%A3%E5%8E%8B%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95-toc" style="margin-left:80px;"><a href="#3%EF%BC%89%E5%9C%A8hadoop%E8%A7%A3%E5%8E%8B%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95" rel="nofollow">3）在hadoop解压目录下创建相关目录</a></p> 
<p id="4%EF%BC%89%E4%BF%AE%E6%94%B9Hadoop%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#4%EF%BC%89%E4%BF%AE%E6%94%B9Hadoop%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">4）修改Hadoop配置文件</a></p> 
<p id="1%E3%80%81core-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE-toc" style="margin-left:120px;"><a href="#1%E3%80%81core-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE" rel="nofollow">1、core-site.xml文件：添加以下配置</a></p> 
<p id="2%E3%80%81hdfs-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%B7%AF%E5%BE%84%E6%94%B9%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84-toc" style="margin-left:120px;"><a href="#2%E3%80%81hdfs-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%B7%AF%E5%BE%84%E6%94%B9%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84" rel="nofollow">2、hdfs-site.xml文件：添加以下配置，路径改成自己的安装路径</a></p> 
<p id="3%E3%80%81mapred-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE-toc" style="margin-left:120px;"><a href="#3%E3%80%81mapred-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE" rel="nofollow">3、mapred-site.xml文件：添加以下配置</a></p> 
<p id="4%E3%80%81yarn-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE-toc" style="margin-left:120px;"><a href="#4%E3%80%81yarn-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE" rel="nofollow">4、yarn-site.xml文件：添加以下配置</a></p> 
<p id="5%EF%BC%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%8A%82%E7%82%B9-toc" style="margin-left:120px;"><a href="#5%EF%BC%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%8A%82%E7%82%B9" rel="nofollow">5）替换文件</a></p> 
<p id="1%E3%80%81%E6%9B%BF%E6%8D%A2bin%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%EF%BC%88winutils%EF%BC%89-toc" style="margin-left:160px;"><a href="#1%E3%80%81%E6%9B%BF%E6%8D%A2bin%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%EF%BC%88winutils%EF%BC%89" rel="nofollow">1、替换bin目录下文件（winutils）</a></p> 
<p id="2%E3%80%81%E6%8C%89%E7%85%A7%E8%B7%AF%E5%BE%84%E6%89%BE%E5%88%B0%E5%9B%BE%E4%B8%AD%E8%AF%A5%E6%96%87%E4%BB%B6-toc" style="margin-left:160px;"><a href="#2%E3%80%81%E6%8C%89%E7%85%A7%E8%B7%AF%E5%BE%84%E6%89%BE%E5%88%B0%E5%9B%BE%E4%B8%AD%E8%AF%A5%E6%96%87%E4%BB%B6" rel="nofollow">2、按照路径找到图中该文件</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%917%EF%BC%89%E8%BF%90%E8%A1%8C-toc" style="margin-left:120px;"><a href="#%C2%A06%EF%BC%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%8A%82%E7%82%B9" rel="nofollow"> 6）格式化节点</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:120px;"><a href="#7%EF%BC%89%E8%BF%90%E8%A1%8C" rel="nofollow">7）运行</a></p> 
<p id="8%EF%BC%89%E9%AA%8C%E8%AF%81-toc" style="margin-left:120px;"><a href="#8%EF%BC%89%E9%AA%8C%E8%AF%81" rel="nofollow">8）验证</a></p> 
<p id="%E5%AE%89%E8%A3%85mysql8.x-toc" style="margin-left:0px;"><a href="#%E5%AE%89%E8%A3%85mysql8.x" rel="nofollow">三、安装mysql8.x</a></p> 
<p id="1%E3%80%81%E4%B8%8B%E8%BD%BDmysql-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E4%B8%8B%E8%BD%BDmysql" rel="nofollow">1、下载mysql</a></p> 
<p id="2%E3%80%81%E9%85%8D%E7%BD%AEmysql%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E9%85%8D%E7%BD%AEmysql%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">2、配置mysql环境变量</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%913%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96mysql-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%913%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96mysql" rel="nofollow">3、初始化mysql</a></p> 
<p id="4%E3%80%81%E5%AE%89%E8%A3%85mysql%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E5%AE%89%E8%A3%85mysql%E6%9C%8D%E5%8A%A1" rel="nofollow">4、安装mysql服务</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:80px;"><a href="#5%E3%80%81%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1" rel="nofollow">5、通过命令启动服务</a></p> 
<p id="6%E3%80%81%E9%80%9A%E8%BF%87mysql%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%E5%B9%B6%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81-toc" style="margin-left:80px;"><a href="#6%E3%80%81%E9%80%9A%E8%BF%87mysql%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%E5%B9%B6%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81" rel="nofollow">6、通过mysql客户端登录验证并修改root密码</a></p> 
<p id="8%E3%80%81%E9%87%8D%E7%BD%AEmysql%20root%E5%AF%86%E7%A0%81%EF%BC%88%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%BD%E8%A6%81%E4%BB%A5%E7%AE%A1%E7%90%86%E5%91%98%E8%BF%90%E8%A1%8C%20%EF%BC%89-toc" style="margin-left:80px;"><a href="#8%E3%80%81%E9%87%8D%E7%BD%AEmysql%20root%E5%AF%86%E7%A0%81%EF%BC%88%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%BD%E8%A6%81%E4%BB%A5%E7%AE%A1%E7%90%86%E5%91%98%E8%BF%90%E8%A1%8C%20%EF%BC%89" rel="nofollow">8、重置mysql root密码（命令行都要以管理员运行 ）</a></p> 
<p id="-toc" style="margin-left:120px;"></p> 
<p id="%E4%B8%89%E3%80%81Hive%E5%AE%89%E8%A3%85%EF%BC%88window10%E7%8E%AF%E5%A2%83%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Hive%E5%AE%89%E8%A3%85%EF%BC%88window10%E7%8E%AF%E5%A2%83%EF%BC%89" rel="nofollow">四、Hive安装（window10环境）</a></p> 
<p id="1%EF%BC%89%E4%B8%8B%E8%BD%BDHive-toc" style="margin-left:80px;"><a href="#1%EF%BC%89%E4%B8%8B%E8%BD%BDHive" rel="nofollow">1）下载Hive</a></p> 
<p id="2%EF%BC%89Hive%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:80px;"><a href="#2%EF%BC%89Hive%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">2）Hive配置环境变量</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%913%EF%BC%89%E6%96%B0%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9B%AE%E5%BD%95%EF%BC%88%E5%90%8E%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%9A%E7%94%A8%E5%88%B0%EF%BC%89-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%913%EF%BC%89%E6%96%B0%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9B%AE%E5%BD%95%EF%BC%88%E5%90%8E%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%9A%E7%94%A8%E5%88%B0%EF%BC%89" rel="nofollow">3）新建本地目录（后面配置文件会用到）</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%914%EF%BC%89%E5%9C%A8hadoop%E4%B8%8A%E5%88%9B%E5%BB%BAhdfs%E7%9B%AE%E5%BD%95%EF%BC%88%E5%90%8E%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%9A%E7%94%A8%E5%88%B0%EF%BC%89-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%914%EF%BC%89%E5%9C%A8hadoop%E4%B8%8A%E5%88%9B%E5%BB%BAhdfs%E7%9B%AE%E5%BD%95%EF%BC%88%E5%90%8E%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%9A%E7%94%A8%E5%88%B0%EF%BC%89" rel="nofollow">4）在hadoop上创建hdfs目录（后面配置文件会用到）</a></p> 
<p id="-toc" style="margin-left:80px;"><a href="#5%EF%BC%89%E4%BF%AE%E6%94%B9Hive%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">5）修改Hive 配置文件</a></p> 
<p id="1%E3%80%81hive-site.xml%20%E6%96%87%E4%BB%B6%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B-toc" style="margin-left:120px;"><a href="#1%E3%80%81hive-site.xml%20%E6%96%87%E4%BB%B6%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B" rel="nofollow">1、hive-site.xml 文件：配置文件内容如下</a></p> 
<p id="2%E3%80%81hive-env.sh%20%E6%96%87%E4%BB%B6%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B-toc" style="margin-left:120px;"><a href="#2%E3%80%81hive-env.sh%20%E6%96%87%E4%BB%B6%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B" rel="nofollow">2、hive-env.sh 文件：配置文件内容如下</a></p> 
<p id="6%EF%BC%89%E6%9B%BF%E6%8D%A2hvie%E4%B8%AD%E7%9A%84bin%E7%9B%AE%E5%BD%95-toc" style="margin-left:80px;"><a href="#6%EF%BC%89%E6%9B%BF%E6%8D%A2hvie%E4%B8%AD%E7%9A%84bin%E7%9B%AE%E5%BD%95" rel="nofollow">6）替换hvie中的bin目录</a></p> 
<p id="7%EF%BC%89%E4%B8%8B%E8%BD%BDmysql-connector-java-*.jar-toc" style="margin-left:80px;"><a href="#7%EF%BC%89%E4%B8%8B%E8%BD%BDmysql-connector-java-*.jar" rel="nofollow">7）下载mysql-connector-java-*.jar</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%918%EF%BC%89%E5%88%9B%E5%BB%BAHive%20%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BE%9D%E8%B5%96%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93hive%2C%E6%B3%A8%E6%84%8F%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%9Alatin1-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%918%EF%BC%89%E5%88%9B%E5%BB%BAHive%20%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BE%9D%E8%B5%96%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93hive%2C%E6%B3%A8%E6%84%8F%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%9Alatin1" rel="nofollow">8）创建Hive 初始化依赖的数据库hive,注意编码格式：latin1</a></p> 
<p id="9%EF%BC%89Hive%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px;"><a href="#9%EF%BC%89Hive%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE" rel="nofollow">9）Hive 初始化数据</a></p> 
<p id="10%EF%BC%89%E5%90%AF%E5%8A%A8Hive%20%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#10%EF%BC%89%E5%90%AF%E5%8A%A8Hive%20%E6%9C%8D%E5%8A%A1" rel="nofollow">10）启动Hive 服务</a></p> 
<p id="1%E3%80%81%E9%A6%96%E5%85%88%E5%90%AF%E5%8A%A8Hadoop-toc" style="margin-left:120px;"><a href="#1%E3%80%81%E9%A6%96%E5%85%88%E5%90%AF%E5%8A%A8Hadoop" rel="nofollow">1、首先启动Hadoop</a></p> 
<p id="2%E3%80%81%E5%86%8D%E5%90%AF%E5%8A%A8Hive%20%E6%9C%8D%E5%8A%A1-toc" style="margin-left:120px;"><a href="#2%E3%80%81%E5%86%8D%E5%90%AF%E5%8A%A8Hive%20%E6%9C%8D%E5%8A%A1" rel="nofollow">2、再启动Hive 服务</a></p> 
<p id="3%E3%80%81%E9%AA%8C%E8%AF%81-toc" style="margin-left:120px;"><a href="#3%E3%80%81%E9%AA%8C%E8%AF%81" rel="nofollow">3、验证</a></p> 
<p id="11%EF%BC%89%E9%85%8D%E7%BD%AEbeeline-toc" style="margin-left:80px;"><a href="#11%EF%BC%89%E9%85%8D%E7%BD%AEbeeline" rel="nofollow">11）配置beeline</a></p> 
<p id="1%E3%80%81%E6%B7%BB%E5%8A%A0beeline%E9%85%8D%E7%BD%AE-toc" style="margin-left:120px;"><a href="#1%E3%80%81%E6%B7%BB%E5%8A%A0beeline%E9%85%8D%E7%BD%AE" rel="nofollow">1、添加beeline配置</a></p> 
<p id="2%E3%80%81%E5%90%AF%E5%8A%A8hiveserver2-toc" style="margin-left:120px;"><a href="#2%E3%80%81%E5%90%AF%E5%8A%A8hiveserver2" rel="nofollow">2、启动hiveserver2</a></p> 
<p id="%E6%AD%A3%E5%B8%B8%E7%99%BB%E5%BD%95%EF%BC%8C%E4%B8%80%E5%88%87OK%E3%80%82-toc" style="margin-left:80px;"><a href="#%E6%AD%A3%E5%B8%B8%E7%99%BB%E5%BD%95%EF%BC%8C%E4%B8%80%E5%88%87OK%E3%80%82" rel="nofollow">正常登录，一切OK。</a></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85JDK8">一、安装JDK8</h2> 
<blockquote></blockquote> 
<blockquote> 
 <p>【温馨提示】对应后面安装的hadoop和hive版本，这里使用jdk8，这里不要用其他jdk了，可能会出现一些其他问题。</p> 
</blockquote> 
<h4 id="1%EF%BC%89JDK%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" style="background-color:transparent;">1）JDK下载地址</h4> 
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" rel="nofollow" title="Java Downloads | Oracle">Java Downloads | Oracle</a></p> 
<p><img alt="" height="581" src="https://images2.imgbox.com/52/df/DuWgUp0f_o.png" width="1200"></p> 
<p>按正常下载是需要先登录的，这里提供一个不用登录下载的方法</p> 
<p><img alt="" height="589" src="https://images2.imgbox.com/91/c4/slIqq088_o.png" width="1200"></p> 
<blockquote> 
 <p>复制的连接如下：https://www.oracle.com/webapps/redirect/signon?nexturl=https://download.oracle.com/<strong><span style="color:#fe2c24;">otn</span></strong>/java/jdk/8u321-b07/df5ad55fdd604472a86a45a217032c7d/jdk-8u321-windows-x64.exe</p> 
</blockquote> 
<blockquote> 
 <p>获取下载地址：使用复制的连接后半部分，将<span style="color:#fe2c24;"><strong>otn</strong></span>换成<span style="color:#fe2c24;"><strong>otn-pub</strong></span>就可以直接下载了</p> 
 <p>https://download.oracle.com/<span style="color:#fe2c24;"><strong>otn-pub</strong></span>/java/jdk/8u321-b07/df5ad55fdd604472a86a45a217032c7d/jdk-8u321-windows-x64.exe</p> 
</blockquote> 
<p>下载完后就是傻瓜式安装了</p> 
<h4 id="2%EF%BC%89%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">2）设置环境变量</h4> 
<p><img alt="" height="824" src="https://images2.imgbox.com/23/5e/xdALS4QL_o.png" width="1200"><br> 3）验证</p> 
<pre><code class="language-bash">$ java -version</code></pre> 
<p><br><img alt="" height="452" src="https://images2.imgbox.com/e3/c3/0vgA7vWn_o.png" width="1200"></p> 
<h2 id="%E4%BA%8C%E3%80%81Hadoop%E5%AE%89%E8%A3%85%EF%BC%88window10%E7%8E%AF%E5%A2%83%EF%BC%89" style="background-color:transparent;">二、Hadoop安装（window10环境）</h2> 
<h4 id="1%EF%BC%89%E4%B8%8B%E8%BD%BDHadoop3.1.3" style="background-color:transparent;">1）下载Hadoop3.1.3</h4> 
<p>官网下载：<a href="https://hadoop.apache.org/release/3.1.3.html" rel="nofollow" title="https://hadoop.apache.org/release/3.1.3.html">https://hadoop.apache.org/release/3.1.3.html</a><br> 下载各种版本地址入口：<a href="https://hadoop.apache.org/release.html" rel="nofollow" title="Apache Hadoop">Apache Hadoop</a></p> 
<p><img alt="" height="551" src="https://images2.imgbox.com/bc/05/T8MBnPar_o.png" width="1200"></p> 
<blockquote> 
 <p>下载地址：https://archive.apache.org/dist/hadoop/common/hadoop-3.1.3/hadoop-3.1.3.tar.gz</p> 
 <p>下载后安装到哪里，解压到哪里（安装路径不要有空格和中文）</p> 
</blockquote> 
<h4 id="2%EF%BC%89Hadoop%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">2）Hadoop配置环境变量</h4> 
<p></p> 
<ul><li>HADOOP_HOME</li></ul> 
<p><img alt="" height="219" src="https://images2.imgbox.com/83/3f/tfsT5kum_o.png" width="838"></p> 
<p><img alt="" height="827" src="https://images2.imgbox.com/1f/a2/BTZyxzRn_o.png" width="1200"><br>  </p> 
<blockquote> 
 <p>注意：</p> 
 <p>如果 <strong>jdk</strong> 默认安装C:\Program Files\Java\，则需要修改 %HADOOP_HOME%/etc/hadoop/hadoop-env.cmd 文件，</p> 
 <p>例如</p> 
 <p>    将    set JAVA_HOME=C:\Program Files\Java\jdk1.8.0_191</p> 
 <p>    改为 set JAVA_HOME=C:\PROGRA~1\Java\jdk1.8.0_191</p> 
 <p></p> 
 <p>或者直接改环境变量JAVA_HOME= 从C:\Program Files\Java\ 改成C:\PROGRA~1\Java\</p> 
</blockquote> 
<p>验证</p> 
<pre><code class="language-bash">$ hadoop --version</code></pre> 
<p><br><img alt="" height="275" src="https://images2.imgbox.com/61/af/VYkJZ7tU_o.png" width="1200"></p> 
<h4 id="3%EF%BC%89%E5%9C%A8hadoop%E8%A7%A3%E5%8E%8B%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95">3）在hadoop解压目录下创建相关目录</h4> 
<ul><li>创建data和tmp目录</li></ul> 
<p><img alt="" height="525" src="https://images2.imgbox.com/f9/21/hQq63idb_o.png" width="1200"></p> 
<ul><li>在data文件夹下面再创建namenode和datanode目录</li></ul> 
<p><img alt="" height="279" src="https://images2.imgbox.com/27/47/xRbVveFk_o.png" width="1075"></p> 
<h4 id="4%EF%BC%89%E4%BF%AE%E6%94%B9Hadoop%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" style="background-color:transparent;">4）修改Hadoop配置文件</h4> 
<ul><li>配置文件目录：$HADOOP_HOME\etc\hadoop</li></ul> 
<h5 id="1%E3%80%81core-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE" style="background-color:transparent;">1、core-site.xml文件：添加以下配置</h5> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
    &lt;/property&gt;  
&lt;/configuration&gt;</code></pre> 
<h5 id="2%E3%80%81hdfs-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%B7%AF%E5%BE%84%E6%94%B9%E6%88%90%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84">2、hdfs-site.xml文件：添加以下配置，路径改成自己的安装路径</h5> 
<pre><code class="language-XML">&lt;configuration&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.replication&lt;/name&gt;
		&lt;value&gt;1&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;    
		&lt;value&gt;/D:/bigdata/hadoop/hadoop-3.1.3/data/namenode&lt;/value&gt;    
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;    
		&lt;value&gt;/D:/bigdata/hadoop/hadoop-3.1.3/data/datanode&lt;/value&gt;  
	&lt;/property&gt;
&lt;/configuration&gt;
</code></pre> 
<h5 id="3%E3%80%81mapred-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE"><br> 3、mapred-site.xml文件：添加以下配置</h5> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<h5 id="4%E3%80%81yarn-site.xml%E6%96%87%E4%BB%B6%EF%BC%9A%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE"><br> 4、yarn-site.xml文件：添加以下配置</h5> 
<pre><code class="language-XML">&lt;configuration&gt;
&lt;!-- Site specific YARN configuration properties --&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;
        &lt;value&gt;1024&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;/name&gt;
        &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;

&lt;/configuration&gt;</code></pre> 
<h5 id="5%EF%BC%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%8A%82%E7%82%B9">5）替换文件</h5> 
<h6 id="1%E3%80%81%E6%9B%BF%E6%8D%A2bin%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%EF%BC%88winutils%EF%BC%89">1、替换bin目录下文件（winutils）</h6> 
<blockquote> 
 <p>打开winutils文件，把里面的bin文件复制到hadoop的安装路径，替换掉原来的bin文件，替换过程如下：</p> 
</blockquote> 
<p>下载：<a class="link-info" href="https://link.csdn.net/?target=https%3A%2F%2Fcodeload.github.com%2Fzyj108%2Fapache-hadoop-3.1.0-winutils%2Fzip%2Fmaster" rel="nofollow" title="apache-hadoop-3.1.0-winutils">apache-hadoop-3.1.0-winutils</a><br> 也可以去<a class="link-info" href="https://link.csdn.net/?target=https%3A%2F%2Fgithub.com%2Fsearch%3Fq%3Dwinutils" rel="nofollow" title="GitHub">GitHub</a>上下载其它对应版本</p> 
<p><img alt="" height="591" src="https://images2.imgbox.com/f3/a2/XgECVSkn_o.png" width="1200"><img alt="" height="881" src="https://images2.imgbox.com/da/38/Q926kaGB_o.png" width="1200"></p> 
<h6 id="2%E3%80%81%E6%8C%89%E7%85%A7%E8%B7%AF%E5%BE%84%E6%89%BE%E5%88%B0%E5%9B%BE%E4%B8%AD%E8%AF%A5%E6%96%87%E4%BB%B6">2、按照路径找到图中该文件</h6> 
<p><img alt="" height="430" src="https://images2.imgbox.com/44/ad/7ojfDnpg_o.png" width="1200"></p> 
<p>把它复制到上一级目录，即</p> 
<h5 id="%E2%80%8B%E7%BC%96%E8%BE%917%EF%BC%89%E8%BF%90%E8%A1%8C"><img alt="" height="390" src="https://images2.imgbox.com/a6/74/ApAKgpBU_o.png" width="779"></h5> 
<h5 id="%C2%A06%EF%BC%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%8A%82%E7%82%B9"> 6）格式化节点</h5> 
<pre><code class="language-bash">$ hdfs namenode -format</code></pre> 
<h5 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="397" src="https://images2.imgbox.com/f2/f9/OyuEuIQO_o.png" width="1200"></h5> 
<p></p> 
<h5 id="7%EF%BC%89%E8%BF%90%E8%A1%8C">7）运行</h5> 
<blockquote> 
 <p>【温馨提示】回到hadoop安装bin目录下，右击以管理员的身份运行start-all.cmd文件，要不然会报权限问题</p> 
</blockquote> 
<p><br> 出现下面四个窗口就是 成功了，<span style="color:#fe2c24;"><strong>注意每个窗口标题的后面的名称</strong></span>，比如yarn nodemanager,如果没有出现则是失败</p> 
<p><img alt="" height="766" src="https://images2.imgbox.com/cc/91/qlbDIQWh_o.png" width="1200"></p> 
<h5 id="8%EF%BC%89%E9%AA%8C%E8%AF%81">8）验证</h5> 
<p>hdfs web 地址：http://localhost:9870/</p> 
<p><img alt="" height="821" src="https://images2.imgbox.com/eb/c7/LGiQ0gfU_o.png" width="1200"></p> 
<p>yarn web 地址：http://localhost:8088/</p> 
<p><img alt="" height="717" src="https://images2.imgbox.com/56/83/T6UhPiyr_o.png" width="1200"></p> 
<p>到此为止window版本的hadoop就安装成功了<br>  </p> 
<h2 id="%E5%AE%89%E8%A3%85mysql8.x" style="background-color:transparent;">三、安装mysql8.x</h2> 
<p>上述的 hive初始化是在 mysql安装完成后实现的。</p> 
<h4 id="1%E3%80%81%E4%B8%8B%E8%BD%BDmysql" style="background-color:transparent;">1、下载mysql</h4> 
<p>官网下载：<a href="https://dev.mysql.com/downloads/mysql/" rel="nofollow" title="MySQL :: Download MySQL Community Server">MySQL :: Download MySQL Community Server</a></p> 
<p><img alt="" height="880" src="https://images2.imgbox.com/b9/3c/kNgLMIuj_o.png" width="1200"></p> 
<p><img alt="" height="730" src="https://images2.imgbox.com/64/21/V3s0etYG_o.png" width="1133"></p> 
<h4 id="2%E3%80%81%E9%85%8D%E7%BD%AEmysql%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" style="background-color:transparent;">2、配置mysql环境变量</h4> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%913%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96mysql" style="background-color:transparent;"><img alt="" height="676" src="https://images2.imgbox.com/6c/cb/FxmIg3CI_o.png" width="1200"><br> 3、初始化mysql</h4> 
<blockquote> 
 <p>【温馨提示】右键以管理员身份运行cmd，否则在安装时会报权限的错，会导致安装失败的情况。</p> 
</blockquote> 
<p><img alt="" height="892" src="https://images2.imgbox.com/5d/bc/6YY0QOx5_o.png" width="1181"></p> 
<p><img alt="" height="754" src="https://images2.imgbox.com/42/a2/wa1su3lN_o.png" width="1200"></p> 
<pre><code class="language-bash"># 切换到mysql bin目录下执行
# cd D:\software\window-hadoop-hive\mysql\mysql-8.0.28-winx64\bin
# d:
$ mysqld --initialize --console
</code></pre> 
<h4 id="4%E3%80%81%E5%AE%89%E8%A3%85mysql%E6%9C%8D%E5%8A%A1">4、安装mysql服务</h4> 
<pre><code class="language-bash">$ mysqld --install mysql</code></pre> 
<h4><img alt="" height="180" src="https://images2.imgbox.com/8b/8d/sWnpjLrp_o.png" width="1200"></h4> 
<h4 id="5%E3%80%81%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1">5、通过命令启动服务</h4> 
<pre><code class="language-bash">$ net start mysql</code></pre> 
<h4 id="6%E3%80%81%E9%80%9A%E8%BF%87mysql%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%E5%B9%B6%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81"><br> 6、通过mysql客户端登录验证并修改root密码</h4> 
<pre><code class="language-bash">$ mysql -uroot -p
#输入上面初始化的密码</code></pre> 
<h4 id="8%E3%80%81%E9%87%8D%E7%BD%AEmysql%20root%E5%AF%86%E7%A0%81%EF%BC%88%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%83%BD%E8%A6%81%E4%BB%A5%E7%AE%A1%E7%90%86%E5%91%98%E8%BF%90%E8%A1%8C%20%EF%BC%89" style="background-color:transparent;">8、重置mysql root密码（命令行都要以管理员运行 ）</h4> 
<h5></h5> 
<ul><li> <p>停止mysql服务</p> </li></ul> 
<pre><code class="language-bash">$ net stop mysql</code></pre> 
<ul><li> <p>启动MySQL服务的时候跳过权限表认证</p> </li></ul> 
<pre><code class="language-bash">$ mysqld --console --skip-grant-tables --shared-memory</code></pre> 
<ul><li> <p>在新开的命令行中执行mysql</p> </li></ul> 
<blockquote> 
 <p>【温馨提示】由于上面的命令行被mysql的服务给占用，我们得重新开启一个新的命令行</p> 
</blockquote> 
<pre><code class="language-bash">$ mysql</code></pre> 
<ul><li> <p>将root用户的密码清空</p> </li></ul> 
<pre><code class="language-bash">$ update user set authentication_string = ''  where user='root' ;    </code></pre> 
<ul><li>quit 退出，然后在之前的命令行将我们开启的mysql服务停止掉（Ctrl+C或者关闭命令行），然后执行net start mysql 重新启动mysql服务</li></ul> 
<pre><code class="language-bash">$ net  start mysql</code></pre> 
<p></p> 
<ul><li>在我们之后开启的命令行中输入mysql -uroot -p 然后按enter键，输入密码继续按enter键（这里密码已经被清空）</li></ul> 
<pre><code class="language-bash">$ mysql -uroot -p</code></pre> 
<ul><li>修改密码</li></ul> 
<pre><code class="language-bash">ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';
FLUSH PRIVILEGES;</code></pre> 
<p><img alt="" height="760" src="https://images2.imgbox.com/8d/4d/iBnZXwAz_o.png" width="1200"></p> 
<p>【问题】如果mysql工具出现错误：</p> 
<blockquote> 
 <p>Authentication plugin 'caching_sha2_password' cannot be loaded</p> 
</blockquote> 
<p>【原因】</p> 
<blockquote> 
 <p>很多用户在使用Navicat Premium 12连接MySQL数据库时会出现Authentication plugin ‘caching_sha2_password’ cannot be loaded的错误。</p> 
 <p></p> 
 <p>出现这个原因是mysql8 之前的版本中加密规则是mysql_native_password,而在mysql8之后,加密规则是caching_sha2_password, 解决问题方法有两种,一种是升级navicat驱动,一种是把mysql用户登录密码加密规则还原成mysql_native_password.</p> 
</blockquote> 
<p></p> 
<p>【解决】</p> 
<blockquote> 
 <p># 管理员权限运行命令<br> ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';</p> 
 <p>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';</p> 
 <p>FLUSH PRIVILEGES;</p> 
 <p></p> 
</blockquote> 
<ul><li>退出后，使用新密码登录</li></ul> 
<pre><code class="language-bash">$ mysql -uroot -p</code></pre> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81Hive%E5%AE%89%E8%A3%85%EF%BC%88window10%E7%8E%AF%E5%A2%83%EF%BC%89" style="background-color:transparent;">四、Hive安装（window10环境）</h2> 
<h4 id="1%EF%BC%89%E4%B8%8B%E8%BD%BDHive" style="background-color:transparent;">1）下载Hive</h4> 
<p>各版本下载地址：<a href="http://archive.apache.org/dist/hive" rel="nofollow" title="Index of /dist/hive">Index of /dist/hive</a></p> 
<p>这选择最新版本</p> 
<p><img alt="" height="558" src="https://images2.imgbox.com/76/9c/WUm2wlsQ_o.png" width="810"></p> 
<p>hive 3.1.2版本下载地址：http://archive.apache.org/dist/hive/hive-3.1.2/apache-hive-3.1.2-bin.tar.gz</p> 
<h4 id="2%EF%BC%89Hive%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">2）Hive配置环境变量</h4> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%913%EF%BC%89%E6%96%B0%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9B%AE%E5%BD%95%EF%BC%88%E5%90%8E%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%9A%E7%94%A8%E5%88%B0%EF%BC%89"><img alt="" height="636" src="https://images2.imgbox.com/b0/14/Q5ldhl1x_o.png" width="1200"><br> 3）新建本地目录（后面配置文件会用到）</h4> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%914%EF%BC%89%E5%9C%A8hadoop%E4%B8%8A%E5%88%9B%E5%BB%BAhdfs%E7%9B%AE%E5%BD%95%EF%BC%88%E5%90%8E%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%9A%E7%94%A8%E5%88%B0%EF%BC%89"><img alt="" height="339" src="https://images2.imgbox.com/51/2e/pAYa9t5N_o.png" width="1048"><br> 4）在hadoop上创建hdfs目录（后面配置文件会用到）</h4> 
<pre><code class="language-bash">$ hadoop fs  -mkdir       /tmp
$ hadoop fs  -mkdir       /user/
$ hadoop fs  -mkdir       /user/hive/
$ hadoop fs  -mkdir       /user/hive/warehouse 
$ hadoop fs  -chmod g+w   /tmp
$ hadoop fs  -chmod g+w   /user/hive/warehouse
</code></pre> 
<p><img alt="" height="400" src="https://images2.imgbox.com/5a/ea/ly2Y2VWB_o.png" width="1200"></p> 
<p><img alt="" height="575" src="https://images2.imgbox.com/ad/68/P3ugXhXb_o.png" width="1200"></p> 
<h4></h4> 
<h4 id="5%EF%BC%89%E4%BF%AE%E6%94%B9Hive%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">5）修改Hive 配置文件</h4> 
<p>配置文件目录hive\apache-hive-3.1.2-bin\conf中4个默认的配置文件模板拷贝成新的文件名</p> 
<blockquote> 
 <p>hive-default.xml.template -----&gt; hive-site.xml<br> hive-env.sh.template -----&gt; hive-env.sh<br> hive-exec-log4j.properties.template -----&gt; hive-exec-log4j2.properties<br> hive-log4j.properties.template -----&gt; hive-log4j2.properties</p> 
</blockquote> 
<h5 id="1%E3%80%81hive-site.xml%20%E6%96%87%E4%BB%B6%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B">1、hive-site.xml 文件：配置文件内容如下</h5> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;

&lt;configuration&gt;
 
&lt;!--hive的临时数据目录，指定的位置在hdfs上的目录--&gt;
    &lt;property&gt;
        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;
        &lt;value&gt;/user/hive/warehouse&lt;/value&gt;
        &lt;description&gt;location of default database for the warehouse&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!--hive的临时数据目录，指定的位置在hdfs上的目录--&gt;
    &lt;property&gt;
        &lt;name&gt;hive.exec.scratchdir&lt;/name&gt;
        &lt;value&gt;/tmp/hive&lt;/value&gt;
        &lt;description&gt;HDFS root scratch dir for Hive jobs which gets created with write all (733) permission. For each connecting user, an HDFS scratch dir: ${hive.exec.scratchdir}/&amp;lt;username&amp;gt; is created, with ${hive.scratch.dir.permission}.&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- scratchdir 本地目录 --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.exec.local.scratchdir&lt;/name&gt;
        &lt;value&gt;F:/bigdata/apache-hive/my_hive/scratch_dir&lt;/value&gt;
        &lt;description&gt;Local scratch space for Hive jobs&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- resources_dir 本地目录 --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.downloaded.resources.dir&lt;/name&gt;
        &lt;value&gt;F:/bigdata/apache-hive/my_hive/resources_dir/${hive.session.id}_resources&lt;/value&gt;
        &lt;description&gt;Temporary local directory for added resources in the remote file system.&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- querylog 本地目录 --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.querylog.location&lt;/name&gt;
        &lt;value&gt;F:/bigdata/apache-hive/my_hive/querylog_dir&lt;/value&gt;
        &lt;description&gt;Location of Hive run time structured log file&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- operation_logs 本地目录 --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.server2.logging.operation.log.location&lt;/name&gt;
        &lt;value&gt;F:/bigdata/apache-hive/my_hive/operation_logs_dir&lt;/value&gt;
        &lt;description&gt;Top level directory where operation logs are stored if logging functionality is enabled&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- 数据库连接地址配置 --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
        &lt;value&gt;jdbc:mysql://localhost:3306/hive?serverTimezone=UTC&amp;amp;useSSL=false&amp;amp;allowPublicKeyRetrieval=true&lt;/value&gt;
        &lt;description&gt;
        JDBC connect string for a JDBC metastore.
        &lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- 数据库驱动配置 --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;
        &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- 数据库用户名 --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
        &lt;value&gt;root&lt;/value&gt;
        &lt;description&gt;Username to use against metastore database&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- 数据库访问密码 --&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
        &lt;value&gt;root&lt;/value&gt;
        &lt;description&gt;password to use against metastore database&lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- 解决 Caused by: MetaException(message:Version information not found in metastore. ) --&gt;
    &lt;property&gt;
        &lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;
        &lt;value&gt;false&lt;/value&gt;
        &lt;description&gt;
        Enforce metastore schema version consistency.
        True: Verify that version information stored in is compatible with one from Hive jars. Also disable automatic
        schema migration attempt. Users are required to manually migrate schema after Hive upgrade which ensures
        proper metastore schema migration. (Default)
        False: Warn if the version information stored in metastore doesn't match with one from in Hive jars.
        &lt;/description&gt;
    &lt;/property&gt;
 
&lt;!-- 自动创建全部 --&gt;
&lt;!-- hive Required table missing : "DBS" in Catalog""Schema" 错误 --&gt;
    &lt;property&gt;
        &lt;name&gt;datanucleus.schema.autoCreateAll&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
        &lt;description&gt;Auto creates necessary schema on a startup if one doesn't exist. Set this to false, after creating it once.To enable auto create also set hive.metastore.schema.verification=false. Auto creation is not recommended for production use cases, run schematool command instead.&lt;/description&gt;
    &lt;/property&gt;
	

&lt;!-- 指定hiveserver2连接的host（hive用户要绑定的网络接口） --&gt;
&lt;property&gt;
   &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;
   &lt;value&gt;localhost&lt;/value&gt;
   &lt;description&gt;Bind host on which to run the HiveServer2 Thrift service.&lt;/description&gt;
&lt;/property&gt;

&lt;!-- 指定hiveserver2连接的端口号,hs2端口 默认是10000，为了区别，我这里不使用默认端口--&gt;
&lt;property&gt;
    &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;
    &lt;value&gt;10002&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
  &lt;name&gt;hive.server2.active.passive.ha.enable&lt;/name&gt;
  &lt;value&gt;true&lt;/value&gt;
  &lt;description&gt;Whether HiveServer2 Active/Passive High Availability be enabled when Hive Interactive sessions are enabled.This will also require hive.server2.support.dynamic.service.discovery to be enabled.&lt;/description&gt;
&lt;/property&gt;


&lt;/configuration&gt;
</code></pre> 
<h5 id="2%E3%80%81hive-env.sh%20%E6%96%87%E4%BB%B6%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B"><br> 2、hive-env.sh 文件：配置文件内容如下</h5> 
<pre><code class="language-bash"># Set HADOOP_HOME to point to a specific hadoop install directory
export HADOOP_HOME=D:\software\window-hadoop-hive\hadoop\hadoop-3.1.3
 
# Hive Configuration Directory can be controlled by:
export HIVE_CONF_DIR=D:\software\window-hadoop-hive\hive\apache-hive-3.1.2-bin\conf
 
# Folder containing extra libraries required for hive compilation/execution can be controlled by:
export HIVE_AUX_JARS_PATH=D:\software\window-hadoop-hive\hive\apache-hive-3.1.2-bin\lib</code></pre> 
<h4 id="6%EF%BC%89%E6%9B%BF%E6%8D%A2hvie%E4%B8%AD%E7%9A%84bin%E7%9B%AE%E5%BD%95"><br> 6）替换hvie中的bin目录</h4> 
<blockquote> 
 <p>【温馨提示】2.2.0版本之后就不提供cmd相关文件了，所以得去下载apache-hive-2.2.0-src.tar.gz，把这个版本里的bin目录文件替换到hive安装bin目录下。</p> 
</blockquote> 
<p>下载：<a class="link-info" href="https://link.csdn.net/?target=http%3A%2F%2Farchive.apache.org%2Fdist%2Fhive%2Fhive-2.2.0%2Fapache-hive-2.2.0-src.tar.gz" rel="nofollow" title="apache-hive-2.2.0-src.tar.gz">apache-hive-2.2.0-src.tar.gz</a></p> 
<h4 id="7%EF%BC%89%E4%B8%8B%E8%BD%BDmysql-connector-java-*.jar">7）下载mysql-connector-java-*.jar</h4> 
<blockquote> 
 <p>这里将mysql-connector-java-*.jar拷贝到hvie安装目录lib下</p> 
</blockquote> 
<p>下载地址：<a href="https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.28/mysql-connector-java-8.0.28.jar" rel="nofollow" title="https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.28/mysql-connector-java-8.0.28.jar">https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.28/mysql-connector-java-8.0.28.jar</a></p> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%918%EF%BC%89%E5%88%9B%E5%BB%BAHive%20%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BE%9D%E8%B5%96%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93hive%2C%E6%B3%A8%E6%84%8F%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%9Alatin1"><img alt="" height="556" src="https://images2.imgbox.com/a3/8f/TkqBOK0y_o.png" width="1200"><br> 8）创建Hive 初始化依赖的数据库hive,注意编码格式：latin1</h4> 
<blockquote> 
 <p>在  mysql 数据库中创建 hive 数据库，名称就是 hive，编码 latin1</p> 
</blockquote> 
<p><img alt="" height="421" src="https://images2.imgbox.com/21/e4/hQ4vLBOc_o.png" width="1007"></p> 
<h4 id="9%EF%BC%89Hive%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE">9）Hive 初始化数据</h4> 
<p>默认已经安装mysql8.0（见下面mysql安装）</p> 
<pre><code class="language-bash"># 在hive的bin目录下执行
$ hive --service schematool -dbType mysql -initSchema</code></pre> 
<p><img alt="" height="827" src="https://images2.imgbox.com/d0/bb/fVQGeSYI_o.png" width="1200"></p> 
<h4 id="10%EF%BC%89%E5%90%AF%E5%8A%A8Hive%20%E6%9C%8D%E5%8A%A1">10）启动Hive 服务</h4> 
<h5 id="1%E3%80%81%E9%A6%96%E5%85%88%E5%90%AF%E5%8A%A8Hadoop">1、首先启动Hadoop</h5> 
<blockquote> 
 <p>在hyadoop安装目录 sbin 下执行指令：stall-all.cmd，上面其实已经验证过了，启动是没问题的。</p> 
 <p><img alt="" height="456" src="https://images2.imgbox.com/36/cd/LqMuMA6m_o.png" width="1145"></p> 
</blockquote> 
<h5 id="2%E3%80%81%E5%86%8D%E5%90%AF%E5%8A%A8Hive%20%E6%9C%8D%E5%8A%A1">2、再启动Hive 服务</h5> 
<p>默认已经安装mysql8.0（见下面mysql安装）</p> 
<blockquote> 
 <p>$ hive --service metastore</p> 
</blockquote> 
<h5><img alt="" height="373" src="https://images2.imgbox.com/7a/a4/fxiZ0rS7_o.png" width="1200"></h5> 
<h5 id="3%E3%80%81%E9%AA%8C%E8%AF%81">3、验证</h5> 
<blockquote> 
 <p>另起一个cmd窗口验证</p> 
 <p></p> 
 <p>$ hive<br> create databases test;<br> show databases;</p> 
</blockquote> 
<h4 id="11%EF%BC%89%E9%85%8D%E7%BD%AEbeeline">11）配置beeline</h4> 
<h5 id="1%E3%80%81%E6%B7%BB%E5%8A%A0beeline%E9%85%8D%E7%BD%AE">1、添加beeline配置</h5> 
<blockquote> 
 <p>【温馨提示】hive命令会慢慢不再使用了，以后就用beeline</p> 
 <p>在Hive服务安装目录的%HIVE_HOME%\conf\hive-site.xml配置文件中添加以下配置：</p> 
 <p></p> 
 <p>关于 beeline配置 前面已经配置，下面主要是为了让大家更清楚。</p> 
 <p></p> 
 <p>注意：HiveServer2端口 默认是10000，为了区别和不冲突，我这里不使用默认端口，使用10013， 不要使用 10002，这端口是HiveServer2的web UI的端口，否则会报如下端口冲突问题。</p> 
 <p><img alt="" height="836" src="https://images2.imgbox.com/b8/97/9ZEskw07_o.png" width="1200"></p> 
</blockquote> 
<pre><code class="language-XML">&lt;!-- host --&gt;
&lt;property&gt;
    &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;
    &lt;value&gt;localhost&lt;/value&gt;
    &lt;description&gt;Bind host on which to run the HiveServer2 Thrift service.&lt;/description&gt;
&lt;/property&gt;

&lt;!-- hs2端口 默认是10000，为了区别和不冲突，我这里不使用默认端口，使用10013
     不要使用 10002，这端口是HiveServer2的web UI的端口
--&gt;
&lt;property&gt;
    &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;
    &lt;value&gt;10013&lt;/value&gt;
&lt;/property&gt;</code></pre> 
<blockquote> 
 <p>在Hadoop服务安装目录的%HADOOP_HOME%\etc\hadoop\core-site.xml配置文件中添加以下配置：</p> 
</blockquote> 
<pre><code class="language-XML">&lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.29209.hosts&lt;/name&gt;
    &lt;value&gt;*&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;hadoop.proxyuser.29209.groups&lt;/name&gt;
    &lt;value&gt;*&lt;/value&gt;
&lt;/property&gt;</code></pre> 
<p>【注意】hadoop.proxyuser.29209.hosts和hadoop.proxyuser.29209.hosts，其中29209是连接beeline的用户，将29209替换成自己的用户名即可，其实这里的用户就是我本机的用户，也是上面创建文件夹的用户，这个用户是什么不重要，它就是个超级代理。</p> 
<p><img alt="" height="438" src="https://images2.imgbox.com/28/b0/bMHvtx78_o.png" width="1200"></p> 
<h5 id="2%E3%80%81%E5%90%AF%E5%8A%A8hiveserver2">2、启动hiveserver2</h5> 
<p>启动hiveserver2 之前必须重启hive服务</p> 
<pre><code class="language-bash">$ hive --service metastore
$ hive --service hiveserver2</code></pre> 
<blockquote> 
 <p>【问题】java.lang.NoClassDefFoundError: org/apache/tez/dag/api/SessionNotRunning<br> 【解决】在hive 配置文件hive-site.xml添加如下配置：</p> 
</blockquote> 
<pre><code class="language-XML">&lt;property&gt;
    &lt;name&gt;hive.server2.active.passive.ha.enable&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
    &lt;description&gt;Whether HiveServer2 Active/Passive High Availability be enabled when Hive Interactive sessions are enabled.This will also require hive.server2.support.dynamic.service.discovery to be enabled.&lt;/description&gt;
&lt;/property&gt;</code></pre> 
<p>重启hiveserver2</p> 
<pre><code class="language-bash">$ hive --service metastore
$ hive --service hiveserver2</code></pre> 
<p><img alt="" height="527" src="https://images2.imgbox.com/b0/fc/CnWcKxi0_o.png" width="1200"></p> 
<p>HiveServer2 web：<a href="http://localhost:10002/" rel="nofollow" title="http://localhost:10002/">http://localhost:10002/</a></p> 
<p><img alt="" height="438" src="https://images2.imgbox.com/28/37/n6aB3l1i_o.png" width="1200"></p> 
<p>3、beeline客户端登录</p> 
<pre><code class="language-bash">$ beeline</code></pre> 
<blockquote> 
 <p>【问题一】<span style="color:#ff9900;"><strong>Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hive/jdbc/JdbcUriParseException</strong></span><br> 【解决】Hadoop缺少hive-jdbc-***.jar,将Hive安装目录下的lib文件夹中的hive-jdbc-3.1.2.jar包复制到Hadoop安装目录\share\hadoop\common\lib下</p> 
</blockquote> 
<p><img alt="" height="604" src="https://images2.imgbox.com/f5/29/Mxz7pMCd_o.png" width="1092"></p> 
<blockquote> 
 <p>【问题二】<span style="color:#ff9900;"><strong>Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/hive/conf/HiveConf</strong></span><br> 【解决】Hive安装目录下，将hive-common-3.1.2.jar复制到Hadoop安装目录的\share\hadoop\common\lib下</p> 
</blockquote> 
<p><img alt="" height="606" src="https://images2.imgbox.com/47/1a/9cgrh6XW_o.png" width="1057"></p> 
<pre><code class="language-bash">$ beeline
!connect jdbc:hive2://localhost:10001
29209
# 下面这句跟上面等价，都可以登录
$ %HIVE_HOME%\bin\beeline.cmd -u jdbc:hive2://localhost:10001 -n 29209
</code></pre> 
<blockquote> 
 <p>【问题三】<span style="color:#ff9900;">Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hive/service/cli/HiveSQLException。</span><br> 【解决】把Hive安装目录下，将hive-service-3.1.2.jar复制到Hadoop安装目录的\share\hadoop\common\lib下。</p> 
</blockquote> 
<p>再重启登录</p> 
<pre><code class="language-bash">$ hive --service metastore
$ hive --service hiveserver2
# %HIVE_HOME%\bin\beeline.cmd -u jdbc:hive2://localhost:10001 -n hadoop超级用户名
# hadoop超级用户名: hdfs中core-site.xml配置的 29209 ，如下图
$ %HIVE_HOME%\bin\beeline.cmd -u jdbc:hive2://localhost:10001 -n 29209
</code></pre> 
<p><img alt="" height="381" src="https://images2.imgbox.com/5d/6a/apEPbJLn_o.png" width="1200"></p> 
<p><img alt="" height="703" src="https://images2.imgbox.com/05/98/rKTdwFdP_o.png" width="1200"></p> 
<h4 id="%E6%AD%A3%E5%B8%B8%E7%99%BB%E5%BD%95%EF%BC%8C%E4%B8%80%E5%88%87OK%E3%80%82">正常登录，一切OK。</h4> 
<h4></h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/11d86e2e73b67d1c83fea24b4e468fb1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">webstorm配置eslint一键格式化代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79955088da34333920b30f888bf1f217/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">hadoop的基础操作——Hadoop中创建、修改、查看、删除文件夹及文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>