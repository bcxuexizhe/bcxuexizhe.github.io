<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL数据库】丨一文详解 JdbcTemplate(Spring中的CRUD) - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/c6ffed89bcf11dfed5f1ec54a7299cff/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【MySQL数据库】丨一文详解 JdbcTemplate(Spring中的CRUD)">
  <meta property="og:description" content="前言 JdbcTemplate 是 Spring框架 中提供的一个对象，用于简化JDBC操作。它使得数据库操作变得更为简单和方便，大大提高了开发效率。
文章目录 前言为何要使用JdbcTemplate在JdbcTemplate中执行SQL语句的方法大致分为3类：案例代码 JdbcTemplate实现增删改案例代码 JdbcTemplate查询-queryForInt返回一个int整数案例代码 JdbcTemplate查询-queryForObject返回String案例代码 JdbcTemplate查询-queryForMap返回一个Map集合处理结果 JdbcTemplate查询-queryForList返回一个List集合处理结果 JdbcTemplate查询-RowMapper返回自定义对象案例代码 JdbcTemplate查询-BeanPropertyRowMapper返回自定义对象 为何要使用JdbcTemplate JDBC已经能够满足大部分用户最基本的需求，但是在使用JDBC时，必须自己来管理数据库资源如：获取PreparedStatement，设置SQL语句参数，关闭连接等步骤。
当初看到jdbctempate时感觉很诧异，但是用到时候感觉这样使用真的方便，类似于mybatis的封装，但是却比他简单，明了。
org.springframework.jdbc.core.JdbcTemplate类是JDBC核心包中的中心类。它简化了JDBC的使用，并有助于避免常见的错误。 它执行核心JDBC工作流，留下应用程序代码来提供SQL并提取结果。 该类执行SQL查询或更新，在ResultSet类上启动迭代并捕获JDBC异常，并将它们转换为org.springframework.dao包中定义的通用更详细的异常层次结构。使用这个类的代码只需要实现回调接口，给它们一个明确定义的协定。 Preparedstatementcreator 回调接口在给定 Connection 的情况下创建一个准备好的语句，提供 SQL 和任何必要的参数。 Resultsetextractor 接口从 ResultSet 中提取值。 请参阅 PreparedStatementSetter 和 RowMapper 了解两个流行的可选回调接口。
JdbcTemplate是Spring对JDBC的封装，目的是使JDBC更加易于使用。JdbcTemplate是Spring的一部分。JdbcTemplate处理了资源的建立和释放。他帮助我们避免一些常见的错误，比如忘了总要关闭连接。他运行核心的JDBC工作流，如Statement的建立和执行，而我们只需要提供SQL语句和提取结果
在JdbcTemplate中执行SQL语句的方法大致分为3类： execute：可以执行所有SQL语句，一般用于执行DDL语句。update：用于执行INSERT、UPDATE、DELETE等DML语句。queryXxx：用于DQL数据查询语句。 JdbcTemplate配置连接池
org.springframework.jdbc.core.JdbcTemplate类方便执行SQL语句
public JdbcTemplate(DataSource dataSource) 创建JdbcTemplate对象，方便执行SQL语句 public void execute(final String sql) execute可以执行所有SQL语句，因为没有返回值，一般用于执行DDL语句。 JdbcTemplate使用步骤
准备DruidDataSource连接池
导入依赖的jar包
spring-beans-4.1.2.RELEASE.jar
spring-core-4.1.2.RELEASE.jar
spring-jdbc-4.1.2.RELEASE.jar
spring-tx-4.1.2.RELEASE.jar
com.springsource.org.apache.commons.logging-1.1.1.jar
public void execute(final String sql)
execute可以执行所有SQL语句，因为没有返回值，一般用于执行DDL语句。
创建JdbcTemplate对象，传入Druid连接池
调用execute、update、queryXxx等方法
案例代码 public class Demo04 { public static void main(String[] args) { // 创建表的SQL语句 String sql = &#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-10T12:41:21+08:00">
    <meta property="article:modified_time" content="2024-05-10T12:41:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL数据库】丨一文详解 JdbcTemplate(Spring中的CRUD)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<blockquote> 
 <p><strong>JdbcTemplate 是 Spring框架 中提供的一个对象，用于简化JDBC操作。它使得数据库操作变得更为简单和方便，大大提高了开发效率。</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/bf/4f/2lQR0jL5_o.png" alt="在这里插入图片描述"><br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_0" rel="nofollow">前言</a></li><li><a href="#JdbcTemplate_6" rel="nofollow">为何要使用JdbcTemplate</a></li><li><ul><li><a href="#JdbcTemplateSQL3_20" rel="nofollow">在JdbcTemplate中执行SQL语句的方法大致分为3类：</a></li><li><a href="#_56" rel="nofollow">案例代码</a></li></ul> 
  </li><li><a href="#JdbcTemplate_76" rel="nofollow">JdbcTemplate实现增删改</a></li><li><ul><li><a href="#_91" rel="nofollow">案例代码</a></li></ul> 
  </li><li><a href="#JdbcTemplatequeryForIntint_140" rel="nofollow">JdbcTemplate查询-queryForInt返回一个int整数</a></li><li><ul><li><a href="#_156" rel="nofollow">案例代码</a></li></ul> 
  </li><li><a href="#JdbcTemplatequeryForObjectString_171" rel="nofollow">JdbcTemplate查询-queryForObject返回String</a></li><li><ul><li><a href="#_186" rel="nofollow">案例代码</a></li></ul> 
  </li><li><a href="#JdbcTemplatequeryForMapMap_198" rel="nofollow">JdbcTemplate查询-queryForMap返回一个Map集合</a></li><li><ul><li><a href="#_211" rel="nofollow">处理结果</a></li></ul> 
  </li><li><a href="#JdbcTemplatequeryForListList_223" rel="nofollow">JdbcTemplate查询-queryForList返回一个List集合</a></li><li><ul><li><a href="#_236" rel="nofollow">处理结果</a></li></ul> 
  </li><li><a href="#JdbcTemplateRowMapper_252" rel="nofollow">JdbcTemplate查询-RowMapper返回自定义对象</a></li><li><ul><li><a href="#_269" rel="nofollow">案例代码</a></li></ul> 
  </li><li><a href="#JdbcTemplateBeanPropertyRowMapper_299" rel="nofollow">JdbcTemplate查询-BeanPropertyRowMapper返回自定义对象</a></li></ul> 
</div> 
<p></p> 
<h2><a id="JdbcTemplate_6"></a>为何要使用JdbcTemplate</h2> 
<p>JDBC已经能够满足大部分用户最基本的需求，但是在使用JDBC时，必须自己来管理数据库资源如：获取PreparedStatement，设置SQL语句参数，关闭连接等步骤。</p> 
<p>当初看到jdbctempate时感觉很诧异，但是用到时候感觉这样使用真的方便，类似于mybatis的封装，但是却比他简单，明了。</p> 
<p>org.springframework.jdbc.core.JdbcTemplate类是JDBC核心包中的中心类。它简化了JDBC的使用，并有助于避免常见的错误。 它执行核心JDBC工作流，留下应用程序代码来提供SQL并提取结果。 该类执行SQL查询或更新，在ResultSet类上启动迭代并捕获JDBC异常，并将它们转换为org.springframework.dao包中定义的通用更详细的异常层次结构。使用这个类的代码只需要实现回调接口，给它们一个明确定义的协定。 Preparedstatementcreator 回调接口在给定 Connection 的情况下创建一个准备好的语句，提供 SQL 和任何必要的参数。 Resultsetextractor 接口从 ResultSet 中提取值。 请参阅 PreparedStatementSetter 和 RowMapper 了解两个流行的可选回调接口。</p> 
<p><strong>JdbcTemplate是Spring对JDBC的封装</strong>，目的是使JDBC更加易于使用。JdbcTemplate是Spring的一部分。JdbcTemplate处理了资源的建立和释放。他帮助我们避免一些常见的错误，比如忘了总要关闭连接。他运行核心的JDBC工作流，如Statement的建立和执行，而我们只需要提供SQL语句和提取结果<br> <img src="https://images2.imgbox.com/c8/47/wrl7RybN_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="JdbcTemplateSQL3_20"></a>在JdbcTemplate中执行SQL语句的方法大致分为3类：</h3> 
<ol><li><code>execute</code>：<strong>可以执行所有SQL语句，一般用于执行DDL语句</strong>。</li><li><code>update</code>：用于执行<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>等DML语句。</li><li><code>queryXxx</code>：用于DQL数据查询语句。</li></ol> 
<p><strong>JdbcTemplate配置连接池</strong><br> org.springframework.jdbc.core.JdbcTemplate类方便执行SQL语句</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span>
创建<span class="token class-name">JdbcTemplate</span>对象，方便执行<span class="token constant">SQL</span>语句
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> sql<span class="token punctuation">)</span>
execute可以执行所有<span class="token constant">SQL</span>语句，因为没有返回值，一般用于执行<span class="token constant">DDL</span>语句。
</code></pre> 
<p><strong>JdbcTemplate使用步骤</strong><br> 准备DruidDataSource连接池<br> 导入依赖的jar包<br> spring-beans-4.1.2.RELEASE.jar<br> spring-core-4.1.2.RELEASE.jar<br> spring-jdbc-4.1.2.RELEASE.jar<br> spring-tx-4.1.2.RELEASE.jar<br> com.springsource.org.apache.commons.logging-1.1.1.jar</p> 
<p>public void execute(final String sql)<br> execute可以执行所有SQL语句，因为没有返回值，一般用于执行DDL语句。</p> 
<p>创建JdbcTemplate对象，传入Druid连接池<br> 调用execute、update、queryXxx等方法</p> 
<h3><a id="_56"></a>案例代码</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo04</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 创建表的SQL语句</span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"CREATE TABLE product("</span>
				<span class="token operator">+</span> <span class="token string">"pid INT PRIMARY KEY AUTO_INCREMENT,"</span>
				<span class="token operator">+</span> <span class="token string">"pname VARCHAR(20),"</span>
				<span class="token operator">+</span> <span class="token string">"price DOUBLE"</span>
				<span class="token operator">+</span> <span class="token string">");"</span><span class="token punctuation">;</span>
				

	<span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="JdbcTemplate_76"></a>JdbcTemplate实现增删改</h2> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> sql<span class="token punctuation">)</span>
用于执行`<span class="token constant">INSERT</span>`、`<span class="token constant">UPDATE</span>`、`<span class="token constant">DELETE</span>`等<span class="token constant">DML</span>语句。
</code></pre> 
<p><strong>使用步骤</strong><br> 1.创建JdbcTemplate对象<br> 2.编写SQL语句<br> 3.使用JdbcTemplate对象的update方法进行增删改</p> 
<h3><a id="_91"></a>案例代码</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo05</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//		test01();</span>
<span class="token comment">//		test02();</span>
<span class="token comment">//		test03();</span>
	<span class="token punctuation">}</span>
<span class="token comment">// JDBCTemplate添加数据</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"INSERT INTO product VALUES (NULL, ?, ?);"</span><span class="token punctuation">;</span>
	
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone3GS"</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone4"</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone4S"</span><span class="token punctuation">,</span> <span class="token number">5001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone5"</span><span class="token punctuation">,</span> <span class="token number">5555</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone5C"</span><span class="token punctuation">,</span> <span class="token number">3888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone5S"</span><span class="token punctuation">,</span> <span class="token number">5666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone6"</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone6S"</span><span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhone6SP"</span><span class="token punctuation">,</span> <span class="token number">7777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"iPhoneX"</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// JDBCTemplate修改数据</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"UPDATE product SET pname=?, price=? WHERE pid=?;"</span><span class="token punctuation">;</span>
	
	<span class="token keyword">int</span> i <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">"XVIII"</span><span class="token punctuation">,</span> <span class="token number">18888</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"影响的行数: "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// JDBCTemplate删除数据</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"DELETE FROM product WHERE pid=?;"</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"影响的行数: "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h2><a id="JdbcTemplatequeryForIntint_140"></a>JdbcTemplate查询-queryForInt返回一个int整数</h2> 
<p><strong>API介绍</strong></p> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">queryForLong</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span>
执行查询语句，返回一个<span class="token keyword">long</span>类型的数据。
</code></pre> 
<p><strong>使用步骤</strong><br> 创建JdbcTemplate对象<br> 编写查询的SQL语句<br> 使用JdbcTemplate对象的queryForLong方法<br> 输出结果</p> 
<h3><a id="_156"></a>案例代码</h3> 
<pre><code class="prism language-java"><span class="token comment">// queryForLong  返回一个long类型整数</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT COUNT(*) FROM product;"</span><span class="token punctuation">;</span>
   <span class="token comment">// String sql = "SELECT pid FROM product WHERE price=18888;";</span>
   <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">long</span> forLong <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForLong</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>forLong<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="JdbcTemplatequeryForObjectString_171"></a>JdbcTemplate查询-queryForObject返回String</h2> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">queryForObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span>
执行查询语句，返回一个指定类型的数据。
</code></pre> 
<p><strong>使用步骤</strong><br> 创建JdbcTemplate对象<br> 编写查询的SQL语句<br> 使用JdbcTemplate对象的queryForObject方法，并传入需要返回的数据的类型<br> 输出结果</p> 
<h3><a id="_186"></a>案例代码</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT pname FROM product WHERE price=7777;"</span><span class="token punctuation">;</span>
   <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">String</span> str <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="JdbcTemplatequeryForMapMap_198"></a>JdbcTemplate查询-queryForMap返回一个Map集合</h2> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryForMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span>
执行查询语句，将一条记录放到一个<span class="token class-name">Map</span>中。
</code></pre> 
<p><strong>使用步骤</strong><br> 创建JdbcTemplate对象<br> 编写查询的SQL语句<br> 使用JdbcTemplate对象的queryForMap方法</p> 
<h3><a id="_211"></a>处理结果</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM product WHERE pid=?;"</span><span class="token punctuation">;</span>
   <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForMap</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="JdbcTemplatequeryForListList_223"></a>JdbcTemplate查询-queryForList返回一个List集合</h2> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryForList</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span>
执行查询语句，返回一个<span class="token class-name">List</span>集合，<span class="token class-name">List</span>中存放的是<span class="token class-name">Map</span>类型的数据。
</code></pre> 
<p><strong>使用步骤</strong><br> 创建JdbcTemplate对象<br> 编写查询的SQL语句<br> 使用JdbcTemplate对象的queryForList方法</p> 
<h3><a id="_236"></a>处理结果</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM product WHERE pid&lt;?;"</span><span class="token punctuation">;</span>
   <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForList</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>queryForList方法的作用？将返回的一条记录保存在Map集合中，多条记录对应多个Map，多个Map存储到List集合中<mark>list里面包含map</mark></strong></p> 
<h2><a id="JdbcTemplateRowMapper_252"></a>JdbcTemplate查询-RowMapper返回自定义对象</h2> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> rowMapper<span class="token punctuation">)</span>
执行查询语句，返回一个<span class="token class-name">List</span>集合，<span class="token class-name">List</span>中存放的是<span class="token class-name">RowMapper</span>指定类型的数据。
</code></pre> 
<p><strong>使用步骤</strong><br> 定义Product类<br> 创建JdbcTemplate对象<br> 编写查询的SQL语句<br> 使用JdbcTemplate对象的query方法，并传入RowMapper匿名内部类<br> 在匿名内部类中将结果集中的一行记录转成一个Product对象</p> 
<h3><a id="_269"></a>案例代码</h3> 
<pre><code class="prism language-java"><span class="token comment">// query使用rowMap做映射返回一个对象</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test06</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// 查询数据的SQL语句</span>
   <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM product;"</span><span class="token punctuation">;</span>

   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> arg0<span class="token punctuation">,</span> <span class="token keyword">int</span> arg1<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{<!-- --></span>
         <span class="token class-name">Product</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         p<span class="token punctuation">.</span><span class="token function">setPid</span><span class="token punctuation">(</span>arg0<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"pid"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         p<span class="token punctuation">.</span><span class="token function">setPname</span><span class="token punctuation">(</span>arg0<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"pname"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         p<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span>arg0<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> p<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Product</span> product <span class="token operator">:</span> query<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

使用<span class="token class-name">JdbcTemplate</span>对象的query方法，并传入<span class="token class-name">RowMapper</span>匿名内部类
在匿名内部类中将结果集中的一行记录转成一个<span class="token class-name">Product</span>对象
</code></pre> 
<h2><a id="JdbcTemplateBeanPropertyRowMapper_299"></a>JdbcTemplate查询-BeanPropertyRowMapper返回自定义对象</h2> 
<p><strong>API介绍</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> rowMapper<span class="token punctuation">)</span>
执行查询语句，返回一个<span class="token class-name">List</span>集合，<span class="token class-name">List</span>中存放的是<span class="token class-name">RowMapper</span>指定类型的数据。
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
<span class="token class-name">BeanPropertyRowMapper</span>类实现了<span class="token class-name">RowMapper</span>接口

</code></pre> 
<p><strong>使用步骤</strong><br> 定义Product类<br> 创建JdbcTemplate对象<br> 编写查询的SQL语句<br> 使用JdbcTemplate对象的query方法，并传入BeanPropertyRowMapper对象</p> 
<pre><code class="prism language-java"><span class="token comment">// query使用BeanPropertyRowMapper做映射返回对象</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test07</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSourceUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查询数据的SQL语句</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM product;"</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Product</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Product</span> product <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p><img src="https://images2.imgbox.com/dd/2b/XJvvu8vZ_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b68fabb53e8d1b6d112aacf7e5a2d3d5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#进阶-OleDb操作Excel和数据库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae1dd3dd04a499bb557aec71d75cbf26/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】栈的实现以及数组和链表的优缺点</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>