<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【小程序】常用方法、知识点汇总1 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/2a1ba8a8a8718fddd05fb268e86d515d/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【小程序】常用方法、知识点汇总1">
  <meta property="og:description" content="欢迎来到《小5讲堂》
这是《小程序》系列文章，每篇文章将以博主理解的角度展开讲解，
温馨提示：博主能力有限，理解水平有限，若有不对之处望指正！
目录 前言请求超时Markdown解析逐行显示效果文本变动事件转发朋友圈推荐文章 前言 最近在开发微信小程序，时间久了总会把一些常用的方法忘记了，
因此这篇文章汇总下一些接触到且容易忘记的知识点。
请求超时 wx.request，默认情况下，接口请求超时的时间为10秒，可以设置超时时间。
超时，指的是在一定时间内，如果请求接口没有响应，那么请求直接结束。
下面代码设置了超时时间为20秒
wx.request({ url: &#39;https://example.com/api&#39;, method: &#39;GET&#39;, timeout: 20000, // 设置超时时间为20秒 success(res) { // 请求成功后的处理 }, fail(err) { // 请求失败的处理 } }); Markdown解析 微信小程序显示Markdown内容，主要可以通过将Markdown转换为富文本显示的方式来实现。
以下是具体步骤和可能用到的工具：
1.选择转换工具：微信小程序本身并不直接支持Markdown的解析和显示，因此需要借助一些工具或库来实现Markdown到富文本的转换。例如，Towxml是一个常用的库，它可以将HTML和Markdown转换为WXML（WeiXin Markup Language），从而在微信小程序中显示。
2.集成转换库：将选定的转换库（如Towxml）集成到你的微信小程序项目中。这通常涉及将库文件添加到你的项目目录中，并在需要的地方引入和使用这些文件。
3.转换和显示Markdown内容：在你的小程序代码中，使用转换库将Markdown内容转换为WXML格式的富文本。然后，你可以将转换后的富文本内容显示在适当的位置，如页面上的文本组件中。
逐行显示效果 在微信小程序中实现文本逐行出现的效果，可以通过动画或者定时器来实现。
下面是一个使用定时器实现逐行显示文本的简单示例：
首先，你需要在小程序的WXML文件中定义文本内容和显示文本的视图：
xml复制代码&lt;!-- index.wxml --&gt; &lt;view class=&#34;container&#34;&gt; &lt;view class=&#34;text-line&#34; wx:for=&#34;{{lines}}&#34; wx:key=&#34;index&#34; wx:if=&#34;{{lines[index].show}}&#34;&gt; {{lines[index].text}} &lt;/view&gt; &lt;/view&gt; 然后，在对应的WXSS文件中定义样式：
css复制代码/* index.wxss */ .container { /* 设置容器样式 */ padding: 20rpx; } .">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-10T11:25:53+08:00">
    <meta property="article:modified_time" content="2024-04-10T11:25:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【小程序】常用方法、知识点汇总1</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>欢迎来到《小5讲堂》<br> 这是《小程序》系列文章，每篇文章将以博主理解的角度展开讲解，<br> 温馨提示：博主能力有限，理解水平有限，若有不对之处望指正！</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/f2/3a/dHQbmajL_o.png" alt="在这里插入图片描述"></p> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_8" rel="nofollow">前言</a></li><li><a href="#_12" rel="nofollow">请求超时</a></li><li><a href="#Markdown_31" rel="nofollow">Markdown解析</a></li><li><a href="#_38" rel="nofollow">逐行显示效果</a></li><li><a href="#_56" rel="nofollow">文本变动事件</a></li><li><a href="#_82" rel="nofollow">转发朋友圈</a></li><li><a href="#_105" rel="nofollow">推荐文章</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_8"></a>前言</h2> 
<p>最近在开发微信小程序，时间久了总会把一些常用的方法忘记了，<br> 因此这篇文章汇总下一些接触到且容易忘记的知识点。</p> 
<h2><a id="_12"></a>请求超时</h2> 
<p>wx.request，默认情况下，接口请求超时的时间为10秒，可以设置超时时间。<br> 超时，指的是在一定时间内，如果请求接口没有响应，那么请求直接结束。<br> 下面代码设置了超时时间为20秒</p> 
<pre><code class="prism language-bash">wx.request<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>  
  url: <span class="token string">'https://example.com/api'</span>,  
  method: <span class="token string">'GET'</span>,  
  timeout: <span class="token number">20000</span>, // 设置超时时间为20秒  
  success<span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    // 请求成功后的处理  
  <span class="token punctuation">}</span>,  
  fail<span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    // 请求失败的处理  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="Markdown_31"></a>Markdown解析</h2> 
<p>微信小程序显示Markdown内容，主要可以通过将Markdown转换为富文本显示的方式来实现。<br> 以下是具体步骤和可能用到的工具：<br> 1.选择转换工具：微信小程序本身并不直接支持Markdown的解析和显示，因此需要借助一些工具或库来实现Markdown到富文本的转换。例如，Towxml是一个常用的库，它可以将HTML和Markdown转换为WXML（WeiXin Markup Language），从而在微信小程序中显示。<br> 2.集成转换库：将选定的转换库（如Towxml）集成到你的微信小程序项目中。这通常涉及将库文件添加到你的项目目录中，并在需要的地方引入和使用这些文件。<br> 3.转换和显示Markdown内容：在你的小程序代码中，使用转换库将Markdown内容转换为WXML格式的富文本。然后，你可以将转换后的富文本内容显示在适当的位置，如页面上的文本组件中。</p> 
<h2><a id="_38"></a>逐行显示效果</h2> 
<p>在微信小程序中实现文本逐行出现的效果，可以通过动画或者定时器来实现。<br> 下面是一个使用定时器实现逐行显示文本的简单示例：<br> 首先，你需要在小程序的WXML文件中定义文本内容和显示文本的视图：</p> 
<pre><code class="prism language-bash">xml复制代码<span class="token operator">&lt;</span><span class="token operator">!</span>-- index.wxml --<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"text-line"</span> wx:for<span class="token operator">=</span><span class="token string">"{<!-- -->{lines}}"</span> wx:key<span class="token operator">=</span><span class="token string">"index"</span> wx:if<span class="token operator">=</span><span class="token string">"{<!-- -->{lines[index].show}}"</span><span class="token operator">&gt;</span>      <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>lines<span class="token punctuation">[</span>index<span class="token punctuation">]</span>.text<span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
</code></pre> 
<p>然后，在对应的WXSS文件中定义样式：</p> 
<pre><code class="prism language-bash">css复制代码/* index.wxss */  .container <span class="token punctuation">{<!-- --></span>    /* 设置容器样式 */    padding: 20rpx<span class="token punctuation">;</span>  <span class="token punctuation">}</span>    .text-line <span class="token punctuation">{<!-- --></span>    /* 设置每行文本的样式 */    margin-bottom: 10rpx<span class="token punctuation">;</span>  <span class="token punctuation">}</span>
</code></pre> 
<p>接下来，在JS文件中设置初始数据和逐行显示文本的逻辑：</p> 
<pre><code class="prism language-bash">javascript复制代码// index.js  Page<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>    data: <span class="token punctuation">{<!-- --></span>      lines: <span class="token punctuation">[</span>        <span class="token punctuation">{<!-- --></span> text: <span class="token string">'这是第一行文本'</span>, show: <span class="token boolean">false</span> <span class="token punctuation">}</span>,        <span class="token punctuation">{<!-- --></span> text: <span class="token string">'这是第二行文本'</span>, show: <span class="token boolean">false</span> <span class="token punctuation">}</span>,        <span class="token punctuation">{<!-- --></span> text: <span class="token string">'这是第三行文本'</span>, show: <span class="token boolean">false</span> <span class="token punctuation">}</span>,        // <span class="token punctuation">..</span>. 可以添加更多行      <span class="token punctuation">]</span>,      currentIndex: <span class="token number">0</span>, // 当前显示的行索引    <span class="token punctuation">}</span>,      onLoad: <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      this.showTextLineByLine<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>,      showTextLineByLine: <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      const that <span class="token operator">=</span> this<span class="token punctuation">;</span>      const intervalId <span class="token operator">=</span> setInterval<span class="token punctuation">(</span><span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>that.data.currentIndex <span class="token operator">&lt;</span> that.data.lines.length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>          that.setData<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>            <span class="token punctuation">[</span><span class="token string">'lines['</span> + that.data.currentIndex + <span class="token string">'].show'</span><span class="token punctuation">]</span>: true,          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          that.data.currentIndex++<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>          clearInterval<span class="token punctuation">(</span>intervalId<span class="token punctuation">)</span><span class="token punctuation">;</span> // 停止定时器        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>, <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> // 每秒显示一行，可以根据需要调整时间间隔    <span class="token punctuation">}</span>,  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_56"></a>文本变动事件</h2> 
<p>在微信小程序中，文本本身并没有一个直接的“变动事件”。但是，你可以通过不同的方式监听与文本变动相关的用户操作或数据变化，从而触发相应的处理逻辑。<br> 以下是一些与文本变动相关的事件和处理方式：</p> 
<ol><li>输入框内容变动<br> 如果你有一个或组件，并希望监听用户输入的内容变动，可以使用bindinput事件。</li></ol> 
<pre><code class="prism language-bash">xml复制代码<span class="token operator">&lt;</span>input <span class="token assign-left variable">bindinput</span><span class="token operator">=</span><span class="token string">"inputChanged"</span> /<span class="token operator">&gt;</span>
</code></pre> 
<p>在对应的JS文件中：</p> 
<pre><code class="prism language-bash">javascript复制代码Page<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>    data: <span class="token punctuation">{<!-- --></span>      inputValue: <span class="token string">''</span>    <span class="token punctuation">}</span>,    inputChanged: function<span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      this.setData<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>        inputValue: e.detail.value // 获取输入框当前的值      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      // 这里可以执行其他与文本变动相关的逻辑    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li> <p>文本选择或复制<br> 如果你想要监听文本的选择或复制操作，可以使用bindlongpress事件来捕捉长按操作，然后提示用户选择或复制文本。不过，微信小程序并没有直接提供文本选择或复制完成的事件。</p> </li><li> <p>数据绑定导致的文本变动<br> 当页面数据发生变化时，通过数据绑定到文本上的内容也会自动更新。这种变动并不是通过事件触发的，而是响应数据的变化。你可以在其他地方（如网络请求回调、定时器、其他事件处理函数等）使用this.setData()来更新数据，从而间接地改变文本内容。</p> </li><li> <p>文本编辑组件（富文本编辑器）<br> 对于更复杂的文本编辑需求，如富文本编辑，你可能需要使用第三方组件或自定义组件。这些组件可能会提供自己的事件来监听文本内容的变动。</p> </li><li> <p>监听滚动或视图变化<br> 如果你想要根据文本的滚动位置或视图的变化来执行某些操作，可以使用bindscroll或page-scroll等事件。但这些事件并不是直接监听文本内容的变动，而是与页面的滚动或视图的变化相关。</p> </li></ol> 
<h2><a id="_82"></a>转发朋友圈</h2> 
<pre><code class="prism language-bash">Page<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function-name function">onShareAppMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    // 设置转发内容
    <span class="token builtin class-name">return</span> <span class="token punctuation">{<!-- --></span>
      title: <span class="token string">'分享标题'</span>,
      path: <span class="token string">'/pages/index/index'</span>,
      imageUrl: <span class="token string">'/images/share.jpg'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>,
  <span class="token function-name function">onShareTimeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    // 设置分享朋友圈内容
    <span class="token builtin class-name">return</span> <span class="token punctuation">{<!-- --></span>
      title: <span class="token string">'分享标题'</span>,
      query: <span class="token string">'key=value'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<h2><a id="_105"></a>推荐文章</h2> 
<p><a href="https://blog.csdn.net/lmy_520/article/details/114767671">【小程序】小程序登录、用户信息相关接口调整</a></p> 
<p><a href="https://blog.csdn.net/lmy_520/article/details/114461750">【小程序】小程序之map组件bindmarkertap标记点点击事件无反应的原因</a></p> 
<p><a href="https://blog.csdn.net/lmy_520/article/details/112677899">【小程序】腾讯位置服务之小程序简单使用以及显示附近WC步行路线</a></p> 
<blockquote> 
 <p>总结：温故而知新，不同阶段重温知识点，会有不一样的认识和理解，博主将巩固一遍知识点，并以实践方式和大家分享，若能有所帮助和收获，这将是博主最大的创作动力和荣幸。也期待认识更多优秀新老博主。</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9e0d2c10579924cfadd5d3d387f6306b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">精通SQL：数据库工程师必须掌握的UPDATE操作全解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6839ea1421f14a9a4cc135b37bb3639f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Stable Diffusion安装（非秋叶包一键部署）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>