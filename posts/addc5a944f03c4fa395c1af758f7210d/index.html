<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>「题解」关于sizeof陷阱,无符号整形,变种水仙花数 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/addc5a944f03c4fa395c1af758f7210d/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="「题解」关于sizeof陷阱,无符号整形,变种水仙花数">
  <meta property="og:description" content="🚀🚀🚀大家觉不错的话，就恳求大家点点关注，点点小爱心，指点指点🚀🚀🚀
sizeof陷阱以及无符号整形 让我们看一下这段代码：​​​​​​​
int main(){ int x = -1; unsigned int y = 2; if (x &gt; y){ printf(&#34;x is greater&#34;); } else{ printf(&#34;y is greater&#34;); } return 0; } 大家会认为结果是多少呢？结果会是&#34;y is greater&#34;？让我们看一下运行结果吧
为什么会出现这种结果呢，由于x是有符号数-1，内存中是全1，当有符号的x和无符号数进行比较时，x会隐式类型转换被当做无符号数，是一个很大的数,输出结果是x is greater
至于这个很大的数是偶少呢
int x=-1 原码：10000000000000000000000000000001 反码：11111111111111111111111111111110 补码：11111111111111111111111111111111 unsigned int x=-1 补码：11111111111111111111111111111111 没有符号则 原码等于补码：11111111111111111111111111111111 unsigned int y=2 原码：00000000000000000000000000000010 注意：此时x,y都是无符号数，二进制码的最高位不是符号位。 肉眼可见11111111111111111111111111111111&gt;00000000000000000000000000000010 所以x&gt;y 还有一道题异曲同工
#include &lt;stdio.h&gt; int i; int main(){ i--; if (i &gt; sizeof(i)){ printf(&#34;&gt;\n&#34;); } else{ printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-02-08T22:46:11+08:00">
    <meta property="article:modified_time" content="2023-02-08T22:46:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">「题解」关于sizeof陷阱,无符号整形,变种水仙花数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#be191c;"><strong>🚀🚀🚀大家觉不错的话，就恳求大家点点关注，点点小爱心，指点指点🚀🚀🚀</strong></span></p> 
</blockquote> 
<h3>sizeof陷阱以及无符号整形</h3> 
<blockquote> 
 <p><strong>让我们看一下这段代码：</strong>​​​​​​​</p> 
 <pre><code class="language-cpp"> int main(){
int x = -1;
unsigned int y = 2;
if (x &gt; y){
printf("x is greater");
}
else{
    printf("y is greater");
}
return 0;
}</code></pre> 
 <p>大家会认为结果是多少呢？结果会是"y is greater"？让我们看一下运行结果吧</p> 
 <p><img alt="" height="122" src="https://images2.imgbox.com/81/fb/ltBaiXZV_o.png" width="1134"></p> 
 <p> 为什么会出现这种结果呢，由于x是有符号数-1，内存中是全1，当有符号的x和无符号数进行比较时，x会隐式类型转换被当做无符号数，是一个很大的数,输出结果是x is greater</p> 
 <p>至于这个很大的数是偶少呢</p> 
 <pre><code class="language-cpp">int x=-1    原码：10000000000000000000000000000001
            反码：11111111111111111111111111111110
            补码：11111111111111111111111111111111
unsigned int x=-1    补码：11111111111111111111111111111111
没有符号则             原码等于补码：11111111111111111111111111111111
unsigned int y=2     原码：00000000000000000000000000000010
注意：此时x,y都是无符号数，二进制码的最高位不是符号位。
肉眼可见11111111111111111111111111111111&gt;00000000000000000000000000000010
所以x&gt;y</code></pre> 
 <p>还有一道题异曲同工</p> 
 <pre><code class="language-cpp">#include &lt;stdio.h&gt;
int i;
int main(){
    i--;
    if (i &gt; sizeof(i)){
        printf("&gt;\n");
    }
    else{
        printf("&lt;\n");
    }
    return 0;
}</code></pre> 
 <p>C语言中，0为假，非0即为真。</p> 
 <p>全局变量，没有给初始值时，编译其会默认将其初始化为0。i的初始值为0，i--结果-1，i为整形，sizeof(i)求i类型大小是4，按照此分析来看，结果应该选择B，<strong>但是sizeof的返回值类型实际为无符号整形</strong>，因此编译器会自动将左侧i自动转换为无符号整形的数据，-1对应的无符号整形是一个非常大的数字，超过4或者8，所以输出‘&gt;’</p> 
 <p>这道题其实很隐蔽，真是虾仁猪心！！！ </p> 
 <p>注：<strong><span style="color:#fe2c24;">sizeof的返回值类型实际为无符号整形</span>，如果有符号的整形数据与无符号整形的数据比较时，无符号整形的数据自动转换为无符号整形的数据</strong></p> 
</blockquote> 
<blockquote> 
 <h4>sizeof运行规则</h4> 
 <p>一般表达式的运算是在运行时执行的，而sizeof是一个编译阶段就执行的运算符，在其内的任何运算都不执行。</p> 
 <pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
int i = 1;
sizeof(i++);
printf("%d\n", i);
return 0;
}
一般表达式的运算是在运行时执行的，而sizeof是一个编译阶段就执行的运算符，在其内的任何运算都不执行
所以i++是不会计算的，++i同样也是不会计算的，所以i的值还是等于1</code></pre> 
</blockquote> 
<p></p> 
<h3>变种水仙花数</h3> 
<blockquote> 
 <p><strong>变种水仙花数 - Lily Number：把任意的数字，从中间拆分成两个数字，比如1461 可以拆分成（1和461）,（14和61）,（146和1),如果所有拆分后的乘积之和等于自身，则是一个Lily Number。 </strong></p> 
 <p>例如： </p> 
 <p>655 = 6 * 55 + 65 * 5 </p> 
 <p>1461 = 1*461 + 14*61 + 146*1 </p> 
 <p><strong>输入描述：无</strong></p> 
 <p><strong>输出描述：一行，5位数中的所有 Lily Number，每两个数之间间隔一个空格</strong></p> 
 <p></p> 
 <pre><code class="language-cpp">#include&lt;stdio.h&gt;
#include&lt;math.h&gt;
int main(){
for(int i=10000;i&lt;99999;i++){
int sum=0;
for(int j=1;j&lt;=4;j++){
int a=0,b=0;
a=i%(int)pow(10,j);
b=i/pow(10,j);
sum+=a*b;
}
if(i==sum){
printf("%d ",i);
}
}
return 0;
}</code></pre> 
 <p><strong>解题思路：</strong></p> 
 <pre><code class="language-cpp"> 12345
 1*2345+12*345+123*45+1234*5
首先我们得这个五位数拆分成4对数据，
int a=0,b=0;
a=i%(int)pow(10,j);
b=i/pow(10,j);
用局部变量a,b分别去保存这一对数据，用局部变量sum保存a*b的值，经历4次循环，sum累加后的值与本身这个数比较，就可以判断出是否是变种的水仙花数</code></pre> 
</blockquote> 
<p></p> 
<blockquote> 
 <p><span style="color:#b95514;"><strong>🌸🌸🌸如果大家还有不懂或者建议都可以发在评论区，我们共同探讨，共同学习，共同进步。谢谢大家！ 🌸🌸🌸  ​​​​​​​</strong></span></p> 
</blockquote> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2926f6ed617b62b202b7dfdb38cb22b3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSS，HTML，JS 以及Vue前端面试题八股文总结【看完你就变高手】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97a65c0a3ecef9bd792a30b9af016977/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">eclipse创建第一个java web项目并运行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>