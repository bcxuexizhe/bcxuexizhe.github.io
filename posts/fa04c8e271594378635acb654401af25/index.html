<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€æ¶æ„ä¹‹è·¯ã€‘æå‡åç«¯æ¥å£æ€§èƒ½çš„å®æˆ˜æŠ€å·§ - ç¼–ç¨‹å­¦ä¹ è€…</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/fa04c8e271594378635acb654401af25/">
  <meta property="og:site_name" content="ç¼–ç¨‹å­¦ä¹ è€…">
  <meta property="og:title" content="ã€æ¶æ„ä¹‹è·¯ã€‘æå‡åç«¯æ¥å£æ€§èƒ½çš„å®æˆ˜æŠ€å·§">
  <meta property="og:description" content="ä½ çœ¼ä¸­çš„ITè¡Œä¸šç°çŠ¶ä¸æœªæ¥è¶‹åŠ¿ æ–‡ç« ç›®å½• ä½ çœ¼ä¸­çš„ITè¡Œä¸šç°çŠ¶ä¸æœªæ¥è¶‹åŠ¿å¼ºçƒˆæ¨èå¼•è¨€ä¼˜åŒ–æŠ€å·§1. æ•°æ®åº“ä¼˜åŒ–2. ä»£ç ä¼˜åŒ–3. ç¼“å­˜æœºåˆ¶4. è´Ÿè½½å‡è¡¡5. ç½‘ç»œä¼˜åŒ–6. æ—¥å¿—å’Œç›‘æ§7. æœåŠ¡å™¨ä¼˜åŒ–8. APIè®¾è®¡ä¼˜åŒ–9. å®‰å…¨æ€§ æ€»ç»“å¼ºçƒˆæ¨èä¸“æ é›†é”¦å†™åœ¨æœ€å å¼ºçƒˆæ¨è å‰äº›å¤©å‘ç°äº†ä¸€ä¸ªå·¨ç‰›çš„äººå·¥æ™ºèƒ½å­¦ä¹ ç½‘ç«™ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œé£è¶£å¹½é»˜ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:äººå·¥æ™ºèƒ½
å¼•è¨€ åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œåç«¯æ¥å£çš„æ€§èƒ½ä¼˜åŒ–æ˜¯ç¡®ä¿ç³»ç»Ÿé«˜æ•ˆè¿è¡Œçš„å…³é”®å› ç´ ä¹‹ä¸€ã€‚
éšç€ç”¨æˆ·æ•°é‡çš„å¢åŠ å’Œæ•°æ®é‡çš„å¢é•¿ï¼Œæœªä¼˜åŒ–çš„åç«¯æ¥å£ä¼šå¯¼è‡´å“åº”æ—¶é—´å˜é•¿ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™ï¼Œç”šè‡³å¼•å‘ç³»ç»Ÿå´©æºƒã€‚
æœ¬æ–‡å°†æ¢è®¨ä¸€äº›å¸¸è§ä¸”æœ‰æ•ˆçš„åç«¯æ¥å£æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Œå¹¶é€šè¿‡å…·ä½“çš„Javaä»£ç å®ä¾‹æ¥å±•ç¤ºå¦‚ä½•å®æ–½è¿™äº›ä¼˜åŒ–ç­–ç•¥ã€‚
æ— è®ºæ˜¯æ•°æ®åº“ä¼˜åŒ–ã€ä»£ç ä¼˜åŒ–ã€ç¼“å­˜æœºåˆ¶ã€è´Ÿè½½å‡è¡¡ã€ç½‘ç»œä¼˜åŒ–ï¼Œè¿˜æ˜¯æ—¥å¿—ç›‘æ§å’ŒæœåŠ¡å™¨ä¼˜åŒ–ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚çš„æ”¹å–„éƒ½èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ã€‚
ä¼˜åŒ–æŠ€å·§ 1. æ•°æ®åº“ä¼˜åŒ– ç´¢å¼•ï¼šç¡®ä¿æ•°æ®åº“è¡¨ä¸­çš„å…³é”®å­—æ®µæœ‰é€‚å½“çš„ç´¢å¼•ã€‚
ç¤ºä¾‹ï¼šåœ¨ç”¨æˆ·è¡¨ï¼ˆusersï¼‰ä¸­ï¼Œç»™emailå­—æ®µæ·»åŠ ç´¢å¼•ï¼š
CREATE INDEX idx_email ON users(email); æŸ¥è¯¢ä¼˜åŒ–ï¼šåˆ†æå’Œä¼˜åŒ–SQLæŸ¥è¯¢ï¼Œé¿å…å…¨è¡¨æ‰«æï¼Œä½¿ç”¨è¿æ¥ï¼ˆJOINï¼‰æ—¶æ³¨æ„é¿å…ç¬›å¡å°”ç§¯ã€‚
ç¤ºä¾‹ï¼šé¿å…å…¨è¡¨æ‰«æï¼Œé€šè¿‡ç´¢å¼•å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼š
SELECT * FROM orders WHERE user_id = 12345; ç¼“å­˜ï¼šä½¿ç”¨ç¼“å­˜æŠ€æœ¯ï¼ˆå¦‚Redisã€Memcachedï¼‰æ¥å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°ã€‚
ç¤ºä¾‹ï¼šä½¿ç”¨Redisç¼“å­˜ç”¨æˆ·ä¿¡æ¯ï¼š
import redis.clients.jedis.Jedis; public class CacheExample { private Jedis jedis = new Jedis(&#34;localhost&#34;); public String getUserInfo(int userId) { String key = &#34;user:&#34; &#43; userId; String userInfo = jedis.get(key); if (userInfo == null) { userInfo = getUserInfoFromDb(userId); jedis.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-17T08:00:00+08:00">
    <meta property="article:modified_time" content="2024-05-17T08:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å­¦ä¹ è€…" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å­¦ä¹ è€…</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€æ¶æ„ä¹‹è·¯ã€‘æå‡åç«¯æ¥å£æ€§èƒ½çš„å®æˆ˜æŠ€å·§</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="IT_0"></a>ä½ çœ¼ä¸­çš„ITè¡Œä¸šç°çŠ¶ä¸æœªæ¥è¶‹åŠ¿</h3> 
<p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><ul><li><a href="#IT_0" rel="nofollow">ä½ çœ¼ä¸­çš„ITè¡Œä¸šç°çŠ¶ä¸æœªæ¥è¶‹åŠ¿</a></li><li><ul><li><a href="#font_colordd0000font_7" rel="nofollow"><font color="#dd0000">å¼ºçƒˆæ¨è</font></a></li><li><a href="#_19" rel="nofollow">å¼•è¨€</a></li><li><a href="#_35" rel="nofollow">ä¼˜åŒ–æŠ€å·§</a></li><li><ul><li><a href="#1__37" rel="nofollow">1. æ•°æ®åº“ä¼˜åŒ–</a></li><li><a href="#2__123" rel="nofollow">2. ä»£ç ä¼˜åŒ–</a></li><li><a href="#3__183" rel="nofollow">3. ç¼“å­˜æœºåˆ¶</a></li><li><a href="#4__249" rel="nofollow">4. è´Ÿè½½å‡è¡¡</a></li><li><a href="#5__278" rel="nofollow">5. ç½‘ç»œä¼˜åŒ–</a></li><li><a href="#6__309" rel="nofollow">6. æ—¥å¿—å’Œç›‘æ§</a></li><li><a href="#7__338" rel="nofollow">7. æœåŠ¡å™¨ä¼˜åŒ–</a></li><li><a href="#8_API_356" rel="nofollow">8. APIè®¾è®¡ä¼˜åŒ–</a></li><li><a href="#9__395" rel="nofollow">9. å®‰å…¨æ€§</a></li></ul> 
    </li><li><a href="#_407" rel="nofollow">æ€»ç»“</a></li><li><a href="#font_colordd0000font_425" rel="nofollow"><font color="#dd0000">å¼ºçƒˆæ¨è</font></a></li><li><a href="#_443" rel="nofollow">ä¸“æ é›†é”¦</a></li><li><a href="#_469" rel="nofollow">å†™åœ¨æœ€å</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/99/45/HY2vyTqi_o.gif" alt="579a429daf314744b995f37351b46548"> 
<p></p> 
<h4><a id="font_colordd0000font_7"></a><font color="#dd0000">å¼ºçƒˆæ¨è</font></h4> 
<p><font color="#dd0000">å‰äº›å¤©å‘ç°äº†ä¸€ä¸ªå·¨ç‰›çš„äººå·¥æ™ºèƒ½å­¦ä¹ ç½‘ç«™ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œé£è¶£å¹½é»˜ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:</font><a href="https://www.captainbed.cn/venus" rel="nofollow">äººå·¥æ™ºèƒ½</a></p> 
<p><img src="https://images2.imgbox.com/eb/c9/yGjgDCBV_o.jpg" alt="b004071ozy_05_amzn"></p> 
<hr> 
<h4><a id="_19"></a>å¼•è¨€</h4> 
<p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œåç«¯æ¥å£çš„æ€§èƒ½ä¼˜åŒ–æ˜¯ç¡®ä¿ç³»ç»Ÿé«˜æ•ˆè¿è¡Œçš„å…³é”®å› ç´ ä¹‹ä¸€ã€‚</p> 
<p>éšç€ç”¨æˆ·æ•°é‡çš„å¢åŠ å’Œæ•°æ®é‡çš„å¢é•¿ï¼Œæœªä¼˜åŒ–çš„åç«¯æ¥å£ä¼šå¯¼è‡´å“åº”æ—¶é—´å˜é•¿ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™ï¼Œç”šè‡³å¼•å‘ç³»ç»Ÿå´©æºƒã€‚</p> 
<p>æœ¬æ–‡å°†æ¢è®¨ä¸€äº›å¸¸è§ä¸”æœ‰æ•ˆçš„åç«¯æ¥å£æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Œå¹¶é€šè¿‡å…·ä½“çš„Javaä»£ç å®ä¾‹æ¥å±•ç¤ºå¦‚ä½•å®æ–½è¿™äº›ä¼˜åŒ–ç­–ç•¥ã€‚</p> 
<p>æ— è®ºæ˜¯æ•°æ®åº“ä¼˜åŒ–ã€ä»£ç ä¼˜åŒ–ã€ç¼“å­˜æœºåˆ¶ã€è´Ÿè½½å‡è¡¡ã€ç½‘ç»œä¼˜åŒ–ï¼Œè¿˜æ˜¯æ—¥å¿—ç›‘æ§å’ŒæœåŠ¡å™¨ä¼˜åŒ–ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚çš„æ”¹å–„éƒ½èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p> 
<hr> 
<h4><a id="_35"></a>ä¼˜åŒ–æŠ€å·§</h4> 
<h5><a id="1__37"></a>1. æ•°æ®åº“ä¼˜åŒ–</h5> 
<ul><li> <p><strong>ç´¢å¼•</strong>ï¼šç¡®ä¿æ•°æ®åº“è¡¨ä¸­çš„å…³é”®å­—æ®µæœ‰é€‚å½“çš„ç´¢å¼•ã€‚</p> <p>ç¤ºä¾‹ï¼šåœ¨ç”¨æˆ·è¡¨ï¼ˆusersï¼‰ä¸­ï¼Œç»™emailå­—æ®µæ·»åŠ ç´¢å¼•ï¼š</p> <pre><code>CREATE INDEX idx_email ON users(email);
</code></pre> </li><li> <p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šåˆ†æå’Œä¼˜åŒ–SQLæŸ¥è¯¢ï¼Œé¿å…å…¨è¡¨æ‰«æï¼Œä½¿ç”¨è¿æ¥ï¼ˆJOINï¼‰æ—¶æ³¨æ„é¿å…ç¬›å¡å°”ç§¯ã€‚</p> <p>ç¤ºä¾‹ï¼šé¿å…å…¨è¡¨æ‰«æï¼Œé€šè¿‡ç´¢å¼•å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼š</p> <pre><code>SELECT * FROM orders WHERE user_id = 12345;
</code></pre> </li><li> <p><strong>ç¼“å­˜</strong>ï¼šä½¿ç”¨ç¼“å­˜æŠ€æœ¯ï¼ˆå¦‚Redisã€Memcachedï¼‰æ¥å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°ã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨Redisç¼“å­˜ç”¨æˆ·ä¿¡æ¯ï¼š</p> <pre><code>import redis.clients.jedis.Jedis;

public class CacheExample {
    private Jedis jedis = new Jedis("localhost");

    public String getUserInfo(int userId) {
        String key = "user:" + userId;
        String userInfo = jedis.get(key);
        if (userInfo == null) {
            userInfo = getUserInfoFromDb(userId);
            jedis.set(key, userInfo);
        }
        return userInfo;
    }

    private String getUserInfoFromDb(int userId) {
        // ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘
        return "user info from db";
    }
}
</code></pre> </li><li> <p><strong>åˆ†åº“åˆ†è¡¨</strong>ï¼šå¯¹äºå¤§æ•°æ®é‡çš„è¡¨ï¼Œè€ƒè™‘è¿›è¡Œåˆ†åº“åˆ†è¡¨å¤„ç†ã€‚</p> <p>ç¤ºä¾‹ï¼šå°†è®¢å•è¡¨æŒ‰ç…§ç”¨æˆ·IDè¿›è¡Œåˆ†è¡¨ï¼š</p> <pre><code>-- orders_0, orders_1, ..., orders_9
SELECT * FROM orders_0 WHERE user_id % 10 = 0;
</code></pre> </li><li> <p><strong>æ•°æ®åº“è¿æ¥æ± </strong>ï¼šè°ƒæ•´æ•°æ®åº“è¿æ¥æ± çš„å¤§å°ï¼Œç¡®ä¿è¿æ¥æ•°è¶³å¤Ÿä½†ä¸è¿‡è½½ã€‚</p> <p>ç¤ºä¾‹ï¼šé…ç½®æ•°æ®åº“è¿æ¥æ± ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨HikariCPï¼‰ï¼š</p> <pre><code>import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;

public class DataSourceExample {
    private static HikariDataSource dataSource;

    static {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl("jdbc:mysql://localhost:3306/dbname");
        config.setUsername("user");
        config.setPassword("password");
        config.setMaximumPoolSize(20);
        dataSource = new HikariDataSource(config);
    }

    public static HikariDataSource getDataSource() {
        return dataSource;
    }
}
</code></pre> </li></ul> 
<h5><a id="2__123"></a>2. ä»£ç ä¼˜åŒ–</h5> 
<ul><li> <p><strong>ç®—æ³•å’Œæ•°æ®ç»“æ„</strong>ï¼šé€‰æ‹©åˆé€‚çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ä»¥æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆHashMapï¼‰æé«˜æŸ¥æ‰¾æ•ˆç‡ï¼š</p> <pre><code>import java.util.HashMap;
import java.util.Map;

public class DataStructureExample {
    public static void main(String[] args) {
        Map&lt;String, Integer&gt; data = new HashMap&lt;&gt;();
        data.put("a", 1);
        data.put("b", 2);
        data.put("c", 3);

        Integer result = data.get("b");  // O(1) æ—¶é—´å¤æ‚åº¦
        System.out.println(result);
    }
}
</code></pre> </li><li> <p><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šä½¿ç”¨å¼‚æ­¥å¤„ç†æ¥æé«˜å¹¶å‘æ€§èƒ½ï¼Œé¿å…é˜»å¡æ“ä½œã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨å¼‚æ­¥I/Oå¤„ç†ç½‘ç»œè¯·æ±‚ï¼ˆå¦‚ä½¿ç”¨CompletableFutureï¼‰ï¼š</p> <pre><code>import java.util.concurrent.CompletableFuture;
import java.util.concurrent.ExecutionException;

public class AsyncExample {
    public static void main(String[] args) throws ExecutionException, InterruptedException {
        CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
            // å¼‚æ­¥æ‰§è¡Œä»»åŠ¡
            return performAsyncTask();
        });

        // å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–æ“ä½œ

        // è·å–å¼‚æ­¥ä»»åŠ¡ç»“æœ
        String result = future.get();
        System.out.println(result);
    }

    private static String performAsyncTask() {
        // æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡ï¼Œå¦‚ç½‘ç»œè¯·æ±‚
        return "Async task result";
    }
}
</code></pre> </li><li> <p><strong>æ‰¹é‡å¤„ç†</strong>ï¼šå¯¹äºæ‰¹é‡æ•°æ®æ“ä½œï¼Œå°½é‡é‡‡ç”¨æ‰¹é‡å¤„ç†è€Œä¸æ˜¯é€æ¡å¤„ç†ã€‚</p> </li></ul> 
<h5><a id="3__183"></a>3. ç¼“å­˜æœºåˆ¶</h5> 
<ul><li> <p><strong>æœ¬åœ°ç¼“å­˜</strong>ï¼šåœ¨åº”ç”¨æœåŠ¡å™¨å†…éƒ¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ¥å‡å°‘å¯¹æ•°æ®åº“å’Œè¿œç¨‹æœåŠ¡çš„è°ƒç”¨ã€‚</p> <p>ç¤ºä¾‹ï¼šåœ¨åº”ç”¨æœåŠ¡å™¨å†…éƒ¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼ˆå¦‚ä½¿ç”¨Guava Cacheï¼‰ï¼š</p> <pre><code>import com.google.common.cache.CacheBuilder;
import com.google.common.cache.CacheLoader;
import com.google.common.cache.LoadingCache;

import java.util.concurrent.TimeUnit;

public class LocalCacheExample {
    private static LoadingCache&lt;Integer, String&gt; cache = CacheBuilder.newBuilder()
            .expireAfterWrite(10, TimeUnit.MINUTES)
            .build(new CacheLoader&lt;Integer, String&gt;() {
                @Override
                public String load(Integer key) throws Exception {
                    return getUserInfoFromDb(key);
                }
            });

    public static void main(String[] args) throws Exception {
        String userInfo = cache.get(12345);
        System.out.println(userInfo);
    }

    private static String getUserInfoFromDb(int userId) {
        // ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘
        return "user info from db";
    }
}
</code></pre> </li><li> <p><strong>åˆ†å¸ƒå¼ç¼“å­˜</strong>ï¼šä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼ˆå¦‚Redisã€Memcachedï¼‰æ¥å…±äº«ç¼“å­˜æ•°æ®ã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼ˆå¦‚Redisï¼‰ï¼š</p> <pre><code>import redis.clients.jedis.Jedis;

public class DistributedCacheExample {
    private Jedis jedis = new Jedis("localhost");

    public String getUserInfo(int userId) {
        String key = "user:" + userId;
        String userInfo = jedis.get(key);
        if (userInfo == null) {
            userInfo = getUserInfoFromDb(userId);
            jedis.set(key, userInfo);
        }
        return userInfo;
    }

    private String getUserInfoFromDb(int userId) {
        // ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘
        return "user info from db";
    }
}
</code></pre> </li></ul> 
<h5><a id="4__249"></a>4. è´Ÿè½½å‡è¡¡</h5> 
<ul><li> <p><strong>è´Ÿè½½å‡è¡¡å™¨</strong>ï¼šä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼ˆå¦‚NGINXã€HAProxyï¼‰æ¥åˆ†æ•£è¯·æ±‚å‹åŠ›ã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨NGINXè¿›è¡Œè´Ÿè½½å‡è¡¡é…ç½®ï¼š</p> <pre><code>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}
</code></pre> </li><li> <p><strong>æœåŠ¡åˆ†ç‰‡</strong>ï¼šå°†æœåŠ¡æŒ‰åŠŸèƒ½æˆ–æ•°æ®åˆ†ç‰‡ï¼Œéƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå‡è½»å•ä¸ªæœåŠ¡çš„å‹åŠ›ã€‚</p> </li></ul> 
<h5><a id="5__278"></a>5. ç½‘ç»œä¼˜åŒ–</h5> 
<ul><li> <p><strong>CDN</strong>ï¼šä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰æ¥ç¼“å­˜é™æ€èµ„æºï¼ŒåŠ é€Ÿèµ„æºåŠ è½½ã€‚</p> 
  <ul><li>ç¤ºä¾‹ï¼šä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æºåŠ è½½ï¼Œå¯ä»¥é€šè¿‡é…ç½®CDNæœåŠ¡æ¥å®ç°ï¼Œå¦‚Cloudflareã€‚</li></ul> </li><li> <p><strong>å‹ç¼©æ•°æ®</strong>ï¼šä½¿ç”¨æ•°æ®å‹ç¼©ï¼ˆå¦‚GZIPï¼‰æ¥å‡å°‘ä¼ è¾“æ•°æ®é‡ã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨Spring Booté…ç½®GZIPå‹ç¼©ï¼š</p> <pre><code>server:
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/xml,text/plain
    min-response-size: 1024

</code></pre> </li><li> <p><strong>ä¼˜åŒ–åè®®</strong>ï¼šä½¿ç”¨é«˜æ•ˆçš„é€šä¿¡åè®®ï¼ˆå¦‚HTTP/2ï¼‰æ¥æé«˜ä¼ è¾“æ•ˆç‡ã€‚</p> <p>ç¤ºä¾‹ï¼šé…ç½®Spring Bootæ”¯æŒHTTP/2ï¼š</p> <pre><code>server:
  http2:
    enabled: true
</code></pre> </li></ul> 
<h5><a id="6__309"></a>6. æ—¥å¿—å’Œç›‘æ§</h5> 
<ul><li> <p><strong>æ—¥å¿—åˆ†æ</strong>ï¼šé€šè¿‡åˆ†ææ—¥å¿—å‘ç°æ€§èƒ½ç“¶é¢ˆï¼Œå®šä½æ…¢æŸ¥è¯¢å’Œé«˜è€—æ—¶æ“ä½œã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨ELK Stackï¼ˆElasticsearch, Logstash, Kibanaï¼‰è¿›è¡Œæ—¥å¿—åˆ†æï¼š</p> <pre><code># å®‰è£…å’Œé…ç½®Elasticsearch, Logstash, Kibana
</code></pre> </li><li> <p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·ï¼ˆå¦‚Prometheusã€Grafanaã€New Relicï¼‰å®æ—¶ç›‘æ§ç³»ç»Ÿæ€§èƒ½ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ã€‚</p> <p>ç¤ºä¾‹ï¼šä½¿ç”¨Prometheuså’ŒGrafanaç›‘æ§Javaåº”ç”¨çš„æ€§èƒ½ï¼š</p> <pre><code># é…ç½®Prometheusç›‘æ§
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'java-app'
    static_configs:
      - targets: ['localhost:8080']
</code></pre> </li></ul> 
<h5><a id="7__338"></a>7. æœåŠ¡å™¨ä¼˜åŒ–</h5> 
<ul><li> <p><strong>ç¡¬ä»¶å‡çº§</strong>ï¼šå‡çº§æœåŠ¡å™¨ç¡¬ä»¶ï¼Œå¦‚å¢åŠ CPUã€å†…å­˜ç­‰ã€‚</p> 
  <ul><li>ç¤ºä¾‹ï¼šå‡çº§æœåŠ¡å™¨ç¡¬ä»¶ï¼Œå¦‚å¢åŠ CPUã€å†…å­˜ç­‰ï¼Œè¿™é€šå¸¸æ¶‰åŠä¸äº‘æœåŠ¡æä¾›å•†ï¼ˆå¦‚AWSã€Azureï¼‰çš„äº’åŠ¨ã€‚</li></ul> </li><li> <p><strong>æ“ä½œç³»ç»Ÿä¼˜åŒ–</strong>ï¼šä¼˜åŒ–æ“ä½œç³»ç»Ÿå’ŒæœåŠ¡å™¨é…ç½®ï¼Œå¦‚è°ƒæ•´å†…æ ¸å‚æ•°ã€ä¼˜åŒ–ç½‘ç»œæ ˆã€‚</p> <p>ç¤ºä¾‹ï¼šè°ƒæ•´Linuxå†…æ ¸å‚æ•°æ¥ä¼˜åŒ–ç½‘ç»œæ€§èƒ½ï¼š</p> <pre><code># ä¼˜åŒ–TCPå‚æ•°
sysctl -w net.core.somaxconn=1024
sysctl -w net.ipv4.tcp_tw_reuse=1
</code></pre> </li></ul> 
<h5><a id="8_API_356"></a>8. APIè®¾è®¡ä¼˜åŒ–</h5> 
<ul><li> <p><strong>å‡å°‘è¯·æ±‚æ¬¡æ•°</strong>ï¼šå°½é‡å‡å°‘APIè¯·æ±‚æ¬¡æ•°ï¼Œé€šè¿‡æ‰¹é‡æ¥å£ã€åˆ†é¡µç­‰æ–¹å¼å‡å°‘å•æ¬¡è¯·æ±‚çš„æ•°æ®é‡ã€‚</p> <p>ç¤ºä¾‹ï¼šæ‰¹é‡æ¥å£è®¾è®¡ï¼š</p> <pre><code>@PostMapping("/batchUsers")
public List&lt;User&gt; getBatchUsers(@RequestBody List&lt;Integer&gt; userIds) {
    // æ‰¹é‡å¤„ç†é€»è¾‘
    return userService.getUsersByIds(userIds);
}
</code></pre> </li><li> <p><strong>ä½¿ç”¨HTTPç¼“å­˜</strong>ï¼šä½¿ç”¨HTTPç¼“å­˜å¤´ï¼ˆå¦‚ETagã€Cache-Controlï¼‰æ¥å‡å°‘é‡å¤è¯·æ±‚ã€‚</p> <p>ç¤ºä¾‹ï¼šåœ¨Spring Bootä¸­é…ç½®ETagæ”¯æŒï¼š</p> <pre><code>import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {
        configurer.favorParameter(true)
                  .parameterName("mediaType")
                  .ignoreAcceptHeader(true)
                  .useRegisteredExtensionsOnly(false)
                  .defaultContentType(MediaType.APPLICATION_JSON);
    }
}
</code></pre> </li></ul> 
<h5><a id="9__395"></a>9. å®‰å…¨æ€§</h5> 
<ul><li> <p><strong>é¿å…DDoSæ”»å‡»</strong>ï¼šä½¿ç”¨é˜²ç«å¢™å’Œåå‘ä»£ç†æ¥é˜²å¾¡DDoSæ”»å‡»ï¼Œä¿è¯æ¥å£ç¨³å®šæ€§ã€‚</p> 
  <ul><li>ç¤ºä¾‹ï¼šä½¿ç”¨Cloudflareç­‰æœåŠ¡æ¥é˜²å¾¡DDoSæ”»å‡»ï¼Œå¯ä»¥é€šè¿‡Cloudflareçš„ç®¡ç†æ§åˆ¶å°è¿›è¡Œé…ç½®ã€‚</li></ul> </li></ul> 
<hr> 
<h4><a id="_407"></a>æ€»ç»“</h4> 
<p>ä¼˜åŒ–åç«¯æ¥å£æ€§èƒ½æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°ç›‘æ§ã€åˆ†æå’Œè°ƒæ•´ã€‚</p> 
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•å’Œå®ä¾‹ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¤šä¸ªå±‚é¢ä¸Šæå‡ç³»ç»Ÿçš„å“åº”é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚</p> 
<p>ä»æ•°æ®åº“ä¼˜åŒ–åˆ°ä»£ç ä¼˜åŒ–ï¼Œå†åˆ°ä½¿ç”¨ç¼“å­˜å’Œè´Ÿè½½å‡è¡¡ï¼Œæ¯ä¸€ç§æŠ€æœ¯æ‰‹æ®µéƒ½èƒ½åœ¨ç‰¹å®šåœºæ™¯ä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚</p> 
<p>å¸Œæœ›æœ¬æ–‡çš„å†…å®¹èƒ½ä¸ºå¼€å‘è€…æä¾›å®ç”¨çš„æŒ‡å¯¼ï¼Œå¸®åŠ©å¤§å®¶æ‰“é€ é«˜æ•ˆã€å¯é çš„åç«¯ç³»ç»Ÿï¼Œæå‡ç”¨æˆ·æ»¡æ„åº¦å’Œç³»ç»Ÿç«äº‰åŠ›ã€‚åœ¨æœªæ¥çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¿æŒå¯¹æ€§èƒ½ä¼˜åŒ–çš„å…³æ³¨å’Œå®è·µï¼Œæ‰èƒ½åº”å¯¹ä¸æ–­å˜åŒ–çš„éœ€æ±‚å’ŒæŒ‘æˆ˜ã€‚</p> 
<hr> 
<h4><a id="font_colordd0000font_425"></a><font color="#dd0000">å¼ºçƒˆæ¨è</font></h4> 
<p><font color="#dd0000">å‰äº›å¤©å‘ç°äº†ä¸€ä¸ªå·¨ç‰›çš„äººå·¥æ™ºèƒ½å­¦ä¹ ç½‘ç«™ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œé£è¶£å¹½é»˜ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:</font><a href="https://www.captainbed.cn/venus" rel="nofollow">äººå·¥æ™ºèƒ½</a></p> 
<p><img src="https://images2.imgbox.com/cd/55/kdZNu9TX_o.jpg" alt="b004071ozy_05_amzn"></p> 
<p><font color="#dd0000">æ¨èä¸€ä¸ªä¸ªäººå·¥ä½œï¼Œæ—¥å¸¸ä¸­æ¯”è¾ƒå¸¸ç”¨çš„äººå·¥æ™ºèƒ½å·¥å…·ï¼Œæ— éœ€é­”æ³•ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:</font><a href="https://universalbus.cn?s=venus1&amp;i=1" rel="nofollow">äººå·¥æ™ºèƒ½å·¥å…·</a></p> 
<p><img src="https://images2.imgbox.com/ea/0f/njg71gTb_o.png" alt="image-20240329011034493"></p> 
<hr> 
<h4><a id="_443"></a>ä¸“æ é›†é”¦</h4> 
<p>å¤§ä½¬ä»¬å¯ä»¥æ”¶è—ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ï¼š</p> 
<p>Spring Boot ä¸“æ ï¼š<a href="http://t.csdnimg.cn/peKde" rel="nofollow">http://t.csdnimg.cn/peKde</a></p> 
<p>ChatGPT ä¸“æ ï¼š<a href="http://t.csdnimg.cn/cU0na" rel="nofollow">http://t.csdnimg.cn/cU0na</a></p> 
<p>Java ä¸“æ ï¼š<a href="http://t.csdnimg.cn/YUz5e" rel="nofollow">http://t.csdnimg.cn/YUz5e</a></p> 
<p>Go ä¸“æ ï¼š<a href="http://t.csdnimg.cn/Jfryo" rel="nofollow">http://t.csdnimg.cn/Jfryo</a></p> 
<p>Netty ä¸“æ ï¼š<a href="http://t.csdnimg.cn/0Mp1H" rel="nofollow">http://t.csdnimg.cn/0Mp1H</a></p> 
<p>Redis ä¸“æ ï¼š<a href="http://t.csdnimg.cn/JuTue" rel="nofollow">http://t.csdnimg.cn/JuTue</a></p> 
<p>Mysql ä¸“æ ï¼š<a href="http://t.csdnimg.cn/p1zU9" rel="nofollow">http://t.csdnimg.cn/p1zU9</a></p> 
<p>æ¶æ„ä¹‹è·¯ ä¸“æ ï¼š<a href="http://t.csdnimg.cn/bXAPS" rel="nofollow">http://t.csdnimg.cn/bXAPS</a></p> 
<hr> 
<h4><a id="_469"></a>å†™åœ¨æœ€å</h4> 
<p><strong>æ„Ÿè°¢æ‚¨çš„æ”¯æŒå’Œé¼“åŠ±ï¼ ğŸ˜ŠğŸ™</strong></p> 
<p><strong>å¦‚æœå¤§å®¶å¯¹ç›¸å…³æ–‡ç« æ„Ÿå…´è¶£ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·"æ¶æ„æ®¿å ‚"ï¼Œä¼šæŒç»­æ›´æ–°AIGCï¼ŒjavaåŸºç¡€é¢è¯•é¢˜, netty, spring boot, spring cloudç­‰ç³»åˆ—æ–‡ç« ï¼Œä¸€ç³»åˆ—å¹²è´§éšæ—¶é€è¾¾!</strong></p> 
<p><strong>å¦‚æœæœ‰é¡¹ç›®æˆ–è€…æ¯•è®¾åˆä½œï¼Œè¯·V:fengyelin8866,å¤‡æ³¨é¡¹ç›®éœ€æ±‚</strong></p> 
<p><img src="https://images2.imgbox.com/e5/0d/CKYg22wf_o.gif" alt="csdn-end"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a15c7d47b1ea119ea441309a4854194a/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€ç ”å‘æ—¥è®°ã€‘Matlab/SimulinkæŠ€èƒ½è§£é”(å…«)â€”â€”åˆ†å¸ƒå¼ä»¿çœŸ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d1873d7eb80577721271b75d9eb9cf99/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ã€æœºå™¨å­¦ä¹ ã€‘ äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ è¾…åŠ©å†³ç­–åœ¨ç©ºæˆ˜ä¸­çš„æœªæ¥é€‰æ‹©</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å­¦ä¹ è€….
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>