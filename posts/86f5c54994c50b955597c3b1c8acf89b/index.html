<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何在Mac上安装PHP环境 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/86f5c54994c50b955597c3b1c8acf89b/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="如何在Mac上安装PHP环境">
  <meta property="og:description" content="前置环境：HomeBrew
# Homebrew 是 Mac 上最好的包管理器之一，可以用于安装各种开源软件。从 Terminal（终端）执行以下命令安装 Homebrew： /usr/bin/ruby -e $(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&#34; 一、安装php7.2 # 安装必要的扩展 以下命令安装了 Mcrypt、Opcache、Redis、Xdebug 和 Yaml 五个扩展。可以根据具体需求选择安装其他扩展。 brew install php70-mcrypt php70-opcache php70-redis php70-xdebug php70-yaml # 安装 PHP 版本 # brew install php # 执行这个命令将会安装 Homebrew 中最新版本的 PHP # 如果需要安装其他版本的 PHP 可以使用以下命令进行查找： brew search php # 然后可以根据需要安装特定版本的 PHP，例如安装 PHP 7.2 版本： brew install php@7.2 二、配置 PHP cd /etc sudo nano php.ini # 在这个文件中可以修改一些 PHP 配置，例如文件上传大小限制、时区等。一些常用的设置如下： # 内容BEGIN upload_max_filesize = 2M post_max_size = 8M date.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-21T00:55:42+08:00">
    <meta property="article:modified_time" content="2024-01-21T00:55:42+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何在Mac上安装PHP环境</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>前置环境：HomeBrew</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token comment"># Homebrew 是 Mac 上最好的包管理器之一，可以用于安装各种开源软件。从 Terminal（终端）执行以下命令安装 Homebrew：</span>
/usr/bin/ruby <span class="token parameter variable">-e</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/master/install<span class="token variable">)</span></span>"
</code></pre> 
<h2><a id="php72_7"></a>一、安装php7.2</h2> 
<pre><code class="prism language-bash"><span class="token comment"># 安装必要的扩展 以下命令安装了 Mcrypt、Opcache、Redis、Xdebug 和 Yaml 五个扩展。可以根据具体需求选择安装其他扩展。</span>
brew <span class="token function">install</span> php70-mcrypt php70-opcache php70-redis php70-xdebug php70-yaml

<span class="token comment"># 安装 PHP 版本</span>
<span class="token comment"># brew install php # 执行这个命令将会安装 Homebrew 中最新版本的 PHP</span>

<span class="token comment"># 如果需要安装其他版本的 PHP 可以使用以下命令进行查找：</span>
brew search php

<span class="token comment"># 然后可以根据需要安装特定版本的 PHP，例如安装 PHP 7.2 版本：</span>
brew <span class="token function">install</span> php@7.2
</code></pre> 
<h2><a id="_PHP_22"></a>二、配置 PHP</h2> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /etc
<span class="token function">sudo</span> <span class="token function">nano</span> php.ini <span class="token comment"># 在这个文件中可以修改一些 PHP 配置，例如文件上传大小限制、时区等。一些常用的设置如下：</span>

<span class="token comment"># 内容BEGIN</span>
upload_max_filesize <span class="token operator">=</span> 2M
post_max_size <span class="token operator">=</span> 8M
date.timezone <span class="token operator">=</span> <span class="token string">"Asia/Shanghai"</span>
<span class="token comment"># 内容END, 保存文件后，重启 Apache 或者 Nginx Web 服务器，使配置生效。</span>
</code></pre> 
<h2><a id="_PHP__35"></a>三、测试 PHP 是否正常工作</h2> 
<pre><code class="prism language-bash"><span class="token function">touch</span> /usr/local/var/www/info.php

<span class="token comment"># 内容BEGIN</span>
<span class="token operator">&lt;</span>?php
  phpinfo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
?<span class="token operator">&gt;</span>
<span class="token comment"># 内容END</span>
</code></pre> 
<p>现在可以在浏览器中输入 <a href="http://127.0.0.1/info.php" rel="nofollow">http://127.0.0.1/info.php</a>，如果一切正常将会出现 PHP 信息的页面。<br> 到此为止，你已经成功配置了 PHP 环境，并可以开始 PHP 开发了。</p> 
<h2><a id="FAQ_50"></a>FAQ</h2> 
<h3><a id="Q1brew_51"></a>Q1、brew安装提示失败</h3> 
<pre><code class="prism language-bash">Error: php@7.2 has been disabled because it is deprecated upstream<span class="token operator">!</span>
</code></pre> 
<p>答: brew已经不支持7.2了，只有用其他办法来安装</p> 
<pre><code class="prism language-bash">brew tap shivammathur/php
brew <span class="token function">install</span> shivammathur/php/php@7.2
</code></pre> 
<p>安装完成提示</p> 
<pre><code class="prism language-bash">The php.ini and php-fpm.ini <span class="token function">file</span> can be found in:
    /opt/homebrew/etc/php/7.2/
​
php@7.2 is keg-only, <span class="token function">which</span> means it was not symlinked into /opt/homebrew,
because this is an alternate version of another formula.
​
If you need to have php@7.2 first <span class="token keyword">in</span> your <span class="token environment constant">PATH</span>, run:
  <span class="token builtin class-name">echo</span> <span class="token string">'export PATH="/opt/homebrew/opt/php@7.2/bin:$PATH"'</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc
  <span class="token builtin class-name">echo</span> <span class="token string">'export PATH="/opt/homebrew/opt/php@7.2/sbin:$PATH"'</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc
​
For compilers to <span class="token function">find</span> php@7.2 you may need to set:
  <span class="token builtin class-name">export</span> <span class="token assign-left variable">LDFLAGS</span><span class="token operator">=</span><span class="token string">"-L/opt/homebrew/php@7.2/lib"</span>
  <span class="token builtin class-name">export</span> <span class="token assign-left variable">CPPFLAGS</span><span class="token operator">=</span><span class="token string">"-I/opt/homebrew/php@7.2/include"</span>
​
​
To restart shivammathur/php/php@7.2 after an upgrade:
  brew services restart shivammathur/php/php@7.2
Or, <span class="token keyword">if</span> you don't want/need a background <span class="token function">service</span> you can just run:
  /usr/local/opt/php@7.2/sbin/php-fpm <span class="token parameter variable">--nodaemonize</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/29/b9/AVqKjqgI_o.png" alt="安装成功"></p> 
<h3><a id="Q2No_code_signing_authority_for_module_at_opthomebrewoptphp72libhttpdmoduleslibphp7so_specified_in_LoadModule_directive_87"></a>Q2、No code signing authority for module at /opt/homebrew/opt/php@7.2/lib/httpd/modules/libphp7.so specified in LoadModule directive.</h3> 
<p><img src="https://images2.imgbox.com/33/af/BFBCpQ0v_o.png" alt="问题2"><br> 答：MacOS 12版本不再自带php，使用brew安装php8.0 之后配置httpd.conf遇到以上标题错误，需要重新签名<br> Q2.1 首先在·钥匙串访问· -&gt; 证书助理 -&gt; 创建证书颁布机构（代码签名）<br> <img src="https://images2.imgbox.com/42/d0/XDNhbjVu_o.png" alt="创建证书颁布证书页面"><br> <img src="https://images2.imgbox.com/f9/6e/HTKjl1oH_o.png" alt="创建成功"><br> Q2.2 再回到·钥匙串访问· 找到 Ls RootCA<br> <img src="https://images2.imgbox.com/c4/7c/pD15Saxr_o.png" alt="钥匙串访问界面"><br> Q2.3 选择右键简介始终信任<br> <img src="https://images2.imgbox.com/8f/2b/G46vyXnK_o.png" alt="始终信任"><br> Q2.4 在终端 给php动态库签名</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> codesign <span class="token parameter variable">--sign</span> <span class="token string">"zhiNian的CA"</span> <span class="token parameter variable">--force</span> <span class="token parameter variable">--keychain</span>  ~/Library/Keychains/login.keychain-db /opt/homebrew/opt/php@7.2/lib/httpd/modules/libphp7.so
</code></pre> 
<p>Q2.5 编辑 /etc/apache2/httpd.conf 添加下列</p> 
<pre><code class="prism language-bash">LoadModule php7_module /opt/homebrew/opt/php@7.2/lib/httpd/modules/libphp7.so <span class="token string">"zhiNian的CA"</span>
</code></pre> 
<p>Q2.6 重启Apache</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> apachectl <span class="token parameter variable">-k</span> restart
</code></pre> 
<p>提示: AH06662: Allowing module loading process to continue for module at /opt/homebrew/opt/php@7.2/lib/httpd/modules/libphp7.so<br> 注: httpd not running, trying to start</p> 
<pre><code class="prism language-bash"><span class="token comment"># 重启</span>
<span class="token function">sudo</span> apachectl restart
</code></pre> 
<p>访问 <a href="http://127.0.0.1/index.php" rel="nofollow">http://127.0.0.1/index.php</a><br> <img src="https://images2.imgbox.com/7c/0d/8t74vk4Z_o.png" alt="phpinfo"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a9dce9bcc2196ab4b7921bc8b969d020/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【机器学习 | 异常检测】孤立森林（isolation Forest）iForest 算法理论讲解及 Python 实战</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d4d1fe148c39dc4ed51b7ce5c6459c98/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端环境搭建——node（保姆级）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>