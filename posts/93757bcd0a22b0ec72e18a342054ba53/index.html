<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【算法】基础算法004之前缀和 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/93757bcd0a22b0ec72e18a342054ba53/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【算法】基础算法004之前缀和">
  <meta property="og:description" content="👀樊梓慕：个人主页
🎥个人专栏：《C语言》《数据结构》《蓝桥杯试题》《LeetCode刷题笔记》《实训项目》《C&#43;&#43;》《Linux》《算法》
🌝每一个不曾起舞的日子，都是对生命的辜负
前言 本篇文章为大家带来前缀和算法，前缀和算法可以以O(1)的时间复杂度快速求出某一段连续区间的和，这个连续区域既可以是一维的也可以是二维的。
欢迎大家📂收藏📂以便未来做题时可以快速找到思路，巧妙的方法可以事半功倍。 =========================================================================
GITEE相关代码：🌟樊飞 (fanfei_c) - Gitee.com🌟
=========================================================================
1.⼀维前缀和 【模板】前缀和_牛客题霸_牛客网 (nowcoder.com)https://www.nowcoder.com/practice/acead2f4c28c401889915da98ecdc6bf?tpId=230&amp;tqId=2021480&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196
前缀和：可以快速求出某一段连续区间的和。
本道题目如果使用暴力计算的话会超时，所以需要进行优化。
前缀和解题模板 第一步：预处理出来一个前缀和数组，比如本题dp[i]表示1-i区间内所有元素的和，且dp[i]=dp[i-1]&#43;arr[i]；第二步：使用前缀和数组，比如本题求[l,r]区间元素的和就是dp[r]-dp[l-1]； #include &lt;iostream&gt; #include &lt;vector&gt; using namespace std; int main() { // 1.输入数据 int n,q; cin&gt;&gt;n&gt;&gt;q; vector&lt;int&gt; arr(n&#43;1); for(int i=1;i&lt;=n;i&#43;&#43;) cin&gt;&gt;arr[i]; // 2.预处理出来一个前缀和数组 vector&lt;long long&gt; dp(n&#43;1); for(int i=1;i&lt;=n;i&#43;&#43;) dp[i]=dp[i-1]&#43;arr[i]; // 3.使用前缀和数组 int l,r; while(q--) { cin&gt;&gt;l&gt;&gt;r; cout&lt;&lt;dp[r]-dp[l-1]&lt;&lt;endl; } return 0; } 注意：
防止溢出，所以dp数据类型选用long long；多开一个空间（n&#43;1）是为了防止越界，因为最后需要[l-1]，所以下标一般都是以1为起始。 2.二维前缀和 【模板】二维前缀和_牛客题霸_牛客网 (nowcoder.com)https://www.nowcoder.com/practice/99eb8040d116414ea3296467ce81cbbc?tpId=230&amp;tqId=2023819&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196
同样的我们使用前缀和解题模板：
第一步：预处理出来一个前缀和数组，本题中dp[i][j]表示[1,1]-[i][j]区间内所有元素的和。第二步：使用前缀和数组。 首先如何得到状态转移方程，即dp[i][j]如何计算？
如图所示：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-08T09:36:04+08:00">
    <meta property="article:modified_time" content="2024-05-08T09:36:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【算法】基础算法004之前缀和</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="text-align:center;"><a id="AIGC_0"></a><img alt="" height="172" src="https://images2.imgbox.com/36/3c/AEjzh2oR_o.png" width="391"></h3> 
<p style="text-align:center;"><strong>👀<span style="color:#98c091;">樊梓慕：</span><strong><strong><strong><strong><strong><strong><strong><a href="https://blog.csdn.net/2301_77112634?type=blog" title="个人主页">个人主页</a></strong></strong></strong></strong></strong></strong></strong></strong></p> 
<p style="text-align:center;"><strong> 🎥<span style="color:#956fe7;">个人专栏：</span><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdn.cn/e7GFn" rel="nofollow" title="《C语言》">《C语言》</a></strong></strong></strong></strong></strong></strong></strong><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdn.cn/jUErT" rel="nofollow" title="《数据结构》">《数据结构》</a></strong></strong></strong></strong></strong></strong></strong><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdn.cn/q3iyZ" rel="nofollow" title="《蓝桥杯试题》">《蓝桥杯试题》</a></strong></strong></strong></strong></strong></strong></strong><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdn.cn/IUyeH" rel="nofollow" title="《LeetCode刷题笔记》">《LeetCode刷题笔记》</a></strong></strong></strong></strong></strong></strong></strong><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdn.cn/uK6me" rel="nofollow" title="《实训项目》">《实训项目》</a></strong></strong></strong></strong></strong></strong></strong><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdnimg.cn/uOlnu" rel="nofollow" title="《C++》">《C++》</a></strong></strong></strong></strong></strong></strong></strong><strong><strong><strong><strong><strong><strong><strong><a href="http://t.csdnimg.cn/cUhZr" rel="nofollow" title="《Linux》">《Linux》</a></strong></strong></strong></strong><strong><strong><strong><strong><a href="http://t.csdnimg.cn/S7d8A" rel="nofollow" title="《算法》">《算法》</a></strong></strong></strong></strong></strong></strong></strong></strong></p> 
<p style="text-align:center;"><strong>🌝<span style="color:#faa572;">每一个不曾起舞的日子，都是对生命的辜负</span></strong></p> 
<hr> 
<h2>前言</h2> 
<p>本篇文章为大家带来前缀和算法，前缀和算法可以以O(1)的时间复杂度快速求出某一段连续区间的和，这个连续区域既可以是一维的也可以是二维的。</p> 
<hr> 
<p><span style="color:#ed7976;"><strong>欢迎大家📂</strong></span><span style="color:#be191c;"><strong>收藏</strong></span><span style="color:#ed7976;"><strong>📂以便未来做题时可以快速找到思路，巧妙的方法可以事半功倍。 </strong></span></p> 
<p><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p> 
<p><span style="color:#9c8ec1;"><strong>GITEE相关代码：</strong></span><span style="color:#0d0016;"><strong>🌟</strong></span><a href="https://gitee.com/fanfei_c" rel="nofollow" title="樊飞 (fanfei_c) - Gitee.com">樊飞 (fanfei_c) - Gitee.com</a><span style="color:#0d0016;"><strong>🌟</strong></span></p> 
<p><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p> 
<hr> 
<h2>1.⼀维前缀和</h2> 
<p><a class="has-card" href="https://www.nowcoder.com/practice/acead2f4c28c401889915da98ecdc6bf?tpId=230&amp;tqId=2021480&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196" rel="nofollow" title="【模板】前缀和_牛客题霸_牛客网 (nowcoder.com)"><span class="link-card-box"><span class="link-title">【模板】前缀和_牛客题霸_牛客网 (nowcoder.com)</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/f6/3d/eytGPkXs_o.png" alt="icon-default.png?t=N7T8">https://www.nowcoder.com/practice/acead2f4c28c401889915da98ecdc6bf?tpId=230&amp;tqId=2021480&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196</span></span></a></p> 
<blockquote> 
 <p><img alt="" height="763" src="https://images2.imgbox.com/9b/34/W2icbhbu_o.png" width="1200"></p> 
</blockquote> 
<p> 前缀和：可以快速求出某一段连续区间的和。</p> 
<p>本道题目如果使用暴力计算的话会超时，所以需要进行优化。</p> 
<h3>前缀和解题模板</h3> 
<ol><li>第一步：预处理出来一个前缀和数组，比如本题dp[i]表示1-i区间内所有元素的和，且dp[i]=dp[i-1]+arr[i]；</li><li>第二步：使用前缀和数组，比如本题求[l,r]区间元素的和就是dp[r]-dp[l-1]；</li></ol> 
<hr> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;

int main() {
    // 1.输入数据
    int n,q;
    cin&gt;&gt;n&gt;&gt;q;
    vector&lt;int&gt; arr(n+1);
    for(int i=1;i&lt;=n;i++) cin&gt;&gt;arr[i];

    // 2.预处理出来一个前缀和数组
    vector&lt;long long&gt; dp(n+1);
    for(int i=1;i&lt;=n;i++) dp[i]=dp[i-1]+arr[i]; 

    // 3.使用前缀和数组
    int l,r;
    while(q--)
    {
        cin&gt;&gt;l&gt;&gt;r;
        cout&lt;&lt;dp[r]-dp[l-1]&lt;&lt;endl;
    }
    return 0;
}</code></pre> 
<blockquote> 
 <p> 注意：</p> 
 <ul><li>防止溢出，所以dp数据类型选用long long；</li><li>多开一个空间（n+1）是为了防止越界，因为最后需要[l-1]，所以下标一般都是以1为起始。</li></ul> 
</blockquote> 
<hr> 
<h2> 2.二维前缀和</h2> 
<p><a class="has-card" href="https://www.nowcoder.com/practice/99eb8040d116414ea3296467ce81cbbc?tpId=230&amp;tqId=2023819&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196" rel="nofollow" title="【模板】二维前缀和_牛客题霸_牛客网 (nowcoder.com)"><span class="link-card-box"><span class="link-title">【模板】二维前缀和_牛客题霸_牛客网 (nowcoder.com)</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ef/e3/1drWDrMD_o.png" alt="icon-default.png?t=N7T8">https://www.nowcoder.com/practice/99eb8040d116414ea3296467ce81cbbc?tpId=230&amp;tqId=2023819&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196</span></span></a></p> 
<blockquote> 
 <p><img alt="" height="667" src="https://images2.imgbox.com/aa/b3/WafCp82r_o.png" width="1185"></p> 
 <p><img alt="" height="396" src="https://images2.imgbox.com/d5/f0/cIgoCPZQ_o.png" width="1192"></p> 
</blockquote> 
<hr> 
<p>同样的我们使用前缀和解题模板：</p> 
<ol><li>第一步：预处理出来一个前缀和数组，本题中dp[i][j]表示[1,1]-[i][j]区间内所有元素的和。</li><li>第二步：使用前缀和数组。</li></ol> 
<p>首先如何得到状态转移方程，即dp[i][j]如何计算？</p> 
<p>如图所示：</p> 
<p class="img-center"><img alt="" height="306" src="https://images2.imgbox.com/1e/b1/OejpEKXL_o.png" width="392"></p> 
<p>很明显dp[i][j]=A+B+C+D。</p> 
<p>但是A还好说，B和C都不好计算。</p> 
<p>那么我们就可以把A、B合并为A+B=dp[i-1][j]，把A、C合并为A+C=dp[i][j-1]。</p> 
<p>多加了一个A再减去即可。</p> 
<p>所以dp[i][j]=(A+B)+(A+C)+D-A=dp[i-1][j]+dp[i][j-1]+arr[i][j]-dp[i-1][j-1]；</p> 
<hr> 
<p>其次如何使用前缀和数组？</p> 
<p>同样如上图，[x1][y1]~[x2][y2]的和我们用D块表示。</p> 
<p>那么D=A+B+C+D-(A+B)-(A+C)+A=dp[x2][y2]-dp[x1-1][y2]-dp[x2][y1-1]+dp[x1-1][y1-1]；</p> 
<hr> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;

int main() {
    // 1.输入数据
    int n,m,q;
    cin&gt;&gt;n&gt;&gt;m&gt;&gt;q;
    vector&lt;vector&lt;int&gt;&gt; arr(n+1,vector&lt;int&gt;(m+1));
    for(int i=1;i&lt;=n;i++)
        for(int j=1;j&lt;=m;j++)
            cin&gt;&gt;arr[i][j];

    // 2.预处理前缀和矩阵
    vector&lt;vector&lt;long long&gt;&gt; dp(n+1,vector&lt;long long&gt;(m+1));
    for(int i=1;i&lt;=n;i++)
    {
        for(int j=1;j&lt;=m;j++)
        {
            dp[i][j]=dp[i-1][j]+dp[i][j-1]+arr[i][j]-dp[i-1][j-1];
        }
    }

    // 3.使用前缀和矩阵
    int x1,y1,x2,y2;
    while(q--)
    {
        cin&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2;
        cout&lt;&lt;dp[x2][y2]-dp[x1-1][y2]-dp[x2][y1-1]+dp[x1-1][y1-1]&lt;&lt;endl;
    }
    return 0;
}</code></pre> 
<hr> 
<h2>3.练习</h2> 
<p><a class="has-card" href="https://leetcode.cn/problems/find-pivot-index/" rel="nofollow" title="724. 寻找数组的中心下标 - 力扣（LeetCode）"><span class="link-card-box"><span class="link-title">724. 寻找数组的中心下标 - 力扣（LeetCode）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/3b/ca/OAUM6QHf_o.png" alt="icon-default.png?t=N7T8">https://leetcode.cn/problems/find-pivot-index/</span></span></a><a class="has-card" href="https://leetcode.cn/problems/product-of-array-except-self/" rel="nofollow" title="238. 除自身以外数组的乘积 - 力扣（LeetCode）"><span class="link-card-box"><span class="link-title">238. 除自身以外数组的乘积 - 力扣（LeetCode）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/cf/ac/90iXHY9B_o.png" alt="icon-default.png?t=N7T8">https://leetcode.cn/problems/product-of-array-except-self/</span></span></a><a class="has-card" href="https://leetcode.cn/problems/subarray-sum-equals-k/" rel="nofollow" title="560. 和为 K 的子数组 - 力扣（LeetCode）"><span class="link-card-box"><span class="link-title">560. 和为 K 的子数组 - 力扣（LeetCode）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/a5/08/ULGboSp9_o.png" alt="icon-default.png?t=N7T8">https://leetcode.cn/problems/subarray-sum-equals-k/</span></span></a></p> 
<blockquote> 
 <p>提示：前缀和+哈希表</p> 
</blockquote> 
<p><a class="has-card" href="https://leetcode.cn/problems/subarray-sums-divisible-by-k/description/" rel="nofollow" title="974. 和可被 K 整除的子数组 - 力扣（LeetCode）"><span class="link-card-box"><span class="link-title">974. 和可被 K 整除的子数组 - 力扣（LeetCode）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/c2/49/g7apP5vv_o.png" alt="icon-default.png?t=N7T8">https://leetcode.cn/problems/subarray-sums-divisible-by-k/description/</span></span></a></p> 
<blockquote> 
 <p> 补充知识以及思路提示：</p> 
 <p><strong>1.同余定理</strong></p> 
 <p>若（a-b）/ p = k ···· 0； //可以整除</p> 
 <p>则 a % p = b % p；</p> 
 <p>对于本题来说，我们需要找到可以被k整除的子数组，那么我们假设这段子数组是以i为结尾，x为起始的，整个数组的和为sum，x的前缀和为pre，那么有(sum-pre)%k=0，又因为同余定理可以得到sum%k=pre%k，所以我们只需要将sum%k的结果添加到哈希表中，最后统计哈希表中该余数出现的次数即可，根据后面给出的修正方法，这里求余公式变为（sum%k+k）%k。</p> 
 <p><strong>2.C++、java对负数 % 正数的结果以及修正</strong></p> 
 <p>在C++和java语言中负数%正数的结果是一个负数，那么为了让这个负数修正为正数，我们可以利用如下公式：</p> 
 <p>a为负数，b为正数，那么 修正后的余数 = a % b + b，而为了同一处理正负数，我们可以再对这个结果取模，目的是当a为正数时，也不越界。</p> 
 <p>所以 修正后的余数 = （a%b+b）% b；</p> 
</blockquote> 
<hr> 
<p><a class="has-card" href="https://leetcode.cn/problems/contiguous-array/" rel="nofollow" title="525. 连续数组 - 力扣（LeetCode）"><span class="link-card-box"><span class="link-title">525. 连续数组 - 力扣（LeetCode）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/f7/b2/FgtqkO8J_o.png" alt="icon-default.png?t=N7T8">https://leetcode.cn/problems/contiguous-array/</span></span></a></p> 
<blockquote> 
 <p>思路提示：</p> 
 <p>本题让我们找出⼀段连续的区间， 0 和 1 出现的次数相同。<br> • 如果将 0 记为 -1 ， 1 记为 1 ，问题就变成了找出一段区间，这段区间的和等于 0 。<br> • 于是，就和 『 和为K的子数组』这道题的思路一样了，只不过K的值变为0；</p> 
</blockquote> 
<hr> 
<p><a class="has-card" href="https://leetcode.cn/problems/matrix-block-sum/" rel="nofollow" title="1314. 矩阵区域和 - 力扣（LeetCode）"><span class="link-card-box"><span class="link-title">1314. 矩阵区域和 - 力扣（LeetCode）</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ee/7b/RlqTiOAt_o.png" alt="icon-default.png?t=N7T8">https://leetcode.cn/problems/matrix-block-sum/</span></span></a></p> 
<blockquote> 
 <p>提示：二维前缀和思路</p> 
</blockquote> 
<p style="text-align:center;"></p> 
<hr> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p> 
<p style="text-align:center;"><span style="color:#956fe7;"><strong>如果你对该系列文章有兴趣的话，欢迎持续关注博主动态，博主会持续输出优质内容</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>🍎博主很需要大家的支持，你的支持是我创作的不竭动力🍎</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>🌟</strong></span><span style="color:#79c6cd;"><strong>~ 点赞收藏＋关注 ~</strong></span><span style="color:#0d0016;"><strong>🌟</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63c629158baeaaa3dfb0c6aef5f32be5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【MsSQL】数据库基础 &amp; 库的基本操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4fbe26321a143304ecf64b9a0f280e54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一个账号玩遍ChatGPT/Claude-3/Midjourney 省钱又省力</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>