<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UE5&#43;数字人&#43;文心一言实现语音问答 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/db1839056408c078cb4a780e62c630dc/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="UE5&#43;数字人&#43;文心一言实现语音问答">
  <meta property="og:description" content="此项目主要包含三个功能（讯飞语音识别、百度文心一言问答、metahumanSDK文字转语音合成口型），所有功能均使用蓝图实现，不含C&#43;&#43;代码。
项目所需插件；
Http通信插件；VaRest，在UE5中用于与文心一言建立连接，在Epic虚幻商城可免费下载。
文字转语音及合成口型动画插件；Metahuman SDK，在Epic虚幻商城可免费下载。
语音识别插件；XunFeiSpeechToText，插件连接；🍞正在为您运送作品详情（该插件非本人所著，如需使用，需自行购买）
以下是该项目实现的全流程，仅供学习参考。
一、前期准备
1.导入人物模型；打开Quixel Bridge插件，如果没有这个插件就去商城下载一个，在其中选择一个合适的人物模型，将其下载下来。人物模型也可自己进行捏脸，需要上Metahuman官网进行操作，捏完脸后点击左下角按钮进行导出，然后在UE5中打开Quixel Bridge插件，登录后就可以看到自己捏脸的人物模型了，下载后在UE5的内容浏览器中就可看到一个MetaHumans的文件，打开文件，将人物模型的蓝图类拖至场景中即可使用。
2、导入插件；在项目文件夹中新建Plugins目录，将下载的XunFeiSpeechToText插件解压到此目录下。另外2个插件直接在虚幻商城下载后安装到引擎即可，然后在插件中找到下载的插件，将其都打开，然后重启项目。
二、实现讯飞语音识别功能
创建新关卡，然后保存关卡，再打开关卡蓝图进行编辑，图中红色款内是定义的全局变量，可以将语音识别的文字存入该字符串中，以便其他地方使用，如果不需要让语音识别的文字显示在UI则可删除该部分。
三、实现文心一言问答功能
1、申请百度文心一言API，网址；百度智能云-登录 (baidu.com)
注册好账号后，进入计费管理界面，开通所需服务，最好是都勾选，下面费用高的可以不用勾选，只有你使用了才能计费。
随后点击应用接入，进入此界面后点击创建应用按钮，创建完成后就可以得到API Key和Secret Key。
2、编辑蓝图，将UE5与文心一言进行通信连接
继续在关卡蓝图中进行编辑，创建四个变量，第一个Message变量的类型为Va Rest Json Object数组、第二个为模型编号、第三个第四个为申请的API Key和Secret Key（将上面申请的2串代码对应赋给所创建的字符变量）红色框内的Content为需要输入的问题，将此与上一步语音识别的文字连接。
图中红色框内的字符串就是文心一言返回的答案，这里同样创建了一个全局变量，用来存储文心一言回复的答案，方便其他地方调用。
四、metahumanSDK实现文字转语音及口型合成
图中红色框为metahumanSDK文字转语音的目标文字，将上面文心一言传回的答案与这个Text连接，图中绿色框为所需要制作口型的人物模型，在场景的大纲视口中将人物拖进蓝图即可得到。
以上就是此项目的全部实现流程了，最终效果还行，就是速度太慢，第一个点是文心一言，它是将所有答案一起传回，字数越多则等待的时间越长。第二个点是metahumanSDK的文字转语音和语音转口型，同样也是受字数影响，字数越多耗时越长，同时也要受网速的影响。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-13T17:01:02+08:00">
    <meta property="article:modified_time" content="2023-11-13T17:01:02+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">UE5&#43;数字人&#43;文心一言实现语音问答</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>     <strong>此项目主要包含三个功能（讯飞语音识别、百度文心一言问答、metahumanSDK文字转语音合成口型），所有功能均使用蓝图实现，不含C++代码。</strong></p> 
<p><strong>项目所需插件；</strong></p> 
<p>Http通信插件；<strong>VaRest</strong>，在UE5中用于与文心一言建立连接，在Epic虚幻商城可免费下载。</p> 
<p>文字转语音及合成口型动画插件；<strong>Metahuman SDK</strong>，在Epic虚幻商城可免费下载。</p> 
<p>语音识别插件；<strong>XunFeiSpeechToText，</strong>插件连接；<a href="https://mbd.pub/o/bread/ZJyUlZhr" rel="nofollow" title="🍞正在为您运送作品详情">🍞正在为您运送作品详情</a>（该插件非本人所著，如需使用，需自行购买）</p> 
<p>以下是该项目实现的全流程，仅供学习参考。</p> 
<p><strong>一、前期准备</strong></p> 
<p>1.导入人物模型；打开Quixel Bridge插件，如果没有这个插件就去商城下载一个，在其中选择一个合适的人物模型，将其下载下来。人物模型也可自己进行捏脸，需要上Metahuman官网进行操作，捏完脸后点击左下角按钮进行导出，然后在UE5中打开Quixel Bridge插件，登录后就可以看到自己捏脸的人物模型了，下载后在UE5的内容浏览器中就可看到一个MetaHumans的文件，打开文件，将人物模型的蓝图类拖至场景中即可使用。</p> 
<p><img alt="" height="654" src="https://images2.imgbox.com/81/a6/XoHtsJeE_o.png" width="386"></p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/58/21/GgW8asvb_o.png" width="322"></p> 
<p>2、导入插件；在项目文件夹中新建Plugins目录，将下载的<strong>XunFeiSpeechToText</strong>插件解压到此目录下。另外2个插件直接在虚幻商城下载后安装到引擎即可，然后在插件中找到下载的插件，将其都打开，然后重启项目。</p> 
<p><img alt="" height="214" src="https://images2.imgbox.com/7c/04/0ofo9cv1_o.png" width="628"></p> 
<p></p> 
<p><strong>二、实现讯飞语音识别功能</strong></p> 
<p>创建新关卡，然后保存关卡，再打开关卡蓝图进行编辑，图中红色款内是定义的全局变量，可以将语音识别的文字存入该字符串中，以便其他地方使用，如果不需要让语音识别的文字显示在UI则可删除该部分。</p> 
<p><img alt="" height="920" src="https://images2.imgbox.com/cb/ad/FaiCFLxZ_o.png" width="1200"></p> 
<p><strong>三、实现文心一言问答功能</strong></p> 
<p>1、申请百度文心一言API，网址；<a href="https://login.bce.baidu.com/?account=" rel="nofollow" title="百度智能云-登录 (baidu.com)">百度智能云-登录 (baidu.com)</a></p> 
<p>注册好账号后，进入计费管理界面，开通所需服务，最好是都勾选，下面费用高的可以不用勾选，只有你使用了才能计费。</p> 
<p><img alt="" height="853" src="https://images2.imgbox.com/67/d0/oZ0KhE6w_o.png" width="1200"></p> 
<p>随后点击应用接入，进入此界面后点击创建应用按钮，创建完成后就可以得到API Key和Secret Key。</p> 
<p><img alt="" height="850" src="https://images2.imgbox.com/3f/60/tC4ZBFcN_o.png" width="1200"></p> 
<p>2、编辑蓝图，将UE5与文心一言进行通信连接</p> 
<p>继续在关卡蓝图中进行编辑，创建四个变量，第一个Message变量的类型为Va Rest Json Object数组、第二个为模型编号、第三个第四个为申请的API Key和Secret Key（将上面申请的2串代码对应赋给所创建的字符变量）红色框内的Content为需要输入的问题，将此与上一步语音识别的文字连接。</p> 
<p><img alt="" height="786" src="https://images2.imgbox.com/76/6d/1rUfjJoe_o.png" width="1200"></p> 
<p>图中红色框内的字符串就是文心一言返回的答案，这里同样创建了一个全局变量，用来存储文心一言回复的答案，方便其他地方调用。</p> 
<p><img alt="" height="740" src="https://images2.imgbox.com/6c/0c/s1FtZ19C_o.png" width="1200"></p> 
<p><strong>四、metahumanSDK实现文字转语音及口型合成</strong></p> 
<p>图中红色框为metahumanSDK文字转语音的目标文字，将上面文心一言传回的答案与这个Text连接，图中绿色框为所需要制作口型的人物模型，在场景的大纲视口中将人物拖进蓝图即可得到。</p> 
<p><img alt="" height="799" src="https://images2.imgbox.com/cf/07/EAc1SMc0_o.png" width="1200"></p> 
<p>以上就是此项目的全部实现流程了，最终效果还行，就是速度太慢，第一个点是文心一言，它是将所有答案一起传回，字数越多则等待的时间越长。第二个点是metahumanSDK的文字转语音和语音转口型，同样也是受字数影响，字数越多耗时越长，同时也要受网速的影响。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8bd240731e37109c33c581109decbf7a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">从零基础到精通：Flutter开发的完整指南</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb3f6e2bb6a3f9ba5a5dd5eefd2aa5af/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python的虚拟环境venv创建和使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>