<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>åŸºäºPython&#43;å¤§æ•°æ®çš„æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿè®¾è®¡ä¸å®ç° - ç¼–ç¨‹å­¦ä¹ è€…</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/f2cc5d64c513b80b4b867a00cd5d054b/">
  <meta property="og:site_name" content="ç¼–ç¨‹å­¦ä¹ è€…">
  <meta property="og:title" content="åŸºäºPython&#43;å¤§æ•°æ®çš„æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿè®¾è®¡ä¸å®ç°">
  <meta property="og:description" content="ğŸ’—åšä¸»ä»‹ç»ï¼šâœŒå…¨ç½‘ç²‰ä¸10W&#43;,CSDNå…¨æ ˆé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ï¼Œåšå®¢ä¹‹æ˜Ÿã€æ˜é‡‘/åä¸ºäº‘/é˜¿é‡Œäº‘ç­‰å¹³å°ä¼˜è´¨ä½œè€…ã€‚
ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ  æ¨èè®¢é˜…ğŸ‘‡ğŸ»
è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ç²¾å“é¡¹ç›®æ¡ˆä¾‹-200å¥—
ğŸŒŸæ–‡æœ«è·å–æºç &#43;æ•°æ®åº“&#43;æ–‡æ¡£ğŸŒŸ
æ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—èµ·æ¥ï¼Œè¿˜æœ‰å¤§å®¶åœ¨æ¯•è®¾é€‰é¢˜ï¼Œé¡¹ç›®ä»¥åŠè®ºæ–‡ç¼–å†™ç­‰ç›¸å…³é—®é¢˜éƒ½å¯ä»¥å’Œå­¦é•¿æ²Ÿé€šï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šçš„äºº
ä¸€.å‰è¨€ è¿‘äº›å¹´æ¥ï¼Œéšç€ç§‘æŠ€çš„é£é€Ÿå‘å±•ï¼Œäº’è”ç½‘çš„æ™®åŠé€æ¸å»¶ä¼¸åˆ°å„è¡Œå„ä¸šä¸­ï¼Œç»™äººä»¬ç”Ÿæ´»å¸¦æ¥äº†ååˆ†çš„ä¾¿åˆ©ï¼Œæ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿåˆ©ç”¨è®¡ç®—æœºç½‘ç»œå®ç°ä¿¡æ¯åŒ–ç®¡ç†ï¼Œä½¿æ•´ä¸ªæ—…æ¸¸æ™¯åŒºæ¨èçš„å‘å±•å’ŒæœåŠ¡æ°´å¹³æœ‰æ˜¾è‘—æå‡ã€‚
æœ¬æ–‡æ‹Ÿé‡‡ç”¨PyCharmå¼€å‘å·¥å…·ï¼ŒPythonè¯­è¨€ã€Djangoæ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œåå°ä½¿ç”¨MySQLæ•°æ®åº“è¿›è¡Œä¿¡æ¯ç®¡ç†ï¼Œè®¾è®¡å¼€å‘çš„æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿã€‚é€šè¿‡è°ƒç ”å’Œåˆ†æï¼Œç³»ç»Ÿæ‹¥æœ‰ç®¡ç†å‘˜å’Œç”¨æˆ·ä¸¤ä¸ªè§’è‰²ï¼Œä¸»è¦å…·å¤‡æ³¨å†Œç™»å½•ã€ä¸ªäººä¿¡æ¯ä¿®æ”¹ã€ç”¨æˆ·ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹ä¿¡æ¯ã€æ—…æ¸¸æ™¯åŒºç­‰åŠŸèƒ½æ¨¡å—ã€‚å°†çº¸è´¨ç®¡ç†æœ‰æ•ˆå®ç°ä¸ºåœ¨çº¿ç®¡ç†ï¼Œæå¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚
äºŒ.æŠ€æœ¯ç¯å¢ƒ å¼€å‘è¯­è¨€ï¼šPython
pythonæ¡†æ¶ï¼šdjango
è½¯ä»¶ç‰ˆæœ¬ï¼špython3.7/python3.8
æ•°æ®åº“ï¼šmysql 5.7æˆ–æ›´é«˜ç‰ˆæœ¬
æ•°æ®åº“å·¥å…·ï¼šNavicat11
çˆ¬è™«æ¡†æ¶ï¼šScrapy
å¼€å‘è½¯ä»¶ï¼šPyCharm/vs code
å‰ç«¯æ¡†æ¶:vue.js
ä¸‰.åŠŸèƒ½è®¾è®¡ ç³»ç»Ÿç”¨ä¾‹å›¾å¦‚å›¾3-1ã€å›¾3-2ã€å›¾3-3ã€å›¾3-4æ‰€ç¤ºã€‚
ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾æ˜¯ç³»ç»Ÿè®¾è®¡é˜¶æ®µï¼Œç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾åªæ˜¯è¿™ä¸ªé˜¶æ®µä¸€ä¸ªåŸºç¡€ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ¶æ„å†³å®šäº†ç³»ç»Ÿçš„æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç³»ç»Ÿçš„æ ¹æ®ã€‚æœ¬ç³»ç»Ÿçš„æ•´ä¸ªè®¾è®¡ç»“æ„å¦‚å›¾æ‰€ç¤ºã€‚
å››.æ•°æ®è®¾è®¡ æ¦‚å¿µæ¨¡å‹çš„è®¾è®¡æ˜¯ä¸ºäº†æŠ½è±¡çœŸå®ä¸–ç•Œçš„ä¿¡æ¯ï¼Œå¹¶å¯¹ä¿¡æ¯ä¸–ç•Œè¿›è¡Œå»ºæ¨¡ã€‚å®ƒæ˜¯æ•°æ®åº“è®¾è®¡çš„å¼ºå¤§å·¥å…·ã€‚æ•°æ®åº“æ¦‚å¿µæ¨¡å‹è®¾è®¡å¯ä»¥é€šè¿‡E-Rå›¾æè¿°ç°å®ä¸–ç•Œçš„æ¦‚å¿µæ¨¡å‹ã€‚ç³»ç»Ÿçš„E-Rå›¾æ˜¾ç¤ºäº†ç³»ç»Ÿä¸­å®ä½“ä¹‹é—´çš„é“¾æ¥ã€‚è€Œä¸”Mysqlæ•°æ®åº“æ˜¯è‡ªæˆ‘ä¿æŠ¤èƒ½åŠ›æ¯”è¾ƒå¼ºçš„æ•°æ®åº“ï¼Œä¸‹å›¾ä¸»è¦æ˜¯å¯¹æ•°æ®åº“å®ä½“çš„E-Rå›¾ï¼š
äº”.éƒ¨åˆ†æ•ˆæœå±•ç¤º ç³»ç»Ÿå‰å°åŠŸèƒ½å®ç°æ•ˆæœ å½“æ¸¸å®¢æ‰“å¼€ç³»ç»Ÿçš„ç½‘å€åï¼Œé¦–å…ˆçœ‹åˆ°çš„å°±æ˜¯é¦–é¡µç•Œé¢ã€‚åœ¨è¿™é‡Œï¼Œæ¸¸å®¢èƒ½å¤Ÿçœ‹åˆ°æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿçš„å¯¼èˆªæ¡æ˜¾ç¤ºé¦–é¡µã€æ™¯ç‚¹ä¿¡æ¯ã€æ—…æ¸¸æ™¯åŒºã€æ™¯ç‚¹èµ„è®¯ã€ä¸ªäººä¸­å¿ƒã€‚ç³»ç»Ÿé¦–é¡µç•Œé¢å¦‚å›¾æ‰€ç¤ºï¼š
åœ¨ç³»ç»Ÿé¦–é¡µç‚¹å‡»ä¸­é—´çš„æ³¨å†Œ/ç™»å½•æŒ‰é’®ï¼Œç„¶åé¡µé¢è·³è½¬åˆ°æ³¨å†Œç™»å½•ç•Œé¢ï¼Œåæ¥è¾“å…¥ä¿¡æ¯å®Œæˆåï¼Œå•å‡»æ³¨å†Œæˆ–è€…ç™»å½•æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š
ç”¨æˆ·ç‚¹å‡»æ™¯ç‚¹ä¿¡æ¯ï¼Œåœ¨æ™¯ç‚¹ä¿¡æ¯é¡µé¢çš„æœç´¢æ è¾“å…¥æ™¯ç‚¹åç§°ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹æ˜Ÿçº§ã€æ™¯ç‚¹åœ°å€ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åå¯ä»¥æŸ¥çœ‹æ™¯ç‚¹åç§°ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹æ˜Ÿçº§ã€æ™¯ç‚¹å›¾ç‰‡ã€æ™¯ç‚¹åœ°å€ã€è¥ä¸šæ—¶é—´ã€å’¨è¯¢çƒ­çº¿ï¼Œè¿˜å¯ä»¥å¯¹æ™¯ç‚¹ä¿¡æ¯è¿›è¡Œæ”¶è—æˆ–è€…è¯„è®ºæ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºï¼š
æ™¯ç‚¹èµ„è®¯ï¼›åœ¨æ™¯ç‚¹èµ„è®¯é¡µé¢æŸ¥çœ‹æ ‡é¢˜ã€å†…å®¹ã€å‘å¸ƒæ—¶é—´ç­‰ä¿¡æ¯è¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š
åœ¨ä¸ªäººä¸­å¿ƒé¡µé¢å¯ä»¥è¾“å…¥ä¸ªäººè¯¦ç»†ä¿¡æ¯ï¼Œè¿›è¡Œä¿¡æ¯æ›´æ–°æ“ä½œï¼Œè¿˜å¯ä»¥å¯¹æˆ‘çš„æ”¶è—è¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š
ç³»ç»Ÿç®¡ç†å‘˜åŠŸèƒ½å®ç°æ•ˆæœ ç®¡ç†å‘˜ç™»å½•ï¼Œé€šè¿‡ç™»å½•é¡µé¢å¡«å†™ç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯ï¼Œç‚¹å‡»ç™»å½•æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç™»å½•è¿›å…¥ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿé¦–é¡µã€ä¸ªäººä¸­å¿ƒã€ç”¨æˆ·ç®¡ç†ã€æ™¯ç‚¹åˆ†ç±»ç®¡ç†ã€æ™¯ç‚¹ä¿¡æ¯ç®¡ç†ã€æ—…æ¸¸æ™¯åŒºç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰åŠŸèƒ½ï¼Œè¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»ç”¨æˆ·ç®¡ç†ï¼›åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢è¾“å…¥ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€å¤´åƒã€å¹´é¾„ã€æ‰‹æœºç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œæ–°å¢æˆ–åˆ é™¤ç”¨æˆ·ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»æ™¯ç‚¹ä¿¡æ¯ç®¡ç†ï¼›åœ¨æ™¯ç‚¹ä¿¡æ¯ç®¡ç†é¡µé¢è¾“å…¥æ™¯ç‚¹åç§°ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹æ˜Ÿçº§ã€æ™¯ç‚¹å›¾ç‰‡ã€æ™¯ç‚¹åœ°å€ã€è¥ä¸šæ—¶é—´ã€å’¨è¯¢çƒ­çº¿ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ã€æ–°å¢æˆ–åˆ é™¤æ™¯ç‚¹ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»æ—…æ¸¸æ™¯åŒºç®¡ç†ï¼›åœ¨æ—…æ¸¸æ™¯åŒºç®¡ç†é¡µé¢å¯¹æ ‡é¢˜ã€å°é¢ã€ä½ç½®ã€ä»·æ ¼ã€ç‚¹è¯„ã€è¯„è®ºç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢æˆ–åˆ é™¤æ—…æ¸¸æ™¯åŒºç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»ç³»ç»Ÿç®¡ç†ï¼›åœ¨ç³»ç»Ÿç®¡ç†é¡µé¢å¯¹ç³»ç»Ÿç®€ä»‹ã€è½®æ’­å›¾ç®¡ç†ã€æ™¯ç‚¹èµ„è®¯ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ç³»ç»Ÿä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
æ•°æ®å¯è§†åŒ–åˆ†æå¤§å±å±•ç¤ºå®ç°æ•ˆæœ æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿå±•ç¤ºå›¾ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
åœ¨æ€§åˆ«ç»Ÿè®¡é¡µé¢ç”¨é¥¼çŠ¶å›¾è¿›è¡Œå±•ç¤ºæ‰€ç¤ºã€‚
åœ¨ç”¨æˆ·å¹´é¾„åˆ†å¸ƒç»Ÿè®¡é¡µé¢ç”¨æ¡å½¢å›¾è¿›è¡Œå±•ç¤ºæ‰€ç¤ºã€‚
å…­.éƒ¨åˆ†åŠŸèƒ½ä»£ç  # æ•°æ®çˆ¬å–æ–‡ä»¶ import scrapy import pymysql import pymssql from ..items import QingdaolvyouItem import time import re import random import platform import json import os from urllib.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-05T09:15:00+08:00">
    <meta property="article:modified_time" content="2024-02-05T09:15:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å­¦ä¹ è€…" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å­¦ä¹ è€…</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">åŸºäºPython&#43;å¤§æ•°æ®çš„æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿè®¾è®¡ä¸å®ç°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ğŸ’—åšä¸»ä»‹ç»ï¼šâœŒå…¨ç½‘ç²‰ä¸10W+,CSDNå…¨æ ˆé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ï¼Œåšå®¢ä¹‹æ˜Ÿã€æ˜é‡‘/åä¸ºäº‘/é˜¿é‡Œäº‘ç­‰å¹³å°ä¼˜è´¨ä½œè€…ã€‚<br> ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ  æ¨èè®¢é˜…ğŸ‘‡ğŸ»<br> <a href="https://blog.csdn.net/qq_15801219/category_11466472.html">è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ç²¾å“é¡¹ç›®æ¡ˆä¾‹-200å¥—</a><br> ğŸŒŸ<strong>æ–‡æœ«è·å–æºç +æ•°æ®åº“+æ–‡æ¡£</strong>ğŸŒŸ<br> æ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—èµ·æ¥ï¼Œè¿˜æœ‰å¤§å®¶åœ¨æ¯•è®¾é€‰é¢˜ï¼Œé¡¹ç›®ä»¥åŠè®ºæ–‡ç¼–å†™ç­‰ç›¸å…³é—®é¢˜éƒ½å¯ä»¥å’Œå­¦é•¿æ²Ÿé€šï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šçš„äºº</p> 
</blockquote> 
<h3><a id="_5"></a>ä¸€.å‰è¨€</h3> 
<p><img src="https://images2.imgbox.com/5a/d2/FktOp6pM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è¿‘äº›å¹´æ¥ï¼Œéšç€ç§‘æŠ€çš„é£é€Ÿå‘å±•ï¼Œäº’è”ç½‘çš„æ™®åŠé€æ¸å»¶ä¼¸åˆ°å„è¡Œå„ä¸šä¸­ï¼Œç»™äººä»¬ç”Ÿæ´»å¸¦æ¥äº†ååˆ†çš„ä¾¿åˆ©ï¼Œæ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿåˆ©ç”¨è®¡ç®—æœºç½‘ç»œå®ç°ä¿¡æ¯åŒ–ç®¡ç†ï¼Œä½¿æ•´ä¸ªæ—…æ¸¸æ™¯åŒºæ¨èçš„å‘å±•å’ŒæœåŠ¡æ°´å¹³æœ‰æ˜¾è‘—æå‡ã€‚<br> æœ¬æ–‡æ‹Ÿé‡‡ç”¨PyCharmå¼€å‘å·¥å…·ï¼ŒPythonè¯­è¨€ã€Djangoæ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œåå°ä½¿ç”¨MySQLæ•°æ®åº“è¿›è¡Œä¿¡æ¯ç®¡ç†ï¼Œè®¾è®¡å¼€å‘çš„æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿã€‚é€šè¿‡è°ƒç ”å’Œåˆ†æï¼Œç³»ç»Ÿæ‹¥æœ‰ç®¡ç†å‘˜å’Œç”¨æˆ·ä¸¤ä¸ªè§’è‰²ï¼Œä¸»è¦å…·å¤‡æ³¨å†Œç™»å½•ã€ä¸ªäººä¿¡æ¯ä¿®æ”¹ã€ç”¨æˆ·ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹ä¿¡æ¯ã€æ—…æ¸¸æ™¯åŒºç­‰åŠŸèƒ½æ¨¡å—ã€‚å°†çº¸è´¨ç®¡ç†æœ‰æ•ˆå®ç°ä¸ºåœ¨çº¿ç®¡ç†ï¼Œæå¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚</p> 
<hr> 
<h3><a id="_13"></a>äºŒ.æŠ€æœ¯ç¯å¢ƒ</h3> 
<p>å¼€å‘è¯­è¨€ï¼šPython<br> pythonæ¡†æ¶ï¼šdjango<br> è½¯ä»¶ç‰ˆæœ¬ï¼špython3.7/python3.8<br> æ•°æ®åº“ï¼šmysql 5.7æˆ–æ›´é«˜ç‰ˆæœ¬<br> æ•°æ®åº“å·¥å…·ï¼šNavicat11<br> çˆ¬è™«æ¡†æ¶ï¼šScrapy<br> å¼€å‘è½¯ä»¶ï¼šPyCharm/vs code<br> å‰ç«¯æ¡†æ¶:vue.js</p> 
<hr> 
<h3><a id="_25"></a>ä¸‰.åŠŸèƒ½è®¾è®¡</h3> 
<p>ç³»ç»Ÿç”¨ä¾‹å›¾å¦‚å›¾3-1ã€å›¾3-2ã€å›¾3-3ã€å›¾3-4æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/d5/d3/85FIpaSu_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/96/76/YT5emkV4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/0f/9e/i0lWpe4g_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/73/54/hqw7uBNj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾æ˜¯ç³»ç»Ÿè®¾è®¡é˜¶æ®µï¼Œç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾åªæ˜¯è¿™ä¸ªé˜¶æ®µä¸€ä¸ªåŸºç¡€ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ¶æ„å†³å®šäº†ç³»ç»Ÿçš„æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç³»ç»Ÿçš„æ ¹æ®ã€‚æœ¬ç³»ç»Ÿçš„æ•´ä¸ªè®¾è®¡ç»“æ„å¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/7a/8e/0nHaXxLa_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_41"></a>å››.æ•°æ®è®¾è®¡</h3> 
<p>æ¦‚å¿µæ¨¡å‹çš„è®¾è®¡æ˜¯ä¸ºäº†æŠ½è±¡çœŸå®ä¸–ç•Œçš„ä¿¡æ¯ï¼Œå¹¶å¯¹ä¿¡æ¯ä¸–ç•Œè¿›è¡Œå»ºæ¨¡ã€‚å®ƒæ˜¯æ•°æ®åº“è®¾è®¡çš„å¼ºå¤§å·¥å…·ã€‚æ•°æ®åº“æ¦‚å¿µæ¨¡å‹è®¾è®¡å¯ä»¥é€šè¿‡E-Rå›¾æè¿°ç°å®ä¸–ç•Œçš„æ¦‚å¿µæ¨¡å‹ã€‚ç³»ç»Ÿçš„E-Rå›¾æ˜¾ç¤ºäº†ç³»ç»Ÿä¸­å®ä½“ä¹‹é—´çš„é“¾æ¥ã€‚è€Œä¸”Mysqlæ•°æ®åº“æ˜¯è‡ªæˆ‘ä¿æŠ¤èƒ½åŠ›æ¯”è¾ƒå¼ºçš„æ•°æ®åº“ï¼Œä¸‹å›¾ä¸»è¦æ˜¯å¯¹æ•°æ®åº“å®ä½“çš„E-Rå›¾ï¼š<br> <img src="https://images2.imgbox.com/b1/8b/nlGWS41U_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/bf/17/BpySrfFo_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_49"></a>äº”.éƒ¨åˆ†æ•ˆæœå±•ç¤º</h3> 
<h4><a id="_51"></a>ç³»ç»Ÿå‰å°åŠŸèƒ½å®ç°æ•ˆæœ</h4> 
<p>å½“æ¸¸å®¢æ‰“å¼€ç³»ç»Ÿçš„ç½‘å€åï¼Œé¦–å…ˆçœ‹åˆ°çš„å°±æ˜¯é¦–é¡µç•Œé¢ã€‚åœ¨è¿™é‡Œï¼Œæ¸¸å®¢èƒ½å¤Ÿçœ‹åˆ°æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿçš„å¯¼èˆªæ¡æ˜¾ç¤ºé¦–é¡µã€æ™¯ç‚¹ä¿¡æ¯ã€æ—…æ¸¸æ™¯åŒºã€æ™¯ç‚¹èµ„è®¯ã€ä¸ªäººä¸­å¿ƒã€‚ç³»ç»Ÿé¦–é¡µç•Œé¢å¦‚å›¾æ‰€ç¤ºï¼š<br> <img src="https://images2.imgbox.com/6a/b5/cab3QoE4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨ç³»ç»Ÿé¦–é¡µç‚¹å‡»ä¸­é—´çš„æ³¨å†Œ/ç™»å½•æŒ‰é’®ï¼Œç„¶åé¡µé¢è·³è½¬åˆ°æ³¨å†Œç™»å½•ç•Œé¢ï¼Œåæ¥è¾“å…¥ä¿¡æ¯å®Œæˆåï¼Œå•å‡»æ³¨å†Œæˆ–è€…ç™»å½•æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p> 
<p><img src="https://images2.imgbox.com/67/4c/XoyK51MY_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç”¨æˆ·ç‚¹å‡»æ™¯ç‚¹ä¿¡æ¯ï¼Œåœ¨æ™¯ç‚¹ä¿¡æ¯é¡µé¢çš„æœç´¢æ è¾“å…¥æ™¯ç‚¹åç§°ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹æ˜Ÿçº§ã€æ™¯ç‚¹åœ°å€ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åå¯ä»¥æŸ¥çœ‹æ™¯ç‚¹åç§°ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹æ˜Ÿçº§ã€æ™¯ç‚¹å›¾ç‰‡ã€æ™¯ç‚¹åœ°å€ã€è¥ä¸šæ—¶é—´ã€å’¨è¯¢çƒ­çº¿ï¼Œè¿˜å¯ä»¥å¯¹æ™¯ç‚¹ä¿¡æ¯è¿›è¡Œæ”¶è—æˆ–è€…è¯„è®ºæ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºï¼š</p> 
<p><img src="https://images2.imgbox.com/fc/71/z2kCcFuC_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ™¯ç‚¹èµ„è®¯ï¼›åœ¨æ™¯ç‚¹èµ„è®¯é¡µé¢æŸ¥çœ‹æ ‡é¢˜ã€å†…å®¹ã€å‘å¸ƒæ—¶é—´ç­‰ä¿¡æ¯è¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š<br> <img src="https://images2.imgbox.com/d3/78/SZJb3Is7_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨ä¸ªäººä¸­å¿ƒé¡µé¢å¯ä»¥è¾“å…¥ä¸ªäººè¯¦ç»†ä¿¡æ¯ï¼Œè¿›è¡Œä¿¡æ¯æ›´æ–°æ“ä½œï¼Œè¿˜å¯ä»¥å¯¹æˆ‘çš„æ”¶è—è¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š<br> <img src="https://images2.imgbox.com/2e/ca/ErLxY6xO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="_78"></a>ç³»ç»Ÿç®¡ç†å‘˜åŠŸèƒ½å®ç°æ•ˆæœ</h4> 
<p>ç®¡ç†å‘˜ç™»å½•ï¼Œé€šè¿‡ç™»å½•é¡µé¢å¡«å†™ç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯ï¼Œç‚¹å‡»ç™»å½•æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/50/3b/P0MaggQJ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç™»å½•è¿›å…¥ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿé¦–é¡µã€ä¸ªäººä¸­å¿ƒã€ç”¨æˆ·ç®¡ç†ã€æ™¯ç‚¹åˆ†ç±»ç®¡ç†ã€æ™¯ç‚¹ä¿¡æ¯ç®¡ç†ã€æ—…æ¸¸æ™¯åŒºç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰åŠŸèƒ½ï¼Œè¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/4d/71/gU1T8vKi_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»ç”¨æˆ·ç®¡ç†ï¼›åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢è¾“å…¥ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€å¤´åƒã€å¹´é¾„ã€æ‰‹æœºç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œæ–°å¢æˆ–åˆ é™¤ç”¨æˆ·ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/f1/68/j1lMESkM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»æ™¯ç‚¹ä¿¡æ¯ç®¡ç†ï¼›åœ¨æ™¯ç‚¹ä¿¡æ¯ç®¡ç†é¡µé¢è¾“å…¥æ™¯ç‚¹åç§°ã€æ™¯ç‚¹åˆ†ç±»ã€æ™¯ç‚¹æ˜Ÿçº§ã€æ™¯ç‚¹å›¾ç‰‡ã€æ™¯ç‚¹åœ°å€ã€è¥ä¸šæ—¶é—´ã€å’¨è¯¢çƒ­çº¿ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ã€æ–°å¢æˆ–åˆ é™¤æ™¯ç‚¹ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/09/d1/evlgnB1H_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»æ—…æ¸¸æ™¯åŒºç®¡ç†ï¼›åœ¨æ—…æ¸¸æ™¯åŒºç®¡ç†é¡µé¢å¯¹æ ‡é¢˜ã€å°é¢ã€ä½ç½®ã€ä»·æ ¼ã€ç‚¹è¯„ã€è¯„è®ºç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢æˆ–åˆ é™¤æ—…æ¸¸æ™¯åŒºç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/24/e3/VviGDcLg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»ç³»ç»Ÿç®¡ç†ï¼›åœ¨ç³»ç»Ÿç®¡ç†é¡µé¢å¯¹ç³»ç»Ÿç®€ä»‹ã€è½®æ’­å›¾ç®¡ç†ã€æ™¯ç‚¹èµ„è®¯ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ç³»ç»Ÿä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/2c/b4/dS11VpYr_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="_110"></a>æ•°æ®å¯è§†åŒ–åˆ†æå¤§å±å±•ç¤ºå®ç°æ•ˆæœ</h4> 
<p>æ—…æ¸¸æ™¯åŒºæ¨èç³»ç»Ÿå±•ç¤ºå›¾ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/52/40/MuKSxffU_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨æ€§åˆ«ç»Ÿè®¡é¡µé¢ç”¨é¥¼çŠ¶å›¾è¿›è¡Œå±•ç¤ºæ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/5f/2f/IrUbllNe_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨ç”¨æˆ·å¹´é¾„åˆ†å¸ƒç»Ÿè®¡é¡µé¢ç”¨æ¡å½¢å›¾è¿›è¡Œå±•ç¤ºæ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/d5/2d/v0C1OtMe_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_130"></a>å…­.éƒ¨åˆ†åŠŸèƒ½ä»£ç </h3> 
<pre><code class="prism language-python"><span class="token comment"># æ•°æ®çˆ¬å–æ–‡ä»¶</span>

<span class="token keyword">import</span> scrapy
<span class="token keyword">import</span> pymysql
<span class="token keyword">import</span> pymssql
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>items <span class="token keyword">import</span> QingdaolvyouItem
<span class="token keyword">import</span> time
<span class="token keyword">import</span> re
<span class="token keyword">import</span> random
<span class="token keyword">import</span> platform
<span class="token keyword">import</span> json
<span class="token keyword">import</span> os
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> emoji

<span class="token comment"># æ—…æ¸¸ç¥¨åŠ¡</span>
<span class="token keyword">class</span> <span class="token class-name">QingdaolvyouSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'qingdaolvyouSpider'</span>
    spiderUrl <span class="token operator">=</span> <span class="token string">'https://piao.qunar.com/ticket/list.htm?keyword=%E9%9D%92%E5%B2%9B&amp;region=%E9%9D%92%E5%B2%9B&amp;from=mpshouye_hotcity&amp;page={}'</span>
    start_urls <span class="token operator">=</span> spiderUrl<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">";"</span><span class="token punctuation">)</span>
    protocol <span class="token operator">=</span> <span class="token string">''</span>
    hostname <span class="token operator">=</span> <span class="token string">''</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"cookie"</span><span class="token punctuation">:</span><span class="token string">"SECKEY_ABVK=vlhpRLsLQG31Po7dyp9LqZqIVWCqTw4N5fBZ1DsuytI%3D; BMAP_SECKEY=fYAVeumEoDJpvS6t9mUnIfl7ylS6g05LSr9A_ZA18UssrV2x9Nvb--l3q9TLiknfzexlawoBsTebfVGIHzfyqOYfo51s-Ty6bZN2gB7dr1ALnVPRdfYiZs3FsCl2tC0PoI6DkXokTEOHVASpbWqBKuvneDEGUXxubzmT6qyM8jikWfPePl74wseQQxqH3SH3; QN1=00008c0031984ca726d0ccdd; HN1=v1d5a05c0541e94af107a046147dde57e6; HN2=qungnknsnqczr; QN300=s%3Dbaidu; _i=DFiEuMlwNifDZ7e6ttNii8l8C0yw; QN269=3C0E7D80A48D11EDA4E6FA163E7C276C; fid=c122ef21-269d-44af-816b-a3af77b6e9a0; ctt_june=1654604625968##iK3wWsjmahPwawPwa%3DXNWK0GE2GIaRkTESWRa%3Da8aDkGES0REDPsXPWGWKj8iK3siK3saKj%2BWKPnWsj%2BaSjnVuPwaUvt; ctf_june=1654604625968##iK3wVRtnahPwawPwasWGa%3DasWK2naS2%3DaSETVPDmWSXNWSvmXSWGX%3DPOVRDniK3siK3saKj%2BWKPnWsjmaSj%3DWwPwaUvt; cs_june=a4e7c8acd60e0c8483c9c4af0f303f81fd7bf3054fa1059b680a62984007c656679c337a756eb8f3b21f18c3ca84c016ab0131ff331f4cb4e98fa22f3456d33eb17c80df7eee7c02a9c1a6a5b97c117961a58ae707d2d19d229b1e3a0abd1ac65a737ae180251ef5be23400b098dd8ca; qunar-assist={%22version%22:%2220211215173359.925%22%2C%22show%22:false%2C%22audio%22:false%2C%22speed%22:%22middle%22%2C%22zomm%22:1%2C%22cursor%22:false%2C%22pointer%22:false%2C%22bigtext%22:false%2C%22overead%22:false%2C%22readscreen%22:false%2C%22theme%22:%22default%22}; QN205=organic; QN277=organic; csrfToken=CHPGSBwmGivAQIY68e9qdAdiTV3ndNSv; QN57=16773851843530.3742666257450069; Hm_lvt_15577700f8ecddb1a927813c81166ade=1677385185; QN267=9396775017807b72f; _vi=kLcz4BXbLA-Z_dmzAME0UN9x6XaB-aiI3ZQP-imSw9FAo6neFHeLQ5sMT6sMGgFb5a8IfmLRa7vmEMF3xiAAC7OMS4j9DgEidNCIF7BZoBbk58pE_3MLJ42UlqZfLutL8q10pZv62VI2_1_qG1wdurlugFXSrwHiB_htc5SdZS6G; QN58=1677387675012%7C1677387675012%7C1; ariaDefaultTheme=undefined; Hm_lpvt_15577700f8ecddb1a927813c81166ade=1677387675; __qt=v1%7CVTJGc2RHVmtYMS9NUFFkYWJvb2FuMVkzNDhtbjNjU0lZQUhsdmlmeUlENW91YjBzZTdodm9FVGdOWTVFUzh6dnVJTFVtUDNVQjFMa1RRVy82NjZoTWRYY2NKcGIxMGlnZnhqOG9tMy9sYjdjbUthUGdQVC92T0U2RTNJR0lKaWc5elpiMzBpWGxJZ0o4UjlueEMvMmZnPT0%3D%7C1677387675401%7CVTJGc2RHVmtYMTlEUVJsa1RGdmswaFhyMXFlQkZOUnFvNCt0OGxtTGtjNWt4VzdmbDluZFBBZVdlRGptcTFJZXAyOXIxaFRqQk5RY0pCdms3bzkwRmc9PQ%3D%3D%7CVTJGc2RHVmtYMStqelpiM1RGUERkbHpQY1J2MHo5Nk9wcWYvRnlDOUxERUk4RVExOTllczRSNUlhSGxmUmlsRXpzdTBGN052RjVzVmRwcG4raFRQWHRUNXdhbFNyR1RLNU9iY0hRU1BMK05UaHRRUTcwbUwvbWdMeEI4RnY2Y3l3SlV2ZFBFTHZGV2tobVJlcG5aUXhyL3FPcHRkZmx0VXZtR3hoRUJxcjh1ZjBJcFZVS1l5RmQ4NC9Xa0VjbGoySEVZcG03S2pKVEVSaWlVVHU2Z2haTExReXJoOFAvN3pKOUJjWnBQZmJSVWxsUk9Yd0tCZk53Uk9wSXZ0Z29LNTdSN3JrSHV1MFlZc20xdWxkQVZ6bUx3THBLcEcwNDhiRGhSNHlpWngrU01uVG10YjFKMC9jb2VtSmI3ajlkRDAzd3VLcTBNVGY4R0FBQTd1SlozdWpPMkVFdDRBT0l1UVVsblpJbXdXSXI3eWRSZG4vMnNkK00wR0xSU2JxZU8zNlROU2xQcGQxVkNKT3ZQK1diaVA3NzZjeHpObkE2bnRhTG52R3FqaStkQkN5UVpQaTd3amwySVlvaEtXdGlNcjByQWNzRHo0Njd2TzJlVFVaaVdla1U5RUIzRU5veFJCWXZkU2haYUpyeHRjY0t2M3pOd0U2a0JsM2pnakRZbCtTVE12QWNpR0dXS2Z6T3oxNVoxeHBXVzVSeEUzNU1OZ2Ezc2RKcFg1STVHWkZvL0ZHMWtIS0doRDlpQnNWK0Y5UkxnaklCc2p5alZFdTRxaEVsVkdjQThNV1N0L29QaVBmR3l2RDRneHNVUUhMU3ZOdnVlMi8rb3VaeWFFcm9VUDh1T1NiZURBblVCSHJkNjlDSU1QbUdJcTNvbWpUb0tJNFE0cUZLSDI4ckw5bmpCSjFtK1Q0ZVRXWml6aDgrWWx1VU9SMnJkVUFHVmVtSmhGZHJ0RWI4TFp2eUVPSFZLalB1M29WcVlSb1oxQXZTVWhESW5ycVhnek4wSjNTYjNnRFNNK2JObXlVTXRpcFhiUEh2SkRzenMzSWdsdi9xOE9QeHI4VFRiUHdoZDFIWUlFL0E0SVVtL2NjdFlMY0hhNQ%3D%3D; JSESSIONID=F90B651C1C838D80BE882B24C9D63F8A; QN271=217bc6aa-758f-4cb5-8d18-a95283b08907"</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        plat <span class="token operator">=</span> platform<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> plat <span class="token operator">==</span> <span class="token string">'linux'</span> <span class="token keyword">or</span> plat <span class="token operator">==</span> <span class="token string">'windows'</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> self<span class="token punctuation">.</span>db_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
            cursor <span class="token operator">=</span> connect<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>table_exists<span class="token punctuation">(</span>cursor<span class="token punctuation">,</span> <span class="token string">'2o7ww_qingdaolvyou'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                connect<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>temp_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>

        pageNum <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">for</span> url <span class="token keyword">in</span> self<span class="token punctuation">.</span>start_urls<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'{}'</span> <span class="token keyword">in</span> url<span class="token punctuation">:</span>
                <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> pageNum<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    next_link <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
                    <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>
                        url<span class="token operator">=</span>next_link<span class="token punctuation">,</span>
                        headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>
                        callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse
                    <span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>
                    url<span class="token operator">=</span>url<span class="token punctuation">,</span>
                    callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse
                <span class="token punctuation">)</span>

    <span class="token comment"># åˆ—è¡¨è§£æ</span>
    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        
        _url <span class="token operator">=</span> urlparse<span class="token punctuation">(</span>self<span class="token punctuation">.</span>spiderUrl<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>protocol <span class="token operator">=</span> _url<span class="token punctuation">.</span>scheme
        self<span class="token punctuation">.</span>hostname <span class="token operator">=</span> _url<span class="token punctuation">.</span>netloc
        plat <span class="token operator">=</span> platform<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> plat <span class="token operator">==</span> <span class="token string">'windows_bak'</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
        <span class="token keyword">elif</span> plat <span class="token operator">==</span> <span class="token string">'linux'</span> <span class="token keyword">or</span> plat <span class="token operator">==</span> <span class="token string">'windows'</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> self<span class="token punctuation">.</span>db_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
            cursor <span class="token operator">=</span> connect<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>table_exists<span class="token punctuation">(</span>cursor<span class="token punctuation">,</span> <span class="token string">'2o7ww_qingdaolvyou'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                connect<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>temp_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>

        <span class="token builtin">list</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'div#search-list div[class~="sight_item"]'</span><span class="token punctuation">)</span>
        
        <span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">:</span>

            fields <span class="token operator">=</span> QingdaolvyouItem<span class="token punctuation">(</span><span class="token punctuation">)</span>



            fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'h3.sight_item_caption a.name::attr(href)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            fields<span class="token punctuation">[</span><span class="token string">"jiage"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'span.sight_item_price em::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            detailUrlRule <span class="token operator">=</span> item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'h3.sight_item_caption a.name::attr(href)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>protocol <span class="token keyword">in</span> detailUrlRule<span class="token punctuation">:</span>
                <span class="token keyword">pass</span>
            <span class="token keyword">elif</span> detailUrlRule<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'//'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                detailUrlRule <span class="token operator">=</span> self<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> detailUrlRule
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                detailUrlRule <span class="token operator">=</span> self<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">'://'</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>hostname <span class="token operator">+</span> detailUrlRule
                fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> detailUrlRule

            <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>detailUrlRule<span class="token punctuation">,</span> meta<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'fields'</span><span class="token punctuation">:</span> fields<span class="token punctuation">}</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>detail_parse<span class="token punctuation">)</span>


    <span class="token comment"># è¯¦æƒ…è§£æ</span>
    <span class="token keyword">def</span> <span class="token function">detail_parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        fields <span class="token operator">=</span> response<span class="token punctuation">.</span>meta<span class="token punctuation">[</span><span class="token string">'fields'</span><span class="token punctuation">]</span>

        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div.mp-description-detail div.mp-description-view span.mp-description-name::text'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"biaoti"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div.mp-description-detail div.mp-description-view span.mp-description-name::text'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'biaoti'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'biaoti'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'biaoti'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'biaoti'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"biaoti"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-description-detail div.mp-description-view span.mp-description-name::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"biaoti"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-description-detail div.mp-description-view span.mp-description-name::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div#mp-slider-content div.mp-description-image img::attr(src)'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"fengmian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div#mp-slider-content div.mp-description-image img::attr(src)'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'fengmian'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'fengmian'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'fengmian'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'fengmian'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"fengmian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div#mp-slider-content div.mp-description-image img::attr(src)'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"fengmian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div#mp-slider-content div.mp-description-image img::attr(src)'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div.mp-description-onesentence::text'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"miaoshu"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div.mp-description-onesentence::text'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'miaoshu'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'miaoshu'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'miaoshu'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'miaoshu'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"miaoshu"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-description-onesentence::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"miaoshu"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-description-onesentence::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''span.mp-description-address::text'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"weizhi"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''span.mp-description-address::text'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'weizhi'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'weizhi'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'weizhi'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'weizhi'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"weizhi"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''span.mp-description-address::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"weizhi"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''span.mp-description-address::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''span#mp-description-commentscore'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"dianping"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''span#mp-description-commentscore'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'dianping'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'dianping'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'dianping'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'dianping'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"dianping"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''span#mp-description-commentscore'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"dianping"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''span#mp-description-commentscore'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''span.mp-description-commentCount a::text'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"pinglun"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''span.mp-description-commentCount a::text'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'pinglun'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'pinglun'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'pinglun'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'pinglun'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"pinglun"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''span.mp-description-commentCount a::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"pinglun"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''span.mp-description-commentCount a::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div.mp-charact-intro div.mp-charact-desc'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"tese"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div.mp-charact-intro div.mp-charact-desc'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'tese'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'tese'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'tese'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'tese'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"tese"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-charact-intro div.mp-charact-desc'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"tese"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-charact-intro div.mp-charact-desc'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div.mp-charact-content div.mp-charact-desc'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"kaifangshijian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div.mp-charact-content div.mp-charact-desc'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'kaifangshijian'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'kaifangshijian'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'kaifangshijian'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'kaifangshijian'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"kaifangshijian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-charact-content div.mp-charact-desc'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"kaifangshijian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.mp-charact-content div.mp-charact-desc'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>




        <span class="token keyword">return</span> fields

    <span class="token comment"># å»é™¤å¤šä½™htmlæ ‡ç­¾</span>
    <span class="token keyword">def</span> <span class="token function">remove_html</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> html<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> html <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">''</span>
        pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'&lt;[^&gt;]+&gt;'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
        <span class="token keyword">return</span> pattern<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> html<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># æ•°æ®åº“è¿æ¥</span>
    <span class="token keyword">def</span> <span class="token function">db_connect</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">type</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'TYPE'</span><span class="token punctuation">,</span> <span class="token string">'mysql'</span><span class="token punctuation">)</span>
        host <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HOST'</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span>
        port <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'PORT'</span><span class="token punctuation">,</span> <span class="token number">3306</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        user <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'USER'</span><span class="token punctuation">,</span> <span class="token string">'root'</span><span class="token punctuation">)</span>
        password <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'PASSWORD'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">)</span>

        <span class="token keyword">try</span><span class="token punctuation">:</span>
            database <span class="token operator">=</span> self<span class="token punctuation">.</span>databaseName
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            database <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'DATABASE'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token builtin">type</span> <span class="token operator">==</span> <span class="token string">'mysql'</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span>host<span class="token punctuation">,</span> port<span class="token operator">=</span>port<span class="token punctuation">,</span> db<span class="token operator">=</span>database<span class="token punctuation">,</span> user<span class="token operator">=</span>user<span class="token punctuation">,</span> passwd<span class="token operator">=</span>password<span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> pymssql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span>host<span class="token punctuation">,</span> user<span class="token operator">=</span>user<span class="token punctuation">,</span> password<span class="token operator">=</span>password<span class="token punctuation">,</span> database<span class="token operator">=</span>database<span class="token punctuation">)</span>

        <span class="token keyword">return</span> connect

    <span class="token comment"># æ–­è¡¨æ˜¯å¦å­˜åœ¨</span>
    <span class="token keyword">def</span> <span class="token function">table_exists</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cursor<span class="token punctuation">,</span> table_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"show tables;"</span><span class="token punctuation">)</span>
        tables <span class="token operator">=</span> <span class="token punctuation">[</span>cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        table_list <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'(\'.*?\')'</span><span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">(</span>tables<span class="token punctuation">)</span><span class="token punctuation">)</span>
        table_list <span class="token operator">=</span> <span class="token punctuation">[</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">"'"</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span>each<span class="token punctuation">)</span> <span class="token keyword">for</span> each <span class="token keyword">in</span> table_list<span class="token punctuation">]</span>

        <span class="token keyword">if</span> table_name <span class="token keyword">in</span> table_list<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>

    <span class="token comment"># æ•°æ®ç¼“å­˜æº</span>
    <span class="token keyword">def</span> <span class="token function">temp_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        connect <span class="token operator">=</span> self<span class="token punctuation">.</span>db_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        cursor <span class="token operator">=</span> connect<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        sql <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
            insert into qingdaolvyou(
                laiyuan
                ,biaoti
                ,fengmian
                ,miaoshu
                ,weizhi
                ,dianping
                ,pinglun
                ,jiage
                ,tese
                ,kaifangshijian
            )
            select
                laiyuan
                ,biaoti
                ,fengmian
                ,miaoshu
                ,weizhi
                ,dianping
                ,pinglun
                ,jiage
                ,tese
                ,kaifangshijian
            from 2o7ww_qingdaolvyou
            where(not exists (select
                laiyuan
                ,biaoti
                ,fengmian
                ,miaoshu
                ,weizhi
                ,dianping
                ,pinglun
                ,jiage
                ,tese
                ,kaifangshijian
            from qingdaolvyou where
             qingdaolvyou.laiyuan=2o7ww_qingdaolvyou.laiyuan
            and qingdaolvyou.biaoti=2o7ww_qingdaolvyou.biaoti
            and qingdaolvyou.fengmian=2o7ww_qingdaolvyou.fengmian
            and qingdaolvyou.miaoshu=2o7ww_qingdaolvyou.miaoshu
            and qingdaolvyou.weizhi=2o7ww_qingdaolvyou.weizhi
            and qingdaolvyou.dianping=2o7ww_qingdaolvyou.dianping
            and qingdaolvyou.pinglun=2o7ww_qingdaolvyou.pinglun
            and qingdaolvyou.jiage=2o7ww_qingdaolvyou.jiage
            and qingdaolvyou.tese=2o7ww_qingdaolvyou.tese
            and qingdaolvyou.kaifangshijian=2o7ww_qingdaolvyou.kaifangshijian
            ))
            limit {0}
        '''</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
        connect<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

        connect<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>



</code></pre> 
<h3><a id="_440"></a>æœ€å</h3> 
<p><a href="https://yidianbishe.blog.csdn.net/article/details/131622291" rel="nofollow">æœ€æ–°è®¡ç®—æœºæ¯•ä¸šè®¾è®¡é€‰é¢˜ç¯‡-é€‰é¢˜æ¨èï¼ˆå€¼å¾—æ”¶è—ï¼‰</a><br> <a href="https://blog.csdn.net/qq_15801219/category_11466472.html">è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ç²¾å“é¡¹ç›®æ¡ˆä¾‹-200å¥—ï¼ˆå€¼å¾—è®¢é˜…ï¼‰</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14dfd217292319744b643271df6794ce/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">RabbitMQä¹‹äº¤æ¢æœº</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5b3c97e092b1d2f472433ab9b98734a8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ã€æŠ¥é”™è®°å½•ã€‘The project is using an incompatible version (AGP 8.3.0-alpha01) of the Android Gradle plugin.</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å­¦ä¹ è€….
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>