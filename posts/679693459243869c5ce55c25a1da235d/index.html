<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python单点知识】深入理解与应用类多态 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/679693459243869c5ce55c25a1da235d/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【Python单点知识】深入理解与应用类多态">
  <meta property="og:description" content="文章目录 0. 前言1. 多态类的概念2. Python中实现多态类的途径2.1 类的继承2.2 抽象基类2.3 duck typing 3. 多态类的应用场景4. 结论 0. 前言 按照国际惯例，首先声明：本文只是我自己学习的理解，虽然参考了他人的宝贵见解及成果，但是内容可能存在不准确的地方。如果发现文中错误，希望批评指正，共同进步。
本文介绍Python中的类的特征之一——多态性，核心是介绍多态类的实现途径。
在面向对象编程（OOP）中，多态是三大核心特性之一，与封装和继承并列。它赋予了程序更高的灵活性、可扩展性和可维护性。Python作为一门支持全面OOP特性的高级语言，其对多态的支持尤为出色。本文将详细介绍Python中多态类的概念、实现方式以及实际应用场景，旨在帮助读者深入理解并有效运用Python多态类。
1. 多态类的概念 多态，简单来说，是指同一操作作用于不同对象时，可以产生不同的行为。在Python中，这种“同一操作”通常表现为方法调用，而“不同对象”则指代具有相同接口（即方法名）但具体实现各异的类实例。多态的核心价值在于，它允许程序员以统一的方式处理多种数据类型，无需关注具体的类型细节，从而提升代码的抽象层次和复用性。
2. Python中实现多态类的途径 2.1 类的继承 这是实现多态最直接的方式。子类通过继承父类并重写其部分或全部方法，使得相同的方法名在不同子类中表现出不同的行为。例如：
class Animal: def make_sound(self): pass class Dog(Animal): def make_sound(self): return &#34;Woof!&#34; class Cat(Animal): def make_sound(self): return &#34;Meow!&#34; dog = Dog() cat = Cat() print(dog.make_sound()) # 输出: Woof! print(cat.make_sound()) # 输出: Meow! 在这个例子中，Dog和Cat类都继承自Animal类并重写了make_sound方法，实现了多态。尽管调用的是同名方法，但由于对象类型不同，实际执行的行为也各异。
2.2 抽象基类 Python提供了abc（Abstract Base Classes）模块来定义抽象基类，这些类包含抽象方法（未实现的方法），要求其子类必须实现这些方法。这为多态提供了一种形式化的约束机制。例如：
import abc class Shape(metaclass=abc.ABCMeta): @abc.abstractmethod def area(self): pass class Circle(Shape): def __init__(self, radius): self.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-12T11:47:06+08:00">
    <meta property="article:modified_time" content="2024-05-12T11:47:06+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python单点知识】深入理解与应用类多态</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#0__3" rel="nofollow">0. 前言</a></li><li><a href="#1__10" rel="nofollow">1. 多态类的概念</a></li><li><a href="#2_Python_14" rel="nofollow">2. Python中实现多态类的途径</a></li><li><ul><li><a href="#21__16" rel="nofollow">2.1 类的继承</a></li><li><a href="#22__41" rel="nofollow">2.2 抽象基类</a></li><li><a href="#23_duck_typing_65" rel="nofollow">2.3 duck typing</a></li></ul> 
    </li><li><a href="#3__115" rel="nofollow">3. 多态类的应用场景</a></li><li><a href="#4__123" rel="nofollow">4. 结论</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="0__3"></a>0. 前言</h4> 
<blockquote> 
 <p>按照国际惯例，首先声明：本文只是我自己学习的理解，虽然参考了他人的宝贵见解及成果，但是内容可能存在不准确的地方。如果发现文中错误，希望批评指正，共同进步。</p> 
</blockquote> 
<p>本文介绍Python中的类的特征之一——多态性，核心是介绍多态类的实现途径。</p> 
<p>在面向对象编程（OOP）中，<code>多态</code>是三大核心特性之一，与<code>封装</code>和<code>继承</code>并列。它赋予了程序更高的灵活性、可扩展性和可维护性。Python作为一门支持全面OOP特性的高级语言，其对多态的支持尤为出色。本文将详细介绍Python中多态类的概念、实现方式以及实际应用场景，旨在帮助读者深入理解并有效运用Python多态类。</p> 
<h4><a id="1__10"></a>1. 多态类的概念</h4> 
<p>多态，简单来说，是指<strong>同一操作作用于不同对象时，可以产生不同的行为</strong>。在Python中，这种“同一操作”通常表现为方法调用，而“不同对象”则指代具有相同接口（即方法名）但具体实现各异的类实例。多态的核心价值在于，它允许程序员以统一的方式处理多种数据类型，无需关注具体的类型细节，从而提升代码的抽象层次和复用性。</p> 
<h4><a id="2_Python_14"></a>2. Python中实现多态类的途径</h4> 
<h5><a id="21__16"></a>2.1 类的继承</h5> 
<p>这是实现多态最直接的方式。子类通过继承父类并重写其部分或全部方法，使得相同的方法名在不同子类中表现出不同的行为。例如：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">make_sound</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">make_sound</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Woof!"</span>

<span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">make_sound</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Meow!"</span>

dog <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token punctuation">)</span>
cat <span class="token operator">=</span> Cat<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>make_sound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Woof!</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>make_sound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Meow!</span>
</code></pre> 
<p>在这个例子中，<code>Dog</code>和<code>Cat</code>类都继承自<code>Animal</code>类并重写了<code>make_sound</code>方法，实现了多态。尽管调用的是同名方法，但由于对象类型不同，实际执行的行为也各异。</p> 
<h5><a id="22__41"></a>2.2 抽象基类</h5> 
<p>Python提供了abc（Abstract Base Classes）模块来定义抽象基类，这些类包含抽象方法（未实现的方法），要求其子类必须实现这些方法。这为多态提供了一种形式化的约束机制。例如：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> abc

<span class="token keyword">class</span> <span class="token class-name">Shape</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>abc<span class="token punctuation">.</span>ABCMeta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@abc<span class="token punctuation">.</span>abstractmethod</span>
    <span class="token keyword">def</span> <span class="token function">area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span>Shape<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius

    <span class="token keyword">def</span> <span class="token function">area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">3.14</span> <span class="token operator">*</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>

circle <span class="token operator">=</span> Circle<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>area<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: 314</span>
</code></pre> 
<p>在此例中，<code>Shape</code>是一个抽象基类，定义了抽象方法<code>area</code>。<code>Circle</code>类继承自<code>Shape</code>并实现了<code>area</code>方法，从而成为一个具体的多态类。</p> 
<h5><a id="23_duck_typing_65"></a>2.3 duck typing</h5> 
<p><strong>Duck Typing</strong>（鸭子类型）是Python编程语言中的一种动态类型特征，源自一句著名的说法：“If it looks like a duck, swims like a duck, and quacks like a duck, then it probably is a duck.”（如果它看起来像鸭子，游起来像鸭子，叫声也像鸭子，那么它很可能就是一只鸭子）。在编程语境中，这句话被引申为：只要一个对象具备特定的方法或属性，就可以按照这些方法或属性所暗示的行为来使用该对象，而无需关注对象的具体类型或继承关系。</p> 
<p><strong>核心思想</strong>：<br> Duck Typing的核心思想在于<strong>关注对象的行为而非其静态类型</strong>。在强类型语言中，通常需要显式地指定对象的类型，并且要求对象严格符合该类型定义。而在Python这样的动态类型语言中，duck typing鼓励程序员根据对象实际提供的接口（即其所能响应的方法和拥有的属性）来判断对象是否适用于特定场景，而非基于对象所属的预定义类型。</p> 
<p><strong>特点与优势</strong>：</p> 
<ol><li> <p><strong>动态性</strong>：Python在运行时检查对象的方法和属性，而非在编译阶段。这意味着即使两个对象类型不同，只要它们具有相同的方法签名和预期行为，就能在相同上下文中互换使用。</p> </li><li> <p><strong>灵活性</strong>：Duck Typing降低了代码对特定类型或类层次结构的依赖，使得代码更加灵活，易于扩展和修改。新加入的类只要满足所需接口，就可以无缝融入现有系统，无需修改原有代码。</p> </li><li> <p><strong>简洁性</strong>：由于不需要显式类型检查或复杂的类型转换，使用duck typing的代码通常更为简洁。Python中常见的<code>hasattr()</code>、<code>getattr()</code>等函数以及<code>try-except</code>块可用于检测对象是否支持所需的操作，进一步简化代码。</p> </li><li> <p><strong>解耦</strong>：Duck Typing促进了模块之间的松耦合。客户端代码无需了解对象的具体类型，只需依赖于对象提供的公共接口，这有助于提高代码的可复用性和可维护性。</p> </li></ol> 
<p>实例：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Duck</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">quack</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Quack!"</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Parrot</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">quack</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Polly wanna cracker!"</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">make_it_quack</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    animal<span class="token punctuation">.</span>quack<span class="token punctuation">(</span><span class="token punctuation">)</span>

duck <span class="token operator">=</span> Duck<span class="token punctuation">(</span><span class="token punctuation">)</span>
parrot <span class="token operator">=</span> Parrot<span class="token punctuation">(</span><span class="token punctuation">)</span>

make_it_quack<span class="token punctuation">(</span>duck<span class="token punctuation">)</span>  <span class="token comment"># 输出: Quack!</span>
make_it_quack<span class="token punctuation">(</span>parrot<span class="token punctuation">)</span>  <span class="token comment"># 输出: Polly wanna cracker!</span>
</code></pre> 
<p>在这个例子中，<code>Duck</code>和<code>Parrot</code>类虽然类型不同，但都提供了名为<code>quack</code>的方法。<code>make_it_quack</code>函数并不关心传入的<code>animal</code>对象具体是什么类型，只关注它是否有<code>quack</code>方法。因此，不论是<code>Duck</code>对象还是<code>Parrot</code>对象，只要能“quack like a duck”，就可以被函数接受并正确处理。</p> 
<p><strong>注意事项</strong>：<br> 尽管duck typing带来了诸多便利，但也需要注意潜在的问题：</p> 
<ol><li> <p><strong>类型错误</strong>：由于运行时才检查类型，可能导致在开发阶段难以发现的类型错误。对此，良好的单元测试和代码审查可以降低风险。</p> </li><li> <p><strong>文档与沟通</strong>：由于类型信息不明显，对于大型项目或团队协作，需要清晰的文档和沟通来确保所有参与者理解接口约定。</p> </li><li> <p><strong>性能影响</strong>：动态类型检查可能带来轻微的性能开销，但在大多数情况下，这种影响微乎其微，且通常不会成为性能瓶颈。</p> </li></ol> 
<p>综上所述，Python中的duck typing是一种基于对象行为而非类型的身份识别原则，它增强了代码的灵活性、简洁性和模块间的解耦，是Python动态类型特性的重要体现。在实践中，合理利用duck typing可以提升代码的可读性、可维护性和可扩展性，但也要注意防范潜在问题，确保代码的健壮性。</p> 
<h4><a id="3__115"></a>3. 多态类的应用场景</h4> 
<ol><li> <p><strong>设计模式的实现</strong>：许多设计模式如策略模式、工厂模式、装饰器模式等，都离不开多态的支持。通过多态，可以在运行时动态选择合适的对象进行操作，使得设计模式更具灵活性和适应性。</p> </li><li> <p><strong>API设计</strong>：在设计公共API时，多态有助于构建易于使用的接口。用户只需关注接口名称和参数，无需关心具体实现类的细节，降低了API的学习成本和使用难度。</p> </li><li> <p><strong>测试驱动开发（TDD）</strong>：多态使得编写针对接口而非实现的测试成为可能，有利于实现隔离测试，提高测试覆盖率和代码质量。</p> </li></ol> 
<h4><a id="4__123"></a>4. 结论</h4> 
<p>Python中的多态类是实现灵活、可扩展、可维护代码的重要工具。通过接口继承与方法重写、使用抽象基类以及利用duck typing，开发者可以轻松实现多态，并将其应用于设计模式、API设计、测试驱动开发等多种场景中。理解和熟练运用Python多态类，对于提升编程效率和代码质量具有重要意义。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e75ccdd02c483ecc7160efe56c1294f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【大数据】LSM树，专为海量数据读写而生的数据结构</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/840fc4ce5a88b2ff7ce14315a42efdde/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【大数据】HDFS、HBase操作教程（含指令和JAVA API）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>