<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据结构】链表专题3 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/e986146f04d0d39110e031ccf804303c/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【数据结构】链表专题3">
  <meta property="og:description" content="前言
本篇博客我们继续来讨论链表专题，今天的链表算法题是经典中的经典
💓 个人主页：小张同学zkf
⏩ 文章专栏：数据结构
若有问题 评论区见📝 🎉欢迎大家点赞👍收藏⭐文章
目录
1.判断链表是否有环
2.返回入环的第一个节点
3.随机链表的复制
1.判断链表是否有环 这道题链表尾指针很有可能指向链表中任何一个节点，所以是带环的意思，当然尾指针很有可能指向他自己
所以我们分析一下，该怎么判断带有环，有些人直接说我就判断是否和我原来的值相等，相等的话就是代表有环，但这种情况不能确保一定有环，因为即使我没进环也有可能值相等，所以这个行不通，所以我们要判断的话还得需要快慢指针，若快指针追上慢指针代表这链表有环，为什么快指针追上慢指针就会带有环那？
我们来画图分析一下
slow和fast最初都在头结点， 我们让fast一次走两步，slow一次走一步，假如没换那么fast或fast-&gt;next就会指向空，假如有环，那么fast先进环，slow后进环，若fast追上slow就证明了这个链表就带有环
代码如下
这道题曾经被一个面试官提出新的问题
为什么一定会相遇，有没有可能会错过，永远追不上？
我们先来看第一个问题，我们假设slow进环后与fast距离为N, 环的长度是C
那么fast追击slow的过程距离变化如下：
N为偶数 N为奇数 N N
N-2 N-2
N-4 N-4
…… ……
4 3
2 1
0 -1
可以看出N若为偶数追上了，若N为奇数，则代表fast错过了，需要新的一轮追击，此刻他们之间的距离就变成了C-1，继续追击，我们根据第一轮追击可以得知，C-1是偶数的话代表第二轮追上了，C-1还是奇数的话，又错了一位，距离又变成了C-1，C-1既然是奇数，那就代表永远追不上了
所以追不上的条件前提是，第二轮的C-1是奇数，第一轮的N是奇数，但我们想想这两个条件会不会同时存在
这里我们就需要用到数学列等式的思维来判断两个条件是否可以同时存在
我们假设进环之前的距离是L
那么slow刚进环时，slow走过的距离是L，此刻我们假设fast走了x圈，那fast走过的距离就是L&#43;x*C&#43;C-N
fast的距离是slow的三倍
那么就有了等式
3L=L&#43;x*C&#43;C-N
换算为：2*L=（x&#43;1)*C-N
偶数=（x&#43;1)*偶数-奇数
我们根据数学运算法则中 ,N是奇数时，C必须是奇数，才能使等式成立，N是偶数时，C必须也是偶数，才能使等式成立。
所以，当N是奇数时，C为奇数，C-1为偶数，所以C-1不可能为奇数，所以不可能永远追不上，肯定相遇。 结论：一定能追上
N是偶数第一轮就追上了
N是奇数第一轮追不上，第二轮就追上了
2.返回入环的第一个节点 上面那道题是判断是否有环，这道题就是若有环，返回环的第一个节点，所以我们还是需要用到快慢指针，我们画图表示
如图，这里其实有个非常巧妙的方法，我们让慢指针一次走一步，快指针一次走两步，直到环里相遇，再创建两个指针，一个从头开始走，另一个从快慢指针相遇的地方开始走，俩指针一次走一步，这俩指针若相遇，则相遇的点必定是进环的首节点
代码如下
可是为什么那？
我们还是用数学的方法来证明一下 我们假设，环之前的距离是L，环的长度为C，相遇点与入环点的距离为N，在慢指针进入环点时，快指针走了x圈
那么相遇时，slow走的距离是L&#43;N
fast走的距离是L&#43;x*C&#43;N
fast走的路程是slow两倍
那么就有了等式
2*（L&#43;N）=L&#43;x*C&#43;N">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-02T21:00:38+08:00">
    <meta property="article:modified_time" content="2024-05-02T21:00:38+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据结构】链表专题3</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#4da8ee;">前言</span></p> 
 <p><span style="color:#0d0016;">本篇博客我们继续来讨论链表专题，今天的链表算法题是经典中的经典</span></p> 
 <p><span style="color:#0d0016;">💓 个人主页：<a class="link-info" href="https://blog.csdn.net/m0_74091744?spm=1010.2135.3001.5421" title="小张同学zkf">小张同学zkf</a></span></p> 
 <p><span style="color:#0d0016;">⏩ 文章专栏：<a class="link-info" href="https://blog.csdn.net/m0_74091744/category_12630139.html?spm=1001.2014.3001.5482" title="数据结构">数据结构</a></span></p> 
 <p><span style="color:#0d0016;">若有问题 评论区见📝 </span></p> 
 <p><span style="color:#0d0016;">🎉欢迎大家点赞👍收藏⭐文章</span></p> 
 <p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/40/e4/Xj6stKB4_o.gif"></p> 
</blockquote> 
<p id="main-toc" style="text-align:center;"><img alt="" src="https://images2.imgbox.com/15/0b/YBr9RZtg_o.gif"></p> 
<p><img alt="" src="https://images2.imgbox.com/96/9c/LbcBc7I4_o.gif"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E5%88%A4%E6%96%AD%E9%93%BE%E8%A1%A8%E6%98%AF%E5%90%A6%E6%9C%89%E7%8E%AF-toc" style="margin-left:0px;"><a href="#1.%E5%88%A4%E6%96%AD%E9%93%BE%E8%A1%A8%E6%98%AF%E5%90%A6%E6%9C%89%E7%8E%AF" rel="nofollow">1.判断链表是否有环</a></p> 
<p id="2.%E8%BF%94%E5%9B%9E%E5%85%A5%E7%8E%AF%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9-toc" style="margin-left:0px;"><a href="#2.%E8%BF%94%E5%9B%9E%E5%85%A5%E7%8E%AF%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9" rel="nofollow">2.返回入环的第一个节点</a></p> 
<p id="3.%E9%9A%8F%E6%9C%BA%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6-toc" style="margin-left:0px;"><a href="#3.%E9%9A%8F%E6%9C%BA%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6" rel="nofollow">3.随机链表的复制</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<h2 id="1.%E5%88%A4%E6%96%AD%E9%93%BE%E8%A1%A8%E6%98%AF%E5%90%A6%E6%9C%89%E7%8E%AF">1.判断链表是否有环</h2> 
<p><img alt="" height="1076" src="https://images2.imgbox.com/40/98/am67Aoho_o.png" width="1200"></p> 
<p>这道题链表尾指针很有可能指向链表中任何一个节点，所以是带环的意思，当然尾指针很有可能指向他自己</p> 
<p><img alt="" height="291" src="https://images2.imgbox.com/df/5f/pJgL5qC5_o.png" width="963"></p> 
<p>所以我们分析一下，该怎么判断带有环，有些人直接说我就判断是否和我原来的值相等，相等的话就是代表有环，但这种情况不能确保一定有环，因为即使我没进环也有可能值相等，所以这个行不通，所以我们要判断的话还得需要快慢指针，若快指针追上慢指针代表这链表有环，为什么快指针追上慢指针就会带有环那？</p> 
<p style="text-align:center;"><img alt="" class="left" height="100" src="https://images2.imgbox.com/af/be/4kTxiTeQ_o.gif" width="100"></p> 
<p> 我们来画图分析一下</p> 
<p><img alt="" height="579" src="https://images2.imgbox.com/ff/38/zK255wac_o.png" width="1107"></p> 
<p>slow和fast最初都在头结点， 我们让fast一次走两步，slow一次走一步，假如没换那么fast或fast-&gt;next就会指向空，假如有环，那么fast先进环，slow后进环，若fast追上slow就证明了这个链表就带有环</p> 
<p>代码如下</p> 
<p><img alt="" height="579" src="https://images2.imgbox.com/1c/32/R7Z9yVWb_o.png" width="879"></p> 
<p>这道题曾经被一个面试官提出新的问题</p> 
<blockquote> 
 <p><span style="background-color:#ffd900;">为什么一定会相遇，有没有可能会错过，永远追不上？</span></p> 
</blockquote> 
<p>我们先来看第一个问题，我们假设slow进环后与fast距离为N, 环的长度是C</p> 
<p><img alt="" height="555" src="https://images2.imgbox.com/31/98/b4sB2R4l_o.png" width="1059"></p> 
<p>那么fast追击slow的过程距离变化如下：</p> 
<blockquote> 
 <p>N为偶数                 N为奇数 </p> 
 <p>N                            N</p> 
 <p>N-2                         N-2</p> 
 <p>N-4                         N-4</p> 
 <p>……                       ……</p> 
 <p>4                             3</p> 
 <p>2                            1</p> 
 <p>0                             -1</p> 
</blockquote> 
<p>可以看出N若为偶数追上了，若N为奇数，则代表fast错过了，需要新的一轮追击，此刻他们之间的距离就变成了C-1，继续追击，我们根据第一轮追击可以得知，C-1是偶数的话代表第二轮追上了，C-1还是奇数的话，又错了一位，距离又变成了C-1，C-1既然是奇数，那就代表永远追不上了</p> 
<p><img alt="" height="568" src="https://images2.imgbox.com/f2/38/moqELZr2_o.png" width="957"></p> 
<p><img alt="" height="666" src="https://images2.imgbox.com/c4/33/vaE5t9GX_o.png" width="1063"></p> 
<p>所以追不上的条件前提是，第二轮的C-1是奇数，第一轮的N是奇数，但我们想想这两个条件会不会同时存在</p> 
<p>这里我们就需要用到数学列等式的思维来判断两个条件是否可以同时存在</p> 
<p><img alt="" height="394" src="https://images2.imgbox.com/48/e9/DfhiiYX7_o.png" width="885"></p> 
<p>我们假设进环之前的距离是L</p> 
<p>那么slow刚进环时，slow走过的距离是L，此刻我们假设fast走了x圈，那fast走过的距离就是L+x*C+C-N</p> 
<p>fast的距离是slow的三倍</p> 
<p>那么就有了等式</p> 
<p>3L=L+x*C+C-N</p> 
<p>换算为：2*L=（x+1)*C-N</p> 
<p>偶数=（x+1)*偶数-奇数</p> 
<p>我们根据数学运算法则中 ,N是奇数时，C必须是奇数，才能使等式成立，N是偶数时，C必须也是偶数，才能使等式成立。</p> 
<p>所以，当N是奇数时，C为奇数，C-1为偶数，所以C-1不可能为奇数，所以不可能永远追不上，肯定相遇。                       </p> 
<p>结论：一定能追上</p> 
<p>N是偶数第一轮就追上了</p> 
<p>N是奇数第一轮追不上，第二轮就追上了</p> 
<hr> 
<h2 id="2.%E8%BF%94%E5%9B%9E%E5%85%A5%E7%8E%AF%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9">2.返回入环的第一个节点</h2> 
<p><img alt="" height="1084" src="https://images2.imgbox.com/60/51/IwNYk84V_o.png" width="1200"></p> 
<p></p> 
<p>上面那道题是判断是否有环，这道题就是若有环，返回环的第一个节点，所以我们还是需要用到快慢指针，我们画图表示</p> 
<p><img alt="" height="667" src="https://images2.imgbox.com/c5/26/BUARv3YY_o.png" width="815"></p> 
<p>如图，这里其实有个非常巧妙的方法，我们让慢指针一次走一步，快指针一次走两步，直到环里相遇，再创建两个指针，一个从头开始走，另一个从快慢指针相遇的地方开始走，俩指针一次走一步，这俩指针若相遇，则相遇的点必定是进环的首节点</p> 
<p>代码如下</p> 
<p><img alt="" height="643" src="https://images2.imgbox.com/fd/58/7XMmiZvH_o.png" width="585"></p> 
<p>可是为什么那？</p> 
<p style="text-align:center;"><img alt="" class="left" height="100" src="https://images2.imgbox.com/40/3f/n3bApEv3_o.gif" width="100"></p> 
<p>我们还是用数学的方法来证明一下 </p> 
<p><img alt="" height="667" src="https://images2.imgbox.com/2a/b0/8YmRGTbl_o.png" width="815"></p> 
<p>我们假设，环之前的距离是L，环的长度为C，相遇点与入环点的距离为N，在慢指针进入环点时，快指针走了x圈</p> 
<p>那么相遇时，slow走的距离是L+N</p> 
<p>fast走的距离是L+x*C+N</p> 
<p>fast走的路程是slow两倍</p> 
<p>那么就有了等式</p> 
<p>2*（L+N）=L+x*C+N</p> 
<p>最后换算成L=（x-1）*C+C-N</p> 
<p>假如x=1，那么L=C-N，正好是相遇点到入环首节点的距离与入环之前的距离相等，那么此时在头结点与相遇节点创建俩指针同时走，正好相遇在入环首节点，证实了我们上面的代码想法，但有人会想，你这里假设为1呀，我让它不为一，不唯一的话，相当于在相遇节点的指针多走了几圈C，最后还是在入环首节点相遇。</p> 
<hr> 
<h2 id="3.%E9%9A%8F%E6%9C%BA%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6">3.随机链表的复制</h2> 
<p><img alt="" height="964" src="https://images2.imgbox.com/ba/4c/diZqOQUU_o.png" width="1196"></p> 
<p></p> 
<p>这道题链表每个节点里多了个指针指向随机节点，也有可能指向空，然后我们要深拷贝一份（深拷贝意思就是把指针指向对应的值对应关系也要在新拷贝的链表中实现），有人说我直接遍历然后拷贝不就行了，硬拷贝是可以的，但是有个问题，随机指针（random）指向的值如何在新链表中实现，有人说我在新链表里继续找就行呀，但是我们仔细想一下，我们链表里值有可能有时相等，所以如果你先拷贝过去，然后再去找对应的值，可能找到的值不是原链表对应的值，而是值相等的那个位置的节点。</p> 
<p><img alt="" height="741" src="https://images2.imgbox.com/64/47/4LsinQEr_o.png" width="1200"></p> 
<p>比如就会出现图上这个情况，11找的就不是原来第四位的7，而是第一位的7，这就没拷贝成功。</p> 
<p>所以这道题这种做法是不行的</p> 
<p>我们先想一下，这道题我们要是先靠拷贝一下，然后插在原节点的后面其拷贝的节点就与源节点有了对应的关联关系</p> 
<p>我们画图看一下</p> 
<p><img alt="" height="483" src="https://images2.imgbox.com/a3/1e/9RUSd98N_o.png" width="1200"></p> 
<p>这一步代码如下</p> 
<p><img alt="" height="378" src="https://images2.imgbox.com/a0/a1/x11ASGmc_o.png" width="943"></p> 
<p>第二步控制random，拷贝完了，那拷贝那一份链表里的random怎么找那，其实很简单，<strong><span style="color:#fe2c24;"><span style="background-color:#ffd900;">拷贝的random是不是就是原值的random的next（这一点仔细想想，这一点想明白，这道题就没什么难点了）</span></span></strong></p> 
<p>第二步代码如下</p> 
<p><img alt="" height="654" src="https://images2.imgbox.com/cc/0a/EgVoci4e_o.png" width="1200"></p> 
<p>第三步尾插新链表，将拷贝在原链表的节点尾插新链表，并返回新链表的头结点</p> 
<p>代码如下</p> 
<p><img alt="" height="606" src="https://images2.imgbox.com/38/e3/HxXRWfc7_o.png" width="721"></p> 
<p>这道题整体代码如下</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/18/32/nEVh28lb_o.png" width="1045"></p> 
<p>相当于三个while嘛，一个while循环一步</p> 
<hr> 
<blockquote> 
 <p><span style="color:#4da8ee;">结束语</span> </p> 
 <p>链表有关算法题也就总结完了，从链表专题1到3都是特别经典的算法题，我们一定要反复练习掌握，OK，感谢观看！！！</p> 
 <p style="text-align:center;"><img alt="" class="left" height="100" src="https://images2.imgbox.com/d1/7c/pd3mkIZ9_o.gif" width="100"><img alt="" src="https://images2.imgbox.com/ad/1e/1FT6oNjy_o.gif"><img alt="" class="right" src="https://images2.imgbox.com/2a/b4/Pfm5VJg0_o.gif"></p> 
</blockquote> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/74862b7a46008a35f1dfc2e981dbd110/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构的队列（c语言版）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6fe4d877076eb99d734de70f2383443b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">探索AIGC技术：创新、挑战与责任</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>