<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java版【植物大战僵尸&#43;源码】 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/bcbf3f5c7c873fb513e0baabe0e2aed8/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="Java版【植物大战僵尸&#43;源码】">
  <meta property="og:description" content="上期回顾： 今天给大家推荐一个Gtihub开源项目：PythonPlantsVsZombies，翻译成中就是植物大战僵尸。
《植物大战僵尸》是一款极富策略性的小游戏。可怕的僵尸即将入侵，每种僵尸都有不同的特点，例如铁桶僵尸拥有极强的抗击打能力，矿工僵尸可以挖地道绕过种植在土壤表面的植物等。玩家防御僵尸的方式就是栽种植物。49种植物每种都有不同的功能，例如樱桃炸弹可以和周围一定范围内的所有僵尸同归于尽，而食人花可以吃掉最靠近自己的一只僵尸。玩家可以针对不同僵尸的弱点来合理地种植植物，这也是胜利的诀窍。游戏根据玩法不同分为五种游戏模式：冒险模式、迷你模式、解谜模式、生存模式、禅境花园。加之黑夜、屋顶、浓雾以及泳池之类的障碍增加了其挑战性。该游戏近乎永无止境。
文章地址：Python版【植物大战僵尸 &#43;源码】
粉丝福利： 文章目录 上期回顾：粉丝福利：写在前面：一、环境准备：二、游戏内容：三、实现思路：3.1 游戏架构设计：3.2 游戏元素实现：3.3 游戏逻辑处理：3.4 图形和动画：3.5 音效和背景音乐： 四、项目获取：欢迎添加微信，加入我的核心小队，请备注来意 写在前面： 小伙伴儿们大家好，我们又见面啦。在上一篇文章中，我向大家介绍了如何使用Python编程语言来实现经典的游戏——植物大战僵尸，并且分享了完整的源代码。这篇文章发布后，反响热烈，受到了众多小伙伴的热情追捧和积极反馈。在众多留言中，我注意到有不少小伙伴对Java版本的实现表现出了浓厚的兴趣。为了满足大家的期待，今天我特别准备了一份精心制作的内容——深入剖析Java版“植物大战僵尸”的实现原理，并细致解读其代码结构。
今天，我就为大家带来了另一款同样精彩的游戏分享——Java版的植物大战僵尸。在这篇文章中，我们将深入探讨Java语言实现植物大战僵尸的原理，并对代码进行详细的分析和讲解。无论你是Java初学者，还是有一定基础的开发者，相信这篇文章都能给你带来不少启发和收获。
那么，废话不多说，让我们共同开启今天的游戏之旅，一起领略Java版植物大战僵尸的魅力吧！希望通过这篇文章，大家能够更加深入地了解Java编程语言的强大功能，以及如何将这些功能应用到实际项目中，创造出更多有趣、实用的作品。
一、环境准备： 为了准备Java版植物大战僵尸的开发环境，你需要以下具体工具和版本：
JDK: Oracle JDK 8。确保安装了Java 8版本，因为它提供了广泛的库支持和稳定性。进行Java环境变量配置。
IDE: IntelliJ IDEA Community Edition 2021-03 或 Eclipse IDE 。这些IDE提供了用户友好的界面和强大的开发工具，适合Java开发。
版本控制系统: Git。用于代码的版本管理和协作开发。
依赖管理: Maven 3.8.3。帮助你管理项目的依赖库和构建过程。
二、游戏内容： 2.1、 游戏目标：
玩家的目标是在僵尸不断进攻的情况下，保护好房间不被僵尸闯入。玩家需要策略性地种植各种植物来抵御僵尸的进攻。
2.2 、植物卡牌系统：
游戏的左侧设有一个滚轮机会，它会不断地随机生成各种植物的卡牌。玩家可以通过鼠标点击来选中想要的植物卡牌，选中的植物卡牌会显示高亮或改变颜色，表示已被激活。当植物被选中后，鼠标指针会变成该植物的图标，并且可以移动到草地的任何位置进行放置。再次点击鼠标或空格键，玩家可以将选中的植物种植在指定的草地上，建立起防御阵线。 2.3 、植物功能介绍：
豌豆射手：基础攻击植物，可以发射豌豆攻击前方的僵尸。寒冰射手：发射冰冻豌豆，不仅能攻击僵尸，还能减缓僵尸的移动速度。三头豌豆射手：同时发射三颗豌豆，具有更强的攻击力。坚果：具有高耐久性，可以阻挡僵尸前进，为其他植物争取攻击时间。吹风草：具有特殊能力，可以一次性将所有屏幕上的僵尸吹出屏幕。地刺：放置在草地上后，会对经过的僵尸造成持续伤害。 2.4 、僵尸介绍：
游戏中有多种类型的僵尸，每种僵尸都有不同的血量和移动速度。击杀特定类型的僵尸，如足球僵尸，可以获得随机奖励，这些奖励会对僵尸产生特殊效果，如全屏僵尸死亡或全屏僵尸静止两秒等。 2.5 、游戏互动：
如果玩家对放置的植物不满意，可以使用铲子图标移除已种植的植物，为重新布局防御提供灵活性。游戏过程中，玩家需要注意植物的阳光产出，阳光是种植植物的货币，合理管理阳光资源对于建立有效的防御至关重要。 2.6 、游戏结束与重新开始：
如果有僵尸成功闯入房间，游戏即宣告结束。玩家可以选择点击重新开始游戏，进入新的一轮挑战。游戏可以设定不同的难度级别，随着游戏的进行，僵尸的数量和强度会逐渐增加，为玩家带来更大的挑战。 三、实现思路： 3.1 游戏架构设计： 采用面向对象的设计原则，将游戏中的各个元素（如植物、僵尸、子弹等）设计为不同的对象类。
使用MVC（Model-View-Controller）设计模式分离游戏的数据模型、用户界面和控制逻辑，以提高代码的可维护性和可扩展性。
3.2 游戏元素实现： 植物：定义不同类型的植物类，如向日葵、豌豆射手等，每种植物都有其特定的属性和行为，例如生成阳光、攻击僵尸等。僵尸：创建僵尸类，具有不同的类型和行为模式，例如普通僵尸、路障僵尸等，它们会沿着特定路径移动并向植物发起攻击。 铁桶僵尸：
package core.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-09T21:49:52+08:00">
    <meta property="article:modified_time" content="2024-05-09T21:49:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java版【植物大战僵尸&#43;源码】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>上期回顾：</h3> 
<blockquote> 
 <p>今天给大家推荐一个Gtihub开源项目：PythonPlantsVsZombies，翻译成中就是植物大战僵尸。<br> <img src="https://images2.imgbox.com/58/bb/i0xo5ewe_o.png" alt="在这里插入图片描述"></p> 
 <p>《植物大战僵尸》是一款极富策略性的小游戏。可怕的僵尸即将入侵，每种僵尸都有不同的特点，例如铁桶僵尸拥有极强的抗击打能力，矿工僵尸可以挖地道绕过种植在土壤表面的植物等。玩家防御僵尸的方式就是栽种植物。49种植物每种都有不同的功能，例如樱桃炸弹可以和周围一定范围内的所有僵尸同归于尽，而食人花可以吃掉最靠近自己的一只僵尸。玩家可以针对不同僵尸的弱点来合理地种植植物，这也是胜利的诀窍。游戏根据玩法不同分为五种游戏模式：冒险模式、迷你模式、解谜模式、生存模式、禅境花园。加之黑夜、屋顶、浓雾以及泳池之类的障碍增加了其挑战性。该游戏近乎永无止境。</p> 
</blockquote> 
<blockquote> 
 <p><strong>文章地址：<a href="https://blog.csdn.net/m0_68089732/article/details/137202714?spm=1001.2014.3001.5501">Python版【植物大战僵尸 +源码】</a></strong></p> 
</blockquote> 
<h3><a id="_9"></a>粉丝福利：</h3> 
<p><img src="https://images2.imgbox.com/83/63/BR9Unfky_o.jpg" alt="在这里插入图片描述"></p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_0" rel="nofollow">上期回顾：</a></li><li><a href="#_9" rel="nofollow">粉丝福利：</a></li><li><a href="#_15" rel="nofollow">写在前面：</a></li><li><a href="#_26" rel="nofollow">一、环境准备：</a></li><li><a href="#_38" rel="nofollow">二、游戏内容：</a></li><li><a href="#_78" rel="nofollow">三、实现思路：</a></li><li><ul><li><a href="#31__79" rel="nofollow">3.1 游戏架构设计：</a></li><li><a href="#32__83" rel="nofollow">3.2 游戏元素实现：</a></li><li><a href="#33__218" rel="nofollow">3.3 游戏逻辑处理：</a></li><li><a href="#34__916" rel="nofollow">3.4 图形和动画：</a></li><li><a href="#35__920" rel="nofollow">3.5 音效和背景音乐：</a></li></ul> 
   </li><li><a href="#_926" rel="nofollow">四、项目获取：</a></li><li><a href="#_932" rel="nofollow">欢迎添加微信，加入我的核心小队，请备注来意</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_15"></a>写在前面：</h3> 
<p>小伙伴儿们大家好，我们又见面啦。在上一篇文章中，我向大家介绍了如何使用Python编程语言来实现经典的游戏——植物大战僵尸，并且分享了完整的源代码。这篇文章发布后，反响热烈，受到了众多小伙伴的热情追捧和积极反馈。在众多留言中，我注意到有不少小伙伴对Java版本的实现表现出了浓厚的兴趣。为了满足大家的期待，今天我特别准备了一份精心制作的内容——深入剖析Java版“植物大战僵尸”的实现原理，并细致解读其代码结构。</p> 
<p>今天，我就为大家带来了另一款同样精彩的游戏分享——Java版的植物大战僵尸。在这篇文章中，我们将深入探讨Java语言实现植物大战僵尸的原理，并对代码进行详细的分析和讲解。无论你是Java初学者，还是有一定基础的开发者，相信这篇文章都能给你带来不少启发和收获。</p> 
<p><img src="https://images2.imgbox.com/dc/0c/4MadIbI5_o.png" alt="在这里插入图片描述"></p> 
<p>那么，废话不多说，让我们共同开启今天的游戏之旅，一起领略Java版植物大战僵尸的魅力吧！希望通过这篇文章，大家能够更加深入地了解Java编程语言的强大功能，以及如何将这些功能应用到实际项目中，创造出更多有趣、实用的作品。</p> 
<h3><a id="_26"></a>一、环境准备：</h3> 
<p>为了准备Java版植物大战僵尸的开发环境，你需要以下具体工具和版本：</p> 
<ol><li> <p><strong>JDK</strong>: Oracle JDK 8。确保安装了Java 8版本，因为它提供了广泛的库支持和稳定性。进行Java环境变量配置。</p> </li><li> <p><strong>IDE</strong>: IntelliJ IDEA Community Edition 2021-03 或 Eclipse IDE 。这些IDE提供了用户友好的界面和强大的开发工具，适合Java开发。</p> </li><li> <p><strong>版本控制系统</strong>: Git。用于代码的版本管理和协作开发。</p> </li><li> <p><strong>依赖管理</strong>: Maven 3.8.3。帮助你管理项目的依赖库和构建过程。</p> </li></ol> 
<h3><a id="_38"></a>二、游戏内容：</h3> 
<p><img src="https://images2.imgbox.com/85/bc/AizNZ5xV_o.png" alt="在这里插入图片描述"></p> 
<p>2.1、 <strong>游戏目标</strong>：<br> 玩家的目标是在僵尸不断进攻的情况下，保护好房间不被僵尸闯入。玩家需要策略性地种植各种植物来抵御僵尸的进攻。</p> 
<p>2.2 、<strong>植物卡牌系统</strong>：</p> 
<ul><li>游戏的左侧设有一个滚轮机会，它会不断地随机生成各种植物的卡牌。</li><li>玩家可以通过鼠标点击来选中想要的植物卡牌，选中的植物卡牌会显示高亮或改变颜色，表示已被激活。</li><li>当植物被选中后，鼠标指针会变成该植物的图标，并且可以移动到草地的任何位置进行放置。</li><li>再次点击鼠标或空格键，玩家可以将选中的植物种植在指定的草地上，建立起防御阵线。</li></ul> 
<p>2.3 、<strong>植物功能介绍</strong>：</p> 
<p><img src="https://images2.imgbox.com/30/5e/PpT3zkM4_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>豌豆射手</strong>：基础攻击植物，可以发射豌豆攻击前方的僵尸。</li><li><strong>寒冰射手</strong>：发射冰冻豌豆，不仅能攻击僵尸，还能减缓僵尸的移动速度。</li><li><strong>三头豌豆射手</strong>：同时发射三颗豌豆，具有更强的攻击力。</li><li><strong>坚果</strong>：具有高耐久性，可以阻挡僵尸前进，为其他植物争取攻击时间。</li><li><strong>吹风草</strong>：具有特殊能力，可以一次性将所有屏幕上的僵尸吹出屏幕。</li><li><strong>地刺</strong>：放置在草地上后，会对经过的僵尸造成持续伤害。</li></ul> 
<p>2.4 、<strong>僵尸介绍</strong>：</p> 
<ul><li>游戏中有多种类型的僵尸，每种僵尸都有不同的血量和移动速度。</li><li>击杀特定类型的僵尸，如足球僵尸，可以获得随机奖励，这些奖励会对僵尸产生特殊效果，如全屏僵尸死亡或全屏僵尸静止两秒等。</li></ul> 
<p>2.5 、<strong>游戏互动</strong>：</p> 
<ul><li>如果玩家对放置的植物不满意，可以使用铲子图标移除已种植的植物，为重新布局防御提供灵活性。</li><li>游戏过程中，玩家需要注意植物的阳光产出，阳光是种植植物的货币，合理管理阳光资源对于建立有效的防御至关重要。</li></ul> 
<p>2.6 、<strong>游戏结束与重新开始</strong>：</p> 
<ul><li>如果有僵尸成功闯入房间，游戏即宣告结束。玩家可以选择点击重新开始游戏，进入新的一轮挑战。</li><li>游戏可以设定不同的难度级别，随着游戏的进行，僵尸的数量和强度会逐渐增加，为玩家带来更大的挑战。</li></ul> 
<h3><a id="_78"></a>三、实现思路：</h3> 
<h4><a id="31__79"></a>3.1 游戏架构设计：</h4> 
<p>采用面向对象的设计原则，将游戏中的各个元素（如植物、僵尸、子弹等）设计为不同的对象类。<br> 使用MVC（Model-View-Controller）设计模式分离游戏的数据模型、用户界面和控制逻辑，以提高代码的可维护性和可扩展性。</p> 
<h4><a id="32__83"></a>3.2 游戏元素实现：</h4> 
<ul><li>植物：定义不同类型的植物类，如向日葵、豌豆射手等，每种植物都有其特定的属性和行为，例如生成阳光、攻击僵尸等。</li><li>僵尸：创建僵尸类，具有不同的类型和行为模式，例如普通僵尸、路障僵尸等，它们会沿着特定路径移动并向植物发起攻击。</li></ul> 
<p><strong>铁桶僵尸：</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">core<span class="token punctuation">.</span>zombies</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>image<span class="token punctuation">.</span></span><span class="token class-name">BufferedImage</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Zombie0</span> <span class="token keyword">extends</span> <span class="token class-name">Zombie</span><span class="token punctuation">{<!-- --></span>
	
	<span class="token comment">// 铁桶僵尸</span>
	<span class="token comment">// 加载图片</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">BufferedImage</span> imgs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
		imgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">"zombie0"</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">".png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 设置图片,0-4为生存，5-9为攻击</span>
	<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">BufferedImage</span> <span class="token function">getImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> imgs<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//0-4</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> imgs<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token operator">%</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//5-9</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 构造器</span>
	<span class="token keyword">public</span> <span class="token class-name">Zombie0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">166</span><span class="token punctuation">,</span><span class="token number">144</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		live <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
		xSpeed <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 僵尸移动</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token operator">-=</span> xSpeed<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 僵尸的停止状态结束</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">goRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		xSpeed <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>子弹：子弹类用于表示植物发射的攻击项目，需要实现子弹的移动轨迹和碰撞检测。</li></ul> 
<p><strong>普通豌豆子弹：</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">core<span class="token punctuation">.</span>bullets</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>image<span class="token punctuation">.</span></span><span class="token class-name">BufferedImage</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PeaBullet</span> <span class="token keyword">extends</span> <span class="token class-name">Bullet</span><span class="token punctuation">{<!-- --></span>
	
	<span class="token comment">// 豌豆子弹</span>
	<span class="token comment">// 加载图片</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">BufferedImage</span> imgs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
		imgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">"PeaBullet"</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">".png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 获取图片,0-3为子弹旋转移动</span>
	<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">BufferedImage</span> <span class="token function">getImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> imgs<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token operator">%</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//0-3</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 构造器</span>
	<span class="token keyword">public</span> <span class="token class-name">PeaBullet</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		xSpeed <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><strong>寒冰射手子弹：</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">core<span class="token punctuation">.</span>bullets</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>image<span class="token punctuation">.</span></span><span class="token class-name">BufferedImage</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SnowBullet</span> <span class="token keyword">extends</span> <span class="token class-name">Bullet</span><span class="token punctuation">{<!-- --></span>

	<span class="token comment">// 冰冻子弹</span>
	<span class="token comment">// 加载图片</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">BufferedImage</span> imgs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
		imgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">"SnowBullet"</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">".png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 获取图片,0-3为子弹旋转移动</span>
	<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">BufferedImage</span> <span class="token function">getImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> imgs<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token operator">%</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//0-3</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 构造器</span>
	<span class="token keyword">public</span> <span class="token class-name">SnowBullet</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		xSpeed <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="33__218"></a>3.3 游戏逻辑处理：</h4> 
<ul><li>实现游戏循环，不断更新游戏状态，包括植物的生长、僵尸的移动、子弹的发射等。</li><li>设计事件处理机制，响应用户输入和游戏内的事件（如植物被吃掉、僵尸被消灭）。</li><li>实现碰撞检测算法，用于判断子弹和僵尸、植物和僵尸之间的交互。</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">core<span class="token punctuation">.</span>game</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">Graphics</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">MouseAdapter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">MouseEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Timer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TimerTask</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>swing<span class="token punctuation">.</span></span><span class="token class-name">JFrame</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>swing<span class="token punctuation">.</span></span><span class="token class-name">JPanel</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span></span><span class="token class-name">Bullet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span></span><span class="token class-name">SnowBullet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">Blover</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">Plant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">Repeater</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">Shoot</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">SnowPea</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">Spikerock</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">ThreePeater</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>plants<span class="token punctuation">.</span></span><span class="token class-name">WallNut</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>zombies<span class="token punctuation">.</span></span><span class="token class-name">Award</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>zombies<span class="token punctuation">.</span></span><span class="token class-name">Zombie</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>zombies<span class="token punctuation">.</span></span><span class="token class-name">Zombie0</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>zombies<span class="token punctuation">.</span></span><span class="token class-name">Zombie1</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>zombies<span class="token punctuation">.</span></span><span class="token class-name">Zombie2</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">core<span class="token punctuation">.</span>zombies<span class="token punctuation">.</span></span><span class="token class-name">Zombie3</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 植物大战僵尸
 * 游戏内容：
 * 		左边的滚轮机会自动生成植物的卡牌，鼠标单击可以选中植物，
 * 被选中的植物将跟随鼠标移动，再次点击后，可在草地中放置植物。
 * 豌豆射手可以发射豌豆，寒冰射手发射的冰冻豌豆可以使僵尸减速，
 * 三头豌豆射手可以发射三颗豌豆，坚果可以阻止僵尸前进，吹风草
 * 可以将所有的僵尸吹到屏幕外。地刺会持续对僵尸进行攻击。若对
 * 放置的植物不满意，可以使用铲子，将草地上的植物移除。
 * 		不同的僵尸血量不同，移动速度不同。击杀足球僵尸后将获得
 * 随机奖励，奖励类型有：全屏僵尸死亡，全屏僵尸静止两秒等。
 * 		当有僵尸闯入房间，游戏结束。点击图标可重新开始游戏。
 * 
 */</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GamePlay</span> <span class="token keyword">extends</span> <span class="token class-name">JPanel</span><span class="token punctuation">{<!-- --></span>
	
	<span class="token comment">// 游戏窗口大小，游戏状态</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">WIDTH</span> <span class="token operator">=</span> <span class="token number">1400</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">HEIGHT</span> <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">START</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">RUNNING</span> <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">GAME_OVER</span> <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token comment">// 游戏的初始状态</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> state <span class="token operator">=</span> <span class="token constant">RUNNING</span><span class="token punctuation">;</span>

	<span class="token comment">// 背景</span>
	<span class="token keyword">private</span> <span class="token class-name">Background</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Background</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">533</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Background</span> running <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Background</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span><span class="token constant">HEIGHT</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Background</span> gameOver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Background</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span><span class="token constant">HEIGHT</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 游戏对象</span>
	<span class="token comment">// 僵尸集合</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Zombie</span><span class="token punctuation">&gt;</span></span> zombies <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Zombie</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 植物集合</span>
	<span class="token comment">// 滚轮机上的植物，状态为stop和wait</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span> plants <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 战场上的植物，状态为life和move</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span> plantsLife <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 子弹集合</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bullet</span><span class="token punctuation">&gt;</span></span> bullets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bullet</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 草地集合</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Glass</span><span class="token punctuation">&gt;</span></span> glasses <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Glass</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 铲子</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shovel</span><span class="token punctuation">&gt;</span></span> shovels <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shovel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 铲子入场</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shovelEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 铲子只有一把</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>shovels<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			shovels<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Shovel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 草地入场</span>
	<span class="token comment">// 第一块草地的坐标</span>
	<span class="token keyword">int</span> glassX <span class="token operator">=</span> <span class="token number">260</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> glassY <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">glassEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">9</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> x <span class="token operator">=</span> glassX <span class="token operator">+</span> i<span class="token operator">*</span><span class="token class-name">Glass</span><span class="token punctuation">.</span><span class="token constant">WIDTH</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">int</span> y <span class="token operator">=</span> glassY <span class="token operator">+</span> j<span class="token operator">*</span><span class="token class-name">Glass</span><span class="token punctuation">.</span><span class="token constant">HEIGHT</span><span class="token punctuation">;</span>
				glasses<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Glass</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 检测草地状态</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">glassCheckAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 先遍历所有草地，将状态改为空</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Glass</span> g<span class="token operator">:</span>glasses<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			g<span class="token punctuation">.</span><span class="token function">goEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 遍历所有植物，如果草地上有植物，将草地状态改为被占有</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">int</span> x1 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> y1 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> y <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 共点问题</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span>x1<span class="token operator">&amp;&amp;</span>y<span class="token operator">==</span>y1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>						
						g<span class="token punctuation">.</span><span class="token function">goHold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>						
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 生成僵尸</span>
	<span class="token keyword">public</span> <span class="token class-name">Zombie</span> <span class="token function">nextOneZombie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 控制不同种类僵尸出现的概率</span>
		<span class="token keyword">int</span> type <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Zombie0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Zombie1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Zombie2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Zombie3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 僵尸入场</span>
	<span class="token comment">// 设置进场间隔</span>
	<span class="token keyword">int</span> zombieEnterTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zombieEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		zombieEnterTime<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>zombieEnterTime<span class="token operator">%</span><span class="token number">300</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			zombies<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">nextOneZombie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//僵尸移动</span>
	<span class="token comment">//设置移动间隔</span>
	<span class="token keyword">int</span> zombieStepTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zombieStepAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>zombieStepTime<span class="token operator">++</span><span class="token operator">%</span><span class="token number">3</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">//只有活着的僵尸会移动</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					z<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 僵尸走到地刺上扣血</span>
	<span class="token comment">// 设置地刺攻击间隔</span>
	<span class="token keyword">int</span> spikerockHitTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zombieMoveToSpikerockAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>spikerockHitTime<span class="token operator">++</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p <span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 如果植物是地刺类型就去遍历僵尸集合</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Spikerock</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span> zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">int</span> x1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> x2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> x <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">// 如果僵尸在地刺上就扣血</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&gt;</span>x1<span class="token operator">&amp;&amp;</span>x<span class="token operator">&lt;</span>x2<span class="token operator">&amp;&amp;</span>y<span class="token operator">&gt;</span>y1<span class="token operator">&amp;&amp;</span>y<span class="token operator">&lt;</span>y2<span class="token operator">&amp;&amp;</span>p<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>z<span class="token punctuation">.</span><span class="token function">isAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							z<span class="token punctuation">.</span><span class="token function">loseLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 僵尸攻击</span>
	<span class="token comment">// 设置攻击间隔</span>
	<span class="token keyword">int</span> zombieHitTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zombieHitAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>zombieHitTime<span class="token operator">++</span><span class="token operator">%</span><span class="token number">100</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 如果战场上没有植物，则把所有僵尸的状态改为life</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>z<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					z<span class="token punctuation">.</span><span class="token function">goLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token comment">// 如果僵尸是活的，并且植物是活的，并且僵尸进入攻击植物的范围</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>p<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>z<span class="token punctuation">.</span><span class="token function">zombieHit</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Spikerock</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token comment">// 僵尸状态改为攻击状态</span>
						z<span class="token punctuation">.</span><span class="token function">goAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">// 植物掉血</span>
						p<span class="token punctuation">.</span><span class="token function">loseLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 检测僵尸状态</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkZombieAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 迭代器</span>
		<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Zombie</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> zombies<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">Zombie</span> z <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 僵尸血量小于0则死亡,死亡的僵尸从集合中删除</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">getLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 判断僵尸是否有奖励的接口</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>z <span class="token keyword">instanceof</span> <span class="token class-name">Award</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token class-name">Award</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Award</span><span class="token punctuation">)</span>z<span class="token punctuation">;</span>
					<span class="token keyword">int</span> type <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">getAwardType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">switch</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">case</span> <span class="token class-name">Award</span><span class="token punctuation">.</span><span class="token constant">CLEAR</span><span class="token operator">:</span>
						<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> zo<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							zo<span class="token punctuation">.</span><span class="token function">goDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token keyword">case</span> <span class="token class-name">Award</span><span class="token punctuation">.</span><span class="token constant">STOP</span><span class="token operator">:</span>
						<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> zom<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							zom<span class="token punctuation">.</span><span class="token function">goStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							timeStop <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
							<span class="token comment">//zombieGoLife();</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				z<span class="token punctuation">.</span><span class="token function">goDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 僵尸跑进房子，而游戏生命减一，并删除僵尸</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">z<span class="token punctuation">.</span></span>OutOfBound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				gameLife<span class="token operator">--</span><span class="token punctuation">;</span>
				it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 僵尸静止2秒后继续移动</span>
	<span class="token keyword">int</span> timeStop <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zombieGoLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>timeStop<span class="token operator">++</span><span class="token operator">%</span><span class="token number">200</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				z<span class="token punctuation">.</span><span class="token function">goRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 检测游戏状态</span>
	<span class="token comment">// 初始游戏生命值</span>
	<span class="token keyword">int</span> gameLife <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkGameAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>gameLife<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			state <span class="token operator">=</span> <span class="token constant">GAME_OVER</span><span class="token punctuation">;</span>
			<span class="token comment">// 游戏结束清空所有集合</span>
			plants<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			plantsLife<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			zombies<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bullets<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			shovels<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 生成植物</span>
	<span class="token keyword">public</span> <span class="token class-name">Plant</span> <span class="token function">nextOnePlant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> type <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 控制植物的出场概率</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Repeater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SnowPea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ThreePeater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Spikerock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">&lt;</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Blover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WallNut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 植物入场</span>
	<span class="token comment">// 设置进场间隔</span>
	<span class="token keyword">int</span> plantTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">plantEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		plantTime<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>plantTime<span class="token operator">%</span><span class="token number">300</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 添加到滚轮机集合中</span>
			plants<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">nextOnePlant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 植物移动</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">plantStepAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plants<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 只有滚轮机集合中的wait状态的植物会移动</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				p<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 植物在滚轮机上的碰撞判定</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">plantBangAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 遍历滚轮机上植物集合，从第二个开始</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>plants<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 如果第一个植物的y大于0，并且是stop状态，则状态改为wait</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">goWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 如果第i个植物y小于i-1个植物的y+height，则说明碰到了，改变i的状态为stop</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>
					plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">goStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">/*
			 * 如果第i个植物y大于于i-1个植物的y+height，则说明还没碰到或者第i-1个
			 * 植物被移走了，改变i的状态为wait，可以继续往上走
			 */</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span> 
					plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				plants<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">goWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 检测滚轮机上的植物状态</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkPlantAction1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 迭代器</span>
		<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> plants<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">Plant</span> p <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">/*
			 * 如果滚轮机集合里有move或者life状态的植物
			 * 则添加到战场植物的集合中，并从原数组中删除
			 */</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>p<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				plantsLife<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
				it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 检测战场上的植物状态</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkPlantAction2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 迭代器</span>
		<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> plantsLife<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">Plant</span> p <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 植物生命小于0死亡，死亡状态的植物从集合中移出</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				p<span class="token punctuation">.</span><span class="token function">goDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 检测吹风草的状态</span>
	<span class="token keyword">int</span> bloverTime <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkBloverAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>bloverTime<span class="token operator">++</span><span class="token operator">%</span><span class="token number">200</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p <span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Blover</span> <span class="token operator">&amp;&amp;</span>p<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Blover</span><span class="token punctuation">)</span> p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">goClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 子弹入场</span>
	<span class="token comment">// 控制子弹进场的间隔时间</span>
	<span class="token keyword">int</span> <span class="token class-name">BulletTime</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">BulletShootAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">BulletTime</span><span class="token operator">++</span><span class="token operator">%</span><span class="token number">50</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p <span class="token operator">:</span> plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Shoot</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token comment">// 如果植物有射击的接口</span>
						<span class="token class-name">Shoot</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Shoot</span><span class="token punctuation">)</span>p<span class="token punctuation">;</span>
						<span class="token comment">// 射击</span>
						<span class="token comment">//s.shoot();</span>
						<span class="token comment">// 把射击的子弹装进子弹数组</span>
						bullets<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">shoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 子弹移动</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">BulletStepAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Bullet</span> b<span class="token operator">:</span>bullets<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			b<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 子弹与僵尸的碰撞</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hitAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 遍历僵尸和子弹数组</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Bullet</span> b<span class="token operator">:</span>bullets<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 满足条件则僵尸扣血，子弹去死</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">isAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>z<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>b<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>b<span class="token punctuation">.</span><span class="token function">hit</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>z<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token class-name">GamePlay</span><span class="token punctuation">.</span><span class="token constant">WIDTH</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>b <span class="token keyword">instanceof</span> <span class="token class-name">SnowBullet</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						z<span class="token punctuation">.</span><span class="token function">goSlowDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					z<span class="token punctuation">.</span><span class="token function">loseLive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					b<span class="token punctuation">.</span><span class="token function">goDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 检测子弹状态</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bulletCheckAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bullet</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> bullets<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">Bullet</span> b <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 如果子弹死亡或者越界则删除</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">isDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>b<span class="token punctuation">.</span><span class="token function">isOutOfBound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 运行代码</span>
	<span class="token comment">// 鼠标上是否有植物和铲子的判定</span>
	<span class="token keyword">boolean</span> plantCheck <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> shovelCheck <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 生成草地</span>
		<span class="token function">glassEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 鼠标的相关操作</span>
		<span class="token class-name">MouseAdapter</span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MouseAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 鼠标点击事件</span>
			<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mouseClicked</span><span class="token punctuation">(</span><span class="token class-name">MouseEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 获得鼠标的坐标</span>
				<span class="token keyword">int</span> <span class="token class-name">Mx</span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> <span class="token class-name">My</span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//System.out.println(Mx+"-"+My);</span>

				<span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">RUNNING</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token comment">// 放置植物</span>
					f<span class="token operator">:</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>plantCheck<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Glass</span> g<span class="token operator">:</span>glasses<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token keyword">int</span> x1 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">int</span> x2 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>g<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">int</span> y1 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">int</span> y2 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>g<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
								<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Mx</span><span class="token operator">&gt;</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;</span>y2<span class="token operator">&amp;&amp;</span>g<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
									p<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">;</span>
									p<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
									g<span class="token punctuation">.</span><span class="token function">goHold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									p<span class="token punctuation">.</span><span class="token function">goLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									plantCheck <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
									<span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Blover</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
										bloverTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
									<span class="token keyword">break</span> f<span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>			
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token comment">// 使用铲子</span>
				<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shovel</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> shovels<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span> it2 <span class="token operator">=</span> plantsLife<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token class-name">Shovel</span> s <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 如果铲子是移动状态，就遍历植物集合</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">isMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">while</span><span class="token punctuation">(</span>it2<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token class-name">Plant</span> p  <span class="token operator">=</span> it2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">int</span> x1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">int</span> x2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">int</span> y1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">int</span> y2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Blover</span><span class="token punctuation">)</span> p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&gt;</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;</span>y2<span class="token operator">&amp;&amp;</span>shovelCheck<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token comment">// 移除植物</span>
								it2<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token comment">// 移除铲子</span>
								it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								shovelCheck <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// 鼠标单击后，植物将改变状态，随鼠标移动</span>
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plants<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>p<span class="token punctuation">.</span><span class="token function">isWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>plantCheck<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>shovelCheck<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">int</span> x1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> x2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>						
						<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Mx</span><span class="token operator">&gt;=</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;=</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;=</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;=</span>y2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							p<span class="token punctuation">.</span><span class="token function">goMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							plantCheck <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// 铲子被选中后随鼠标移动</span>
				<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shovel</span><span class="token punctuation">&gt;</span></span> it3 <span class="token operator">=</span> shovels<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>plantsLife<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">while</span><span class="token punctuation">(</span>it3<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token class-name">Shovel</span> s <span class="token operator">=</span> it3<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> x1 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> x2 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>s<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y1 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y2 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>s<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">isWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&gt;</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;</span>y2<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>plantCheck<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							s<span class="token punctuation">.</span><span class="token function">goMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							shovelCheck <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// 点击吹风草吹走僵尸</span>
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Blover</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">int</span> x1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> x2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y1 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">int</span> y2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Blover</span><span class="token punctuation">)</span> p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&gt;</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;</span>y2
					<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>plantCheck<span class="token operator">&amp;&amp;</span><span class="token operator">!</span>shovelCheck<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							p<span class="token punctuation">.</span><span class="token function">goDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token keyword">if</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">isAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
									z<span class="token punctuation">.</span><span class="token function">goLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
								z<span class="token operator">:</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
									z<span class="token punctuation">.</span><span class="token function">goOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token keyword">if</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token class-name">GamePlay</span><span class="token punctuation">.</span><span class="token constant">WIDTH</span><span class="token operator">-</span>z<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
										z<span class="token punctuation">.</span><span class="token function">goRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token keyword">break</span> z<span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token punctuation">}</span>	
				<span class="token comment">// 点击按钮开始游戏</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">START</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token number">720</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> x2 <span class="token operator">=</span> <span class="token number">990</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> y1 <span class="token operator">=</span> <span class="token number">210</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> y2 <span class="token operator">=</span> <span class="token number">320</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Mx</span><span class="token operator">&gt;=</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;=</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;=</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;=</span>y2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						state <span class="token operator">=</span> <span class="token constant">RUNNING</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// 点击按钮重新开始游戏</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">GAME_OVER</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token number">480</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> x2 <span class="token operator">=</span> <span class="token number">950</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> y1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
					<span class="token keyword">int</span> y2 <span class="token operator">=</span> <span class="token number">540</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Mx</span><span class="token operator">&gt;=</span>x1<span class="token operator">&amp;&amp;</span><span class="token class-name">Mx</span><span class="token operator">&lt;=</span>x2<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&gt;=</span>y1<span class="token operator">&amp;&amp;</span><span class="token class-name">My</span><span class="token operator">&lt;=</span>y2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token comment">// 重新开始游戏</span>
						state <span class="token operator">=</span> <span class="token constant">START</span><span class="token punctuation">;</span>
						gameLife <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// 鼠标移动事件</span>
			<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mouseMoved</span><span class="token punctuation">(</span><span class="token class-name">MouseEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">RUNNING</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token comment">// 被选中的植物随鼠标移动</span>
					<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>	
						<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">isMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token keyword">int</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							p<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token comment">// 被选中的铲子随鼠标移动</span>
					<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Shovel</span> s<span class="token operator">:</span>shovels<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">isMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token keyword">int</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							s<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addMouseListener</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addMouseMotionListener</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 定时器</span>
		<span class="token class-name">Timer</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> interval <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
		timer<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimerTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">RUNNING</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token function">shovelEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">zombieEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">zombieStepAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">zombieMoveToSpikerockAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">zombieHitAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">plantEnterAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">plantStepAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">plantBangAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">zombieGoLife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">BulletShootAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">BulletStepAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">hitAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">checkBloverAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">checkPlantAction1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">checkPlantAction2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">checkZombieAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">bulletCheckAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">glassCheckAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">checkGameAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">repaint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>interval<span class="token punctuation">,</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 画</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">paint</span><span class="token punctuation">(</span><span class="token class-name">Graphics</span> g<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 画背景</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">START</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			start<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">RUNNING</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			running<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token constant">GAME_OVER</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			gameOver<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 画植物</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plants<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			p<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plant</span> p<span class="token operator">:</span>plantsLife<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			p<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 画僵尸</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Zombie</span> z<span class="token operator">:</span>zombies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			z<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 画子弹</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Bullet</span> b<span class="token operator">:</span>bullets<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			b<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>		
		<span class="token comment">// 画铲子</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Shovel</span> s<span class="token operator">:</span>shovels<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			s<span class="token punctuation">.</span><span class="token function">paintObject</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">JFrame</span> frame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">GamePlay</span> game<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GamePlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		frame<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>game<span class="token punctuation">)</span><span class="token punctuation">;</span>

		frame<span class="token punctuation">.</span><span class="token function">setDefaultCloseOperation</span><span class="token punctuation">(</span><span class="token class-name">JFrame</span><span class="token punctuation">.</span><span class="token constant">EXIT_ON_CLOSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		frame<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		frame<span class="token punctuation">.</span><span class="token function">setLocationRelativeTo</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		frame<span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

		game<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 启动线程加载音乐</span>
		<span class="token class-name">Runnable</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">zombieAubio</span><span class="token punctuation">(</span><span class="token string">"bgm.wav"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
		t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="34__916"></a>3.4 图形和动画：</h4> 
<ul><li>使用Java的Swing或JavaFX库来绘制游戏界面和动画效果。</li><li>为游戏元素创建图像资源，并在界面上动态显示和更新这些图像。</li></ul> 
<h4><a id="35__920"></a>3.5 音效和背景音乐：</h4> 
<ul><li>集成音效和背景音乐，增强游戏的沉浸感和娱乐性。</li><li>在适当的时机播放攻击、受伤、胜利或失败等音效。</li></ul> 
<h3><a id="_926"></a>四、项目获取：</h3> 
<blockquote> 
 <p><strong>添加wx，备注：植物大战僵尸获取</strong></p> 
</blockquote> 
<hr> 
<p><img src="https://images2.imgbox.com/8e/5e/WSpn0ply_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_932"></a>欢迎添加微信，加入我的核心小队，请备注来意</h3> 
<p>👇👇👇👇👇👇👇👇👇👇👇👇👇👇👇</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/61029032429313b03016e43f55504499/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用20行python写一个最简单的网站</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/18b5cd43b1e6d1603ae72c22388656ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Golang入门教程】Go语言整型(整数类型)的详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>