<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringCloud-搭建XXL-JOB任务调度平台教程 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/b7ae2536cb29a6cf12d461a94f40580f/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="SpringCloud-搭建XXL-JOB任务调度平台教程">
  <meta property="og:description" content="一、XXL-JOB任务调度平台介绍 XXL-JOB是一个轻量级分布式任务调度框架，旨在解决分布式系统中的任务调度问题，提高系统的处理效率和任务管理的便捷性。
1. XXL-JOB任务调度概念 XXL-JOB任务调度平台通过中心化管理方式，使得任务的调度更加高效和集中。平台不仅提供了丰富的任务调度功能，例如：CRON表达式、任务依赖、失败重试、任务超时处理、任务分片等，还提供了实时的任务日志、运行结果监控等功能，大大简化了任务调度的复杂性。
2. XXL-JOB任务调度平台架构 XXL-JOB的基本架构主要包括以下几个组成部分：
调度中心（Admin）：负责任务的添加、编辑、删除以及触发任务执行。执行器（Executor）：负责接受调度中心的命令，执行具体的任务逻辑。 在实际开发中，XXL-JOB的任务调度中心负责管理和分配任务，而各个服务或应用需要集成执行器以注册到XXL-JOB任务调度中心。执行器负责实际执行这些任务，并向调度中心报告执行结果。
3. XXL-JOB功能 XXL-JOB具有强大且实用的功能，具体如下：
功能描述任务调度支持CRON表达式，动态设置执行频率任务依赖支持跨任务依赖，任务链的形式执行失败处理支持失败重试机制，自定义重试次数超时处理支持任务执行超时设置，超时后自动终止日志监控支持实时日志监控，查看任务执行详情负载均衡执行器支持集群部署，实现任务负载均衡 二、XXL-JOB搭建流程 搭建XXL-JOB平台涉及到多个步骤，包括环境准备、调度中心的部署、执行器的集成和配置等。
1、环境准备 Java环境：JDK1.8或更高版本。数据库：MySQL5.5及以上。Maven：用于项目构建。可运行的SpringCloud项目。 2、调度中心部署 克隆 XXL-JOB 的代码仓库：
git clone https://github.com/xuxueli/xxl-job.git 导入 doc/db/tables_xxl_job.sql 到 MySQL 数据库，创建所需的数据库和表。
修改调度中心配置文件 application.properties，配置数据库信息。
spring.datasource.url=jdbc:mysql://localhost:3306/xxl_job?Unicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false spring.datasource.username=root spring.datasource.password=yourpassword 复制到 xxl-job 项目目录下。
IDEA内修改父级项目的 pom.xml 的模块引用，将 xxl-job 引入到项目里作为一个独立的模块。
引入成功后，xxl-job 模块颜色变为黑色。
启动 xl-job-admin 项目。
任务调度中心成功启动。
初始登录信息：admin/123456
3、执行器集成 在 SpringCloud 项目的 pom.xml 文件中添加 XXL-JOB 的依赖：
&lt;dependency&gt; &lt;groupId&gt;com.xuxueli&lt;/groupId&gt; &lt;artifactId&gt;xxl-job-core&lt;/artifactId&gt; &lt;version&gt;2.4.2&lt;/version&gt; &lt;/dependency&gt; 这里 2.4.2 是我的 xxl-job 的版本号，不知道可以去下载的 xxl-job 包下的 pom.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-25T02:11:46+08:00">
    <meta property="article:modified_time" content="2024-04-25T02:11:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringCloud-搭建XXL-JOB任务调度平台教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、XXL-JOB任务调度平台介绍</h3> 
<p>XXL-JOB是一个轻量级分布式任务调度框架，旨在解决分布式系统中的任务调度问题，提高系统的处理效率和任务管理的便捷性。</p> 
<h4>1. XXL-JOB任务调度概念</h4> 
<p>XXL-JOB任务调度平台通过中心化管理方式，使得任务的调度更加高效和集中。平台不仅提供了丰富的任务调度功能，例如：CRON表达式、任务依赖、失败重试、任务超时处理、任务分片等，还提供了实时的任务日志、运行结果监控等功能，大大简化了任务调度的复杂性。</p> 
<hr> 
<h4>2. XXL-JOB任务调度平台架构</h4> 
<p>XXL-JOB的基本架构主要包括以下几个组成部分：</p> 
<ul><li><strong>调度中心（Admin）</strong>：负责任务的添加、编辑、删除以及触发任务执行。</li><li><strong>执行器（Executor）</strong>：负责接受调度中心的命令，执行具体的任务逻辑。</li></ul> 
<p><img alt="" height="465" src="https://images2.imgbox.com/42/9f/vfssoFsW_o.png" width="1093"></p> 
<p>在实际开发中，XXL-JOB的任务调度中心负责管理和分配任务，而各个服务或应用需要集成执行器以注册到XXL-JOB任务调度中心。执行器负责实际执行这些任务，并向调度中心报告执行结果。</p> 
<hr> 
<h4>3. XXL-JOB功能</h4> 
<p>XXL-JOB具有强大且实用的功能，具体如下：</p> 
<table><thead><tr><th>功能</th><th>描述</th></tr></thead><tbody><tr><td>任务调度</td><td>支持CRON表达式，动态设置执行频率</td></tr><tr><td>任务依赖</td><td>支持跨任务依赖，任务链的形式执行</td></tr><tr><td>失败处理</td><td>支持失败重试机制，自定义重试次数</td></tr><tr><td>超时处理</td><td>支持任务执行超时设置，超时后自动终止</td></tr><tr><td>日志监控</td><td>支持实时日志监控，查看任务执行详情</td></tr><tr><td>负载均衡</td><td>执行器支持集群部署，实现任务负载均衡</td></tr></tbody></table> 
<h3>二、XXL-JOB搭建流程</h3> 
<p>搭建XXL-JOB平台涉及到多个步骤，包括环境准备、调度中心的部署、执行器的集成和配置等。</p> 
<h4>1、环境准备</h4> 
<ul><li>Java环境：JDK1.8或更高版本。</li><li>数据库：MySQL5.5及以上。</li><li>Maven：用于项目构建。</li><li>可运行的SpringCloud项目。</li></ul> 
<hr> 
<h4>2、调度中心部署</h4> 
<p>克隆 XXL-JOB 的代码仓库：</p> 
<pre><code class="language-bash">git clone https://github.com/xuxueli/xxl-job.git</code></pre> 
<p><img alt="" height="827" src="https://images2.imgbox.com/c1/eb/9v0P7oWv_o.png" width="1200"></p> 
<p>导入 doc/db/tables_xxl_job.sql 到 MySQL 数据库，创建所需的数据库和表。</p> 
<p><img alt="" height="776" src="https://images2.imgbox.com/e1/4a/tocKwkdR_o.png" width="1004"></p> 
<p>修改调度中心配置文件 application.properties，配置数据库信息。</p> 
<pre><code class="language-bash">spring.datasource.url=jdbc:mysql://localhost:3306/xxl_job?Unicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false
spring.datasource.username=root
spring.datasource.password=yourpassword</code></pre> 
<p><img alt="" height="700" src="https://images2.imgbox.com/db/25/TK7W5bwC_o.png" width="1100"></p> 
<p>复制到 xxl-job 项目目录下。</p> 
<p><img alt="" height="490" src="https://images2.imgbox.com/e7/1c/AZk9s6ML_o.png" width="940"></p> 
<p>IDEA内修改父级项目的 pom.xml 的模块引用，将 xxl-job 引入到项目里作为一个独立的模块。</p> 
<p><img alt="" height="468" src="https://images2.imgbox.com/eb/6f/GHrhJHQZ_o.png" width="1030"></p> 
<p>引入成功后，xxl-job 模块颜色变为黑色。</p> 
<p>启动 xl-job-admin 项目。</p> 
<p><img alt="" height="561" src="https://images2.imgbox.com/15/70/YbHFlA5L_o.png" width="634"></p> 
<p>任务调度中心成功启动。</p> 
<p>初始登录信息：admin/123456</p> 
<p><img alt="" height="577" src="https://images2.imgbox.com/c5/5f/bgfHVnh8_o.png" width="1083"></p> 
<hr> 
<h4>3、执行器集成</h4> 
<p>在 SpringCloud 项目的 pom.xml 文件中添加 XXL-JOB 的依赖：</p> 
<pre><code class="language-XML">&lt;dependency&gt;
    &lt;groupId&gt;com.xuxueli&lt;/groupId&gt;
    &lt;artifactId&gt;xxl-job-core&lt;/artifactId&gt;
    &lt;version&gt;2.4.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre> 
<p>这里 2.4.2 是我的 xxl-job 的版本号，不知道可以去下载的 xxl-job 包下的 pom.xml 看版本。</p> 
<p>配置执行器：</p> 
<p>在 application.properties 或 application.yml 中配置执行器信息：</p> 
<pre><code class="language-bash">xxl:
  job:
    admin:
      addresses: http://localhost:8080/xxl-job-admin
    executor:
      appname: xxl-job-executor-sample
      address:
      ip:
      port: 9999
      logpath: /data/applogs/xxl-job/jobhandler
      logretentiondays: 30
</code></pre> 
<p>创建任务执行类：<br> 在 Spring Cloud 项目中创建一个任务类，使用 @XxlJob 注解标记任务执行方法：</p> 
<pre><code class="language-java">import com.xxl.job.core.handler.annotation.XxlJob;
import org.springframework.stereotype.Component;

@Component
public class SampleXxlJob {
    @XxlJob("demoTaskHandler")
    public void demoTaskHandler() throws Exception {
        System.out.println("XXL-JOB, Hello World.");
    }
}</code></pre> 
<p>启动Spring Cloud服务，执行器将自动注册到调度中心，并可以在 XXL-JOB 管理员界面添加和触发任务。</p> 
<hr> 
<h3 style="background-color:transparent;">三、XXL-JOB平台的使用</h3> 
<h4 style="background-color:transparent;">1、管理任务调度</h4> 
<p>在任务管理页面，我们看到有哪些任务已经被注册，我们可以选择任务立即去执行，也可以查看任务的执行日志，XXL-JOB平台提供给我们非常多的便捷操作。</p> 
<p><img alt="" height="842" src="https://images2.imgbox.com/a2/f5/k4z5QS5s_o.png" width="1200"></p> 
<hr> 
<h4 style="background-color:transparent;">2、创建定时任务</h4> 
<p>左侧菜单的 [任务管理] 里创建新任务。</p> 
<p><img alt="" height="827" src="https://images2.imgbox.com/27/e1/3Tzug09P_o.png" width="1200"></p> 
<p>Cron 里选择触发周期，下方会显示最近运行时间，如图所示，我设定的是每月1号0点定时运行。</p> 
<p><img alt="" height="826" src="https://images2.imgbox.com/8d/ae/W5QVPhLo_o.png" width="1175"></p> 
<p>主要就是填写 Cron（定时设置）和JobHandler（自动调用的接口） 。</p> 
<p><img alt="" height="809" src="https://images2.imgbox.com/d6/6b/rlVHpyq2_o.png" width="989"></p> 
<hr> 
<h3><strong>四、XXL-JOB任务调度平台</strong><strong>搭建</strong><strong>总结</strong></h3> 
<p>通过Spring Cloud集成XXL-JOB任务调度平台，可以使微服务环境中的任务调度更加灵活和高效。整个过程中，调度中心和执行器的正确配置是关键。此外，通过XXL-JOB提供的控制台，用户可以轻松管理和监控任务的运行状态，实现任务的高效执行。</p> 
<p>本教程提供了从平台介绍到具体搭建流程的详细说明，旨在帮助开发者和系统管理员快速理解和部署XXL-JOB任务调度平台。通过此平台的应用，大型分布式系统的任务管理将变得更为简单和高效。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/72e525d1e6bb924f2b2105317156aa6b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【基于netty&#43;zookeeper的rpc远程调用框架】首篇——缘起</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b5b2cfc17eeba4905ffe3da56fe0c982/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">我们该如何看待AIGC（人工智能）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>