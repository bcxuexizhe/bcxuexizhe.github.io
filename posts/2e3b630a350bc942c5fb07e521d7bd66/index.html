<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python贪吃蛇】：编码技巧与游戏设计的完美结合 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/2e3b630a350bc942c5fb07e521d7bd66/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【Python贪吃蛇】：编码技巧与游戏设计的完美结合">
  <meta property="og:description" content="文章目录 🔥一、运行效果💥二、游戏教程✈1. 导入模块❤️2. 初始化游戏元素☔3. 改变蛇移动的方向👊4. 绘制方块🚀5. 检查蛇头是否在游戏区域内🌈6. 定义蛇的移动函数🎬7. 绑定键盘事件 ⭐三、完整代码 🔥一、运行效果 Python实现贪吃蛇
💥二、游戏教程 🚲turtle模块
Python的turtle模块是一个非常基础的绘图库，它允许用户创建一个画布并在上面绘制图形。这个模块通常用于教学目的，特别是适合初学者学习编程和理解基本的图形概念。
turtle的一些关键特性：
画布和乌龟：turtle模块提供了一个名为“乌龟”的画笔，可以在一个名为“画布”的窗口上绘制图形。用户可以控制乌龟的移动来画出各种图案。前进和后退：可以使用forward()和backward()方法让乌龟在画布上前进或后退。转向：left()和right()方法可以让乌龟左转或右转，可以通过度数参数指定转向的角度。抬笔和落笔：penup()和pendown()方法分别用于抬起和放下乌龟的笔，抬起笔时乌龟移动不会绘制线条，而放下笔时会绘制线条。颜色和填充：可以设置乌龟绘制的颜色，并且可以填充封闭图形的内部。速度控制：可以设置乌龟的移动速度，从最快到最慢。监听事件：turtle模块可以监听键盘和鼠标事件，这使得它可以用来创建简单的交互式图形应用。设置画布：可以设置画布的大小、背景颜色等。坐标系统：turtle模块使用笛卡尔坐标系，原点在画布的中心，x轴向右，y轴向上。子图和窗口：可以在一个窗口中创建多个乌龟对象，或者在多个窗口中绘图。更新和动画：通过update()方法可以刷新画布显示，实现动画效果。事件循环：turtle模块提供了事件循环，允许程序保持运行状态直到用户关闭窗口。 turtle模块非常适合用来创建游戏、绘制复杂的几何图形，或者作为教授编程逻辑和控制结构的工具。
✈1. 导入模块 import turtle import copy from random import randrange turtle：用于绘制图形和动画。copy：用于复制蛇的头部坐标，避免在移动蛇时直接修改原始列表。randrange：从random模块中导入，用于生成随机数，这里用来随机放置食物。 ❤️2. 初始化游戏元素 创建画布和设置标题
wn = turtle.Screen() wn.title(&#39;贪吃蛇游戏&#39;) 保持打开绘图窗口
# 不让屏幕立马消失 turtle.done() turtle.done()是一个非常重要的函数，它用于结束绘图操作并保持打开绘图窗口，直到用户关闭该窗口。这允许用户观察绘制的图形，而不会因为程序的结束而丢失绘图结果。
使用场景
在绘制图形或动画的最后，你会调用turtle.done()来结束你的绘图脚本。例如，在绘制完一个图形或完成一个动画循环后，你可以使用它来防止程序立即退出，从而让用户有足够的时间来查看结果。
注意事项
如果在调用turtle.done()之前程序崩溃或被强制终止，绘图窗口可能会立即关闭。在某些IDE（如Jupyter Notebook）中，turtle.done()可能不会按预期工作，因为这些环境可能不支持turtle模块的图形窗口特性。 设置蛇的长度
snake = [[0, 0], [0, 10], [0, 20]] 这里初始化了蛇的三个部分，每个部分由一个列表表示，列表包含两个元素，分别代表蛇的x和y坐标。在这个例子中，蛇有三个部分，初始位置分别是(0, 0)、(0, 10)和(0, 20)。
蛇移动的方向
aim = [0, 10] aim列表定义了蛇的移动方向，其中第一个元素是水平方向（向右为正，向左为负），第二个元素是垂直方向（向下为正，向上为负）。这里，蛇默认向上移动。
设置食物
food = [-10, 0] food列表定义了食物的初始位置，同样使用x和y坐标表示。这里食物的初始位置是(-10, 0)。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-13T15:47:00+08:00">
    <meta property="article:modified_time" content="2024-05-13T15:47:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python贪吃蛇】：编码技巧与游戏设计的完美结合</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">🔥一、运行效果</a></li><li><a href="#_5" rel="nofollow">💥二、游戏教程</a></li><li><ul><li><a href="#1__24" rel="nofollow">✈1. 导入模块</a></li><li><a href="#2__35" rel="nofollow">❤️2. 初始化游戏元素</a></li><li><a href="#3__79" rel="nofollow">☔3. 改变蛇移动的方向</a></li><li><a href="#4__99" rel="nofollow">👊4. 绘制方块</a></li><li><a href="#5__134" rel="nofollow">🚀5. 检查蛇头是否在游戏区域内</a></li><li><a href="#6__149" rel="nofollow">🌈6. 定义蛇的移动函数</a></li><li><a href="#7__189" rel="nofollow">🎬7. 绑定键盘事件</a></li></ul> 
    </li><li><a href="#_235" rel="nofollow">⭐三、完整代码</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_1"></a>🔥一、运行效果</h4> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="SvB52wMp-1715583021441" frameborder="0" src="https://live.csdn.net/v/embed/386747" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>Python实现贪吃蛇</p> 
</div> 
<p></p> 
<h4><a id="_5"></a>💥二、游戏教程</h4> 
<p><strong>🚲turtle模块</strong><br> Python的turtle模块是一个非常基础的绘图库，它允许用户创建一个画布并在上面绘制图形。这个模块通常用于教学目的，特别是适合初学者学习编程和理解基本的图形概念。<br> <strong>turtle的一些关键特性</strong>：</p> 
<blockquote> 
 <ol><li><strong>画布和乌龟</strong>：turtle模块提供了一个名为“乌龟”的画笔，可以在一个名为“画布”的窗口上绘制图形。用户可以控制乌龟的移动来画出各种图案。</li><li><strong>前进和后退</strong>：可以使用forward()和backward()方法让乌龟在画布上前进或后退。</li><li><strong>转向</strong>：left()和right()方法可以让乌龟左转或右转，可以通过度数参数指定转向的角度。</li><li><strong>抬笔和落笔</strong>：penup()和pendown()方法分别用于抬起和放下乌龟的笔，抬起笔时乌龟移动不会绘制线条，而放下笔时会绘制线条。</li><li><strong>颜色和填充</strong>：可以设置乌龟绘制的颜色，并且可以填充封闭图形的内部。</li><li><strong>速度控制</strong>：可以设置乌龟的移动速度，从最快到最慢。</li><li><strong>监听事件</strong>：turtle模块可以监听键盘和鼠标事件，这使得它可以用来创建简单的交互式图形应用。</li><li><strong>设置画布</strong>：可以设置画布的大小、背景颜色等。</li><li><strong>坐标系统</strong>：turtle模块使用笛卡尔坐标系，原点在画布的中心，x轴向右，y轴向上。</li><li><strong>子图和窗口</strong>：可以在一个窗口中创建多个乌龟对象，或者在多个窗口中绘图。</li><li><strong>更新和动画</strong>：通过update()方法可以刷新画布显示，实现动画效果。</li><li><strong>事件循环</strong>：turtle模块提供了事件循环，允许程序保持运行状态直到用户关闭窗口。</li></ol> 
</blockquote> 
<p>turtle模块非常适合用来创建游戏、绘制复杂的几何图形，或者作为教授编程逻辑和控制结构的工具。</p> 
<h5><a id="1__24"></a>✈1. 导入模块</h5> 
<pre><code class="prism language-python"><span class="token keyword">import</span> turtle
<span class="token keyword">import</span> copy
<span class="token keyword">from</span> random <span class="token keyword">import</span> randrange
</code></pre> 
<ul><li><strong>turtle</strong>：用于绘制图形和动画。</li><li><strong>copy</strong>：用于复制蛇的头部坐标，避免在移动蛇时直接修改原始列表。</li><li><strong>randrange</strong>：从random模块中导入，用于生成随机数，这里用来随机放置食物。</li></ul> 
<h5><a id="2__35"></a>❤️2. 初始化游戏元素</h5> 
<p><strong>创建画布和设置标题</strong></p> 
<pre><code class="prism language-python">wn <span class="token operator">=</span> turtle<span class="token punctuation">.</span>Screen<span class="token punctuation">(</span><span class="token punctuation">)</span>
wn<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'贪吃蛇游戏'</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>保持打开绘图窗口</strong></p> 
<pre><code class="prism language-python"><span class="token comment"># 不让屏幕立马消失</span>
turtle<span class="token punctuation">.</span>done<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>turtle.done()是一个非常重要的函数，它用于结束绘图操作并保持打开绘图窗口，直到用户关闭该窗口。这允许用户观察绘制的图形，而不会因为程序的结束而丢失绘图结果。<br> <strong>使用场景</strong><br> 在绘制图形或动画的最后，你会调用turtle.done()来结束你的绘图脚本。例如，在绘制完一个图形或完成一个动画循环后，你可以使用它来防止程序立即退出，从而让用户有足够的时间来查看结果。<br> <img src="https://images2.imgbox.com/e1/dd/PS2LFaz5_o.png" alt="在这里插入图片描述"><br> <strong>注意事项</strong></p> 
<ul><li>如果在调用turtle.done()之前程序崩溃或被强制终止，绘图窗口可能会立即关闭。</li><li>在某些IDE（如Jupyter Notebook）中，turtle.done()可能不会按预期工作，因为这些环境可能不支持turtle模块的图形窗口特性。</li></ul> 
<p><strong>设置蛇的长度</strong></p> 
<pre><code class="prism language-python">snake <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> 
<p>这里初始化了蛇的三个部分，每个部分由一个列表表示，列表包含两个元素，分别代表蛇的x和y坐标。在这个例子中，蛇有三个部分，初始位置分别是(0, 0)、(0, 10)和(0, 20)。</p> 
<p><strong>蛇移动的方向</strong></p> 
<pre><code class="prism language-python">aim <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
</code></pre> 
<p>aim列表定义了蛇的移动方向，其中第一个元素是水平方向（向右为正，向左为负），第二个元素是垂直方向（向下为正，向上为负）。这里，蛇默认向上移动。</p> 
<p><strong>设置食物</strong></p> 
<pre><code class="prism language-python">food <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
</code></pre> 
<p>food列表定义了食物的初始位置，同样使用x和y坐标表示。这里食物的初始位置是(-10, 0)。</p> 
<p>这些初始化步骤为游戏设置了基本的起点，包括蛇的初始位置和方向、食物的位置以及游戏窗口的标题。</p> 
<h5><a id="3__79"></a>☔3. 改变蛇移动的方向</h5> 
<pre><code class="prism language-python"><span class="token comment"># 改变蛇移动的方向</span>
<span class="token keyword">def</span> <span class="token function">change_direction</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    aim<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> x
    aim<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y
</code></pre> 
<ul><li>def 是 Python 中用来定义函数的关键字。</li><li>change_direction 是函数名，这里表示改变方向的功能。</li><li>x 和 y 是函数的参数，分别代表蛇在水平（x轴）和垂直（y轴）方向上的移动增量。</li></ul> 
<p><strong>参数作用</strong></p> 
<ul><li><strong>aim[0] = x</strong>：这行代码将水平方向的移动增量更新为参数 x 的值。如果 x 为正，蛇将向右移动；如果为负，则向左移动；如果为0，则蛇的水平位置不变。</li><li><strong>aim[1] = y</strong>：这行代码将垂直方向的移动增量更新为参数 y 的值。如果 y 为正，蛇将向下移动；如果为负，则向上移动；如果为0，则蛇的垂直位置不变。</li></ul> 
<p><strong>注意事项</strong></p> 
<ul><li>在实际的游戏实现中，需要确保蛇的移动方向不会违反游戏规则，例如<strong>蛇不能瞬间反向移动</strong>，这可能需要额外的逻辑来处理。</li><li>该函数直接修改了全局变量 aim，这意味着它对所有使用 aim 的代码都是可见的。在更复杂的程序中，可能需要考虑使用类和方法来封装数据和行为。</li></ul> 
<h5><a id="4__99"></a>👊4. 绘制方块</h5> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> size<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 抬起画笔</span>
    turtle<span class="token punctuation">.</span>penup<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 画笔痕迹</span>
    turtle<span class="token punctuation">.</span>goto<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token comment"># 放下画笔</span>
    turtle<span class="token punctuation">.</span>pendown<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 进行渲染</span>
    turtle<span class="token punctuation">.</span>color<span class="token punctuation">(</span>color<span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>begin_fill<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 在画布上画四笔转一圈生成一个方块</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        turtle<span class="token punctuation">.</span>forward<span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        turtle<span class="token punctuation">.</span>left<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>end_fill<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>turtle.penup()</strong> 这是让画笔抬起，这样当乌龟移动到绘制方块的起始位置时，不会在画布上留下痕迹。<strong>turtle.goto(x, y)</strong> 这是让乌龟移动到坐标 (x, y) 的位置，即方块左上角的起始位置。<br> <strong>turtle.pendown()</strong> 放下画笔，这样接下来的移动就会在画布上绘制线条。<br> <strong>turtle.color(color)</strong> 设置接下来绘制的图形的颜色。<br> <strong>turtle.begin_fill()</strong> 这行代码指示 turtle 开始填充封闭图形的内部。<br> <strong>turtle.end_fill()</strong> 结束填充过程，封闭图形的最后面，完成方块的绘制。</p> 
<pre><code class="prism language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    turtle<span class="token punctuation">.</span>forward<span class="token punctuation">(</span>size<span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>left<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
</code></pre> 
<p>循环执行四次，每次绘制方块的一边。turtle.forward(size) 让乌龟前进 size 个单位，turtle.left(90) 让乌龟左转90度，从而改变方向绘制下一条边。<br> <img src="https://images2.imgbox.com/58/20/cSc8WUb7_o.png" alt="在这里插入图片描述"></p> 
<p>这个函数可以被用来在 turtle 画布上绘制贪吃蛇游戏中的蛇的身体部分和食物。通过改变 size 和 color 参数，可以创建不同大小和颜色的方块。</p> 
<h5><a id="5__134"></a>🚀5. 检查蛇头是否在游戏区域内</h5> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">inside</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">250</span> <span class="token operator">&lt;</span> head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">250</span> <span class="token keyword">and</span> <span class="token operator">-</span><span class="token number">250</span> <span class="token operator">&lt;</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">250</span>
</code></pre> 
<p>函数体内的 return 语句包含了一个布尔表达式，用于检查 head 中的 x 和 y 坐标是否同时满足以下条件：</p> 
<ul><li>head[0]（即蛇头的 x 坐标）大于 -250 并且小于 250。</li><li>head[1]（即蛇头的 y 坐标）大于 -250 并且小于 250。</li></ul> 
<p>如果两个条件都为真，函数返回 True，表示蛇头在游戏窗口内；如果任一条件不满足（即蛇头坐标超出了这个范围），函数返回 False，表示蛇头已经撞到了游戏边界。</p> 
<p><strong>注意事项</strong><br> 在实际的游戏实现中，你需要根据实际的游戏窗口大小来调整函数中的边界值。上面的代码中使用的边界值 -250 和 250 是示例，具体值应根据你的游戏设计来设定。</p> 
<h5><a id="6__149"></a>🌈6. 定义蛇的移动函数</h5> 
<pre><code class="prism language-python"><span class="token comment"># 定义蛇的移动的函数</span>
<span class="token keyword">def</span> <span class="token function">sanke_move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    head <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>snake<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    head <span class="token operator">=</span> <span class="token punctuation">[</span>head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> aim<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> aim<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 判断是否发生了碰撞</span>
    <span class="token keyword">if</span> head <span class="token keyword">in</span> snake <span class="token keyword">or</span> <span class="token keyword">not</span> inside<span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Game Over!"</span><span class="token punctuation">)</span>
        square<span class="token punctuation">(</span>head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token comment"># 判断蛇碰到食物后的操作</span>
    <span class="token keyword">if</span> head <span class="token operator">==</span> food<span class="token punctuation">:</span>
        food<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> randrange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
        food<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> randrange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        snake<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    snake<span class="token punctuation">.</span>append<span class="token punctuation">(</span>head<span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
    square<span class="token punctuation">(</span>food<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> food<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">)</span>
    <span class="token comment"># 遍历蛇的列表画出蛇的长度</span>
    <span class="token keyword">for</span> body <span class="token keyword">in</span> snake<span class="token punctuation">:</span>
        square<span class="token punctuation">(</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> body<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"black"</span><span class="token punctuation">)</span>
    <span class="token comment"># 更新，使动画的出现不是那么突兀</span>
    turtle<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>ontimer<span class="token punctuation">(</span>sanke_move<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
</code></pre> 
<p>sanke_move 函数是贪吃蛇游戏中控制蛇移动的核心函数。</p> 
<blockquote> 
 <ol><li><strong>蛇头位置更新</strong>：通过将蛇的最后一个部分（尾部）的坐标与蛇的移动方向（aim）相加，计算出蛇头的新位置。</li><li><strong>游戏结束判断</strong>：检查新计算出的蛇头位置是否超出了游戏边界（通过inside函数判断），或者蛇头是否与蛇身的其他部分重叠（即蛇撞到自己了）。如果是，则结束游戏，并在蛇头位置绘制一个红色方块表示碰撞点。</li><li><strong>食物碰撞检测</strong>：如果蛇头位置与食物位置相同，表示蛇吃到食物。此时，生成新的食物位置，并让蛇增长（不移除蛇身的最前部分）。</li><li><strong>蛇身更新</strong>：如果蛇没有吃到食物，移除蛇身的最前部分，模拟蛇的移动效果。然后将新计算的蛇头位置添加到蛇身列表的末尾。</li><li><strong>绘制更新</strong>：清除画布，重新绘制食物和蛇身。食物用蓝色方块表示，蛇身用黑色方块表示。</li><li><strong>动画效果</strong>：使用turtle.update()刷新屏幕显示，使上述绘制更新生效。</li><li><strong>循环调用</strong>：通过turtle.ontimer设置定时器，每隔300毫秒自动调用一次sanke_move函数，从而实现蛇的连续移动，形成动画效果。</li></ol> 
</blockquote> 
<p>sanke_move函数负责根据用户的操作更新蛇的位置，检查游戏状态（如是否吃到食物或游戏是否结束），并更新屏幕上的显示，是贪吃蛇游戏的控制中心。</p> 
<h5><a id="7__189"></a>🎬7. 绑定键盘事件</h5> 
<p><strong>设置屏幕大小</strong></p> 
<pre><code class="prism language-python">turtle<span class="token punctuation">.</span>setup<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
</code></pre> 
<p>这行代码设置了turtle画布的宽度和高度为500像素。这意味着蛇将在一个500x500像素的窗口内移动。</p> 
<p><strong>去除绘制动画</strong></p> 
<pre><code class="prism language-python">turtle<span class="token punctuation">.</span>tracer<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p>turtle.tracer()函数控制是否在绘制图形时显示动画。将其设置为False可以关闭绘制方块时的动画效果，使方块几乎是立即出现的，这对于需要快速更新屏幕的游戏来说是必要的。</p> 
<p><strong>隐藏画笔（乌龟）</strong></p> 
<pre><code class="prism language-python">turtle<span class="token punctuation">.</span>hideturtle<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>这行代码隐藏了turtle模块中用于绘制的“乌龟”（即画笔）。在大多数游戏中，我们不需要看到这个画笔，只需要看到它绘制的图形。</p> 
<p><strong>监听键盘事件</strong></p> 
<pre><code class="prism language-python">turtle<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>turtle.listen()开始监听键盘事件，使得我们可以为特定的按键绑定特定的函数。</p> 
<p><strong>绑定键盘按键</strong></p> 
<pre><code class="prism language-python">turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Up"</span><span class="token punctuation">)</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Down"</span><span class="token punctuation">)</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Left"</span><span class="token punctuation">)</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Right"</span><span class="token punctuation">)</span>
</code></pre> 
<p>这四行代码将键盘的上下左右箭头键与change_direction函数绑定。当用户按下相应的箭头键时，会调用change_direction函数，并传入相应的参数，这些参数定义了蛇的新移动方向。</p> 
<blockquote> 
 <ul><li><strong>“Up” 箭头</strong>：蛇向上移动（减少y坐标）。</li><li><strong>“Down” 箭头</strong>：蛇向下移动（增加y坐标）。</li><li><strong>“Left” 箭头</strong>：蛇向左移动（减少x坐标）。</li><li><strong>“Right” 箭头</strong>：蛇向右移动（增加x坐标）。</li></ul> 
</blockquote> 
<p>lambda函数是一个匿名函数，它创建了一个新的函数对象，这里用于简化onkey的回调函数。<br> <img src="https://images2.imgbox.com/63/d9/ytmC9MJU_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_235"></a>⭐三、完整代码</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> turtle
<span class="token keyword">import</span> copy
<span class="token keyword">from</span> random <span class="token keyword">import</span> randrange

<span class="token comment"># 设置蛇的长度</span>
snake <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment"># 蛇移动的方向(默认向上移动)</span>
aim <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
<span class="token comment"># 设置食物</span>
food <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
wn <span class="token operator">=</span> turtle<span class="token punctuation">.</span>Screen<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 设置标题</span>
wn<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'贪吃蛇游戏'</span><span class="token punctuation">)</span>


<span class="token comment"># 改变蛇移动的方向</span>
<span class="token keyword">def</span> <span class="token function">change_direction</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    aim<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> x
    aim<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> y


<span class="token keyword">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> size<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 抬起画笔</span>
    turtle<span class="token punctuation">.</span>penup<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 画笔痕迹</span>
    turtle<span class="token punctuation">.</span>goto<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token comment"># 放下画笔</span>
    turtle<span class="token punctuation">.</span>pendown<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 进行渲染</span>
    turtle<span class="token punctuation">.</span>color<span class="token punctuation">(</span>color<span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>begin_fill<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 在画布上画四笔转一圈生成一个方块</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        turtle<span class="token punctuation">.</span>forward<span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        turtle<span class="token punctuation">.</span>left<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>end_fill<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">inside</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">250</span> <span class="token operator">&lt;</span> head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">250</span> <span class="token keyword">and</span> <span class="token operator">-</span><span class="token number">250</span> <span class="token operator">&lt;</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">250</span>


<span class="token comment"># 定义蛇的移动的函数</span>
<span class="token keyword">def</span> <span class="token function">sanke_move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    head <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>snake<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    head <span class="token operator">=</span> <span class="token punctuation">[</span>head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> aim<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> aim<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 判断是否发生了碰撞</span>
    <span class="token keyword">if</span> head <span class="token keyword">in</span> snake <span class="token keyword">or</span> <span class="token keyword">not</span> inside<span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Game Over!"</span><span class="token punctuation">)</span>
        square<span class="token punctuation">(</span>head<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token comment"># 判断蛇碰到食物后的操作</span>
    <span class="token keyword">if</span> head <span class="token operator">==</span> food<span class="token punctuation">:</span>
        food<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> randrange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
        food<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> randrange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        snake<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    snake<span class="token punctuation">.</span>append<span class="token punctuation">(</span>head<span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
    square<span class="token punctuation">(</span>food<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> food<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">)</span>
    <span class="token comment"># 遍历蛇的列表画出蛇的长度</span>
    <span class="token keyword">for</span> body <span class="token keyword">in</span> snake<span class="token punctuation">:</span>
        square<span class="token punctuation">(</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> body<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"black"</span><span class="token punctuation">)</span>
    <span class="token comment"># 更新，使动画的出现不是那么突兀</span>
    turtle<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
    turtle<span class="token punctuation">.</span>ontimer<span class="token punctuation">(</span>sanke_move<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>


<span class="token comment"># 设置屏幕的大小</span>
turtle<span class="token punctuation">.</span>setup<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token comment"># 去除一个一个画方块的动画</span>
turtle<span class="token punctuation">.</span>tracer<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment"># 去掉箭头（画画用的画笔）</span>
turtle<span class="token punctuation">.</span>hideturtle<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 用来监听键盘（获取键盘的事件）</span>
turtle<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 用来监听函数(通过控制转向函数达到让蛇转向的目的）</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Up"</span><span class="token punctuation">)</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Down"</span><span class="token punctuation">)</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Left"</span><span class="token punctuation">)</span>
turtle<span class="token punctuation">.</span>onkey<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> change_direction<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Right"</span><span class="token punctuation">)</span>
sanke_move<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 不让屏幕立马消失</span>
turtle<span class="token punctuation">.</span>done<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e62856c9b3aab7bbd1f20b0fef6323b8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C#】.net core 6.0 ApiController，API控制器方法，API接口以实体类作为接收参数应该注意的点</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6527c4923c81f04881c04fed37afee14/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】有关栈和队列相互转换问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>