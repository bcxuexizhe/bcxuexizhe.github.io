<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;干货基地】面向对象核心概念 const成员函数 | 初始化列表 | explicit关键字 | 取地址重载 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/7c353499a03cc044b72445abd3acbe52/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="【C&#43;&#43;干货基地】面向对象核心概念 const成员函数 | 初始化列表 | explicit关键字 | 取地址重载">
  <meta property="og:description" content="🎬 鸽芷咕：个人主页 🔥 个人专栏: 《C&#43;&#43;干货基地》《粉丝福利》 ⛺️生活的理想，就是为了理想的生活! 引入 哈喽各位铁汁们好啊，我是博主鸽芷咕《C&#43;&#43;干货基地》是由我的襄阳家乡零食基地有感而发，不知道各位的城市有没有这种实惠又全面的零食基地呢？C&#43;&#43; 本身作为一门篇底层的一种语言，世面的免费课程大多都没有教明白。所以本篇专栏的内容全是干货让大家从底层了解C&#43;&#43;，把更多的知识由抽象到简单通俗易懂。
⛳️ 推荐 前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。点击跳转到网站。
文章目录 引入⛳️ 推荐一、const 成员函数1.1 什么是const 成员函数1.2 const成员函数的注意事项总结 二、取地址及const取地址操作符重载2.1 取地址操作的意义 三、重新认识构造函数3.1构造函数体赋值3.2 初始化列表规则一规则二 四、explicit关键字4.1 构造函数的隐式类型转换4.2 隐式转换的作用4.2 explicit关键字的使用 一、const 成员函数 1.1 什么是const 成员函数 cosnt 的成员函数其实就是在我们 函数的括号外 多加一个 const void Dlsplay() const 其他的作用是修饰 隐含的 this 指针，使其不能修改。 1.2 const成员函数的注意事项 const 成员可以直接修饰this指针那么使用起来有什么要注意的嘛？
下面我们看一下这些代码来思考一下 #include&lt;iostream&gt; using namespace std; class Date { public: Date(int year, int month, int day) { _year = year; _month = month; _day = day; } void Print() { cout &lt;&lt; &#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-20T08:00:42+08:00">
    <meta property="article:modified_time" content="2024-04-20T08:00:42+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;干货基地】面向对象核心概念 const成员函数 | 初始化列表 | explicit关键字 | 取地址重载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <br> 
<p><img src="https://images2.imgbox.com/c1/b9/gB8CatHL_o.png" alt="在这里插入图片描述"> <br></p> 
<center> 
 <font color="#006666"><strong>🎬 鸽芷咕</strong>：<a href="https://blog.csdn.net/qq_57761637?type=blog">个人主页</a></font> 
</center> 
<br> 
<center> 
 <font color="#66CDAA"><strong> 🔥 个人专栏</strong>: <a href="https://blog.csdn.net/qq_57761637/category_12484010.html?spm=1001.2014.3001.5482">《C++干货基地》</a><a href="https://blog.csdn.net/qq_57761637/category_12446912.html">《粉丝福利》</a></font> 
</center> 
<p></p> 
<center> 
 <font color="7B68EE" size="4"><strong>⛺️生活的理想，就是为了理想的生活!</strong> </font> 
</center> 
<hr> 
<h2><a id="_7"></a>引入</h2> 
<blockquote> 
 <p>  哈喽各位铁汁们好啊，我是博主鸽芷咕《C++干货基地》是由我的襄阳家乡零食基地有感而发，不知道各位的城市有没有这种实惠又全面的零食基地呢？C++ 本身作为一门篇底层的一种语言，世面的免费课程大多都没有教明白。所以本篇专栏的内容全是干货让大家从底层了解C++，把更多的知识由抽象到简单通俗易懂。</p> 
</blockquote> 
<h2><a id="___10"></a>⛳️ 推荐</h2> 
<blockquote> 
 <p>前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。点<a href="https://www.captainbed.cn/lt" rel="nofollow">击跳转到网站。</a></p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">引入</a></li><li><a href="#___10" rel="nofollow">⛳️ 推荐</a></li><li><a href="#const__15" rel="nofollow">一、const 成员函数</a></li><li><ul><li><a href="#11_const__16" rel="nofollow">1.1 什么是const 成员函数</a></li><li><a href="#12_const_23" rel="nofollow">1.2 const成员函数的注意事项</a></li><li><a href="#_90" rel="nofollow">总结</a></li></ul> 
  </li><li><a href="#const_93" rel="nofollow">二、取地址及const取地址操作符重载</a></li><li><ul><li><a href="#21__94" rel="nofollow">2.1 取地址操作的意义</a></li></ul> 
  </li><li><a href="#_118" rel="nofollow">三、重新认识构造函数</a></li><li><ul><li><a href="#31_119" rel="nofollow">3.1构造函数体赋值</a></li><li><a href="#32__143" rel="nofollow">3.2 初始化列表</a></li><li><ul><li><a href="#_170" rel="nofollow">规则一</a></li><li><a href="#_178" rel="nofollow">规则二</a></li></ul> 
  </li></ul> 
  </li><li><a href="#explicit_212" rel="nofollow">四、explicit关键字</a></li><li><ul><li><a href="#41__213" rel="nofollow">4.1 构造函数的隐式类型转换</a></li><li><a href="#42__276" rel="nofollow">4.2 隐式转换的作用</a></li><li><a href="#42_explicit_356" rel="nofollow">4.2 explicit关键字的使用</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="const__15"></a>一、const 成员函数</h2> 
<h3><a id="11_const__16"></a>1.1 什么是const 成员函数</h3> 
<blockquote> 
 <p>cosnt 的成员函数其实就是在我们 <strong>函数的括号外</strong> 多加一个 <strong>const</strong> <kbd><strong><code>void Dlsplay() const</code></strong> </kbd></p> 
 <ul><li>其他的作用是修饰 <strong>隐含的 this</strong> 指针，使其不能修改。</li></ul> 
</blockquote> 
<p><img src="https://images2.imgbox.com/21/7d/Q1FcFEKd_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12_const_23"></a>1.2 const成员函数的注意事项</h3> 
<blockquote> 
 <p><strong>const 成员可以直接修饰this指针那么使用起来有什么要注意的嘛？</strong></p> 
 <ul><li>下面我们看一下这些代码来思考一下</li></ul> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Print()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"year:"</span> <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"month:"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"day:"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Print()const"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"year:"</span> <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"month:"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"day:"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span> <span class="token comment">// 年</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span> <span class="token comment">// 月</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span> <span class="token comment">// 日</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li>const对象可以调用非const成员函数吗？</li></ol> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <strong>不能 const 对象调用非const成员会导致，权限的放大所以会出现错误</strong></li></ul> 
<ol start="2"><li>非const对象可以调用const成员函数吗？</li></ol> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <strong>可以 非const 成员调用 const 成员函数属于权限的缩小，权限是可以缩小的</strong></li></ul> 
<ol start="3"><li>const成员函数内可以调用其它的非const成员函数吗？</li></ol> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <strong>不可以，这样会导致权限的放大</strong></li></ul> 
<ol start="4"><li>非const成员函数内可以调用其它的const成员函数吗？</li></ol> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 可以，非const 成员，调用const 成员是权限的缩小</li></ul> 
<h3><a id="_90"></a>总结</h3> 
<p><mark><font color="red"><strong>1. 在成员函数里如果我们只对成员变量读访问，那么建议加上 cosnt指针。</strong></font></mark><br> <mark><font color="red"><strong>2. 在成员函数里如果我们要对成员变量进行修改，不能加上 cosnt指针。（否者修改不了成员变量）</strong></font></mark></p> 
<h2><a id="const_93"></a>二、取地址及const取地址操作符重载</h2> 
<h3><a id="21__94"></a>2.1 取地址操作的意义</h3> 
<blockquote> 
 <p>取地址操作符顾名思义，就对我们的 <strong><code>&amp;</code></strong> 取地址符号进行重载使其能获取到成员变量的地址</p> 
 <ul><li>但是一般都是默认生成的，除非我们想让取地址符号取的<strong>是指定位置的地址</strong></li></ul> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	Date<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">const</span> Date<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span> <span class="token comment">// 年</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span> <span class="token comment">// 月</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span> <span class="token comment">// 日</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_118"></a>三、重新认识构造函数</h2> 
<h3><a id="31_119"></a>3.1构造函数体赋值</h3> 
<blockquote> 
 <p>以往我们在定义构造函数的时候都是在构造函数内进行赋值的，那么我们创建成员变量是否也是在构造函数里面呢？</p> 
 <ul><li>如果构造函数是创建的话那么，我们声明成员变量的时候给的默认值是定义嘛？</li></ul> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     _year <span class="token operator">=</span> year<span class="token punctuation">;</span>
     _month <span class="token operator">=</span> month<span class="token punctuation">;</span>
     _day <span class="token operator">=</span> day<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
<span class="token keyword">int</span> _year <span class="token operator">=</span> <span class="token number">2022</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> _month <span class="token operator">=</span> <span class="token number">06</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> _day <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>构造函数体中的语句只能将其称为赋初值，而不能称作初始化。因为初始化只能初始化一次，而构造函数体内可以多次赋值。</strong></font></mark></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 所以构造函数并不是初始化成员变量的地方，而我们在进行类声明的时候给的的默认值夜也只是声明</li></ul> 
<h3><a id="32__143"></a>3.2 初始化列表</h3> 
<blockquote> 
 <p><strong>在C++中规定了所有成员变量在初始化的时候都是在初始化列表进行初始化的</strong></p> 
 <ul><li>初始化列表：以一个冒号开始，接着是一个以逗号分隔的数据成员列表，每个"成员变量"后面跟<br> 一个放在括号中的初始值或表达式。</li></ul> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
		<span class="token operator">:</span> <span class="token function">_year</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_month</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_day</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ol><li><strong>每个成员变量在初始化列表中只能出现一次(初始化只能初始化一次)</strong></li><li><strong>类中包含以下成员，必须放在初始化列表位置进行初始化：</strong></li></ol> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>引用成员变量</strong></font></mark></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>const成员变量</strong></font></mark></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>自定义类型成员(且该类没有默认构造函数时)</strong></font></mark></li></ul> 
<h4><a id="_170"></a>规则一</h4> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>尽量使用初始化列表初始化，因为不管你是否使用初始化列表，对于自定义类型成员变量，一定会先使用初始化列表初始化。</strong></font></mark></li></ul> 
<blockquote> 
 <p>这个我相信很好了解，初始化列表不管我们写没写都会在初始化列表进行初始化</p> 
 <ul><li>所以对于简单的变量初始化建议使用初始化列表</li><li>一些复杂的类初始化可以使用在构造函数体内进行初始化</li></ul> 
</blockquote> 
<h4><a id="_178"></a>规则二</h4> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>成员变量在类中声明次序就是其在初始化列表中的初始化顺序，与其在初始化列表中的先后次序无关</strong></font></mark></li></ul> 
<p>🍸 <strong>代码演示：</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span>
       <span class="token operator">:</span><span class="token function">_a1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
       <span class="token punctuation">,</span><span class="token function">_a2</span><span class="token punctuation">(</span>_a1<span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>_a1<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token operator">&lt;&lt;</span>_a2<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> _a2<span class="token punctuation">;</span>
    <span class="token keyword">int</span> _a1<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    A <span class="token function">aa</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aa<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li class="task-list-item"> <p><input type="checkbox" class="task-list-item-checkbox" checked disabled> 大家猜一猜这个程序运行会出现什么情况呢？</p> </li><li> <p>A. <code>输出1 1</code> B.<code>程序崩溃</code></p> </li><li> <p>C<code>.编译不通过</code>D.<code>输出1 随机值</code></p> </li></ul> 
<blockquote> 
 <p>这里的答案是选D<br> 虽然我们在初始化列表先写的是 <strong><code>_a1</code></strong> 但是初始化列表是按照声明的顺序来进行初始化的，对 <strong><code>_a2(_a1)</code></strong> 进行初始化的时候 _<strong><code>_a1</code></strong> 还是一个随机值，<strong><code>_a2</code></strong> 就被赋值成了 <strong><code>_a1</code></strong> 的随机值</p> 
</blockquote> 
<h2><a id="explicit_212"></a>四、explicit关键字</h2> 
<h3><a id="41__213"></a>4.1 构造函数的隐式类型转换</h3> 
<blockquote> 
 <p>构造函数不仅可以构造与初始化对象，对于单个参数或者除第一个参数无默认值其余均有默认值<br> 的构造函数，还具有类型转换的作用。</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_x <span class="token operator">=</span> x<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	A a2 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里我们既可以使用构造函数来进行赋值，还可以使用隐式类型转换的方法来进行赋值。</p> 
<ul><li>其主要原理是 使用 <strong><code>=</code></strong> 号赋值时，会先用 1 构造一个临时变量然后再调用拷贝构造构造函数</li><li>也就是 <kbd>先构造-&gt;在拷贝构造</kbd></li></ul> 
<p>但是编译器目前太智能了，对同一个表达式连续的构造会合二为一优化为一步<br> <img src="https://images2.imgbox.com/dc/50/xAy3u9jz_o.png" alt="在这里插入图片描述"></p> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> <mark><font color="red"><strong>除第一个参数无默认值其余均有默认值的构造函数，还具有类型转换的作用。</strong></font></mark></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Data</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"data()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~data()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Data <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Data a2 <span class="token operator">=</span> <span class="token number">2022</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="42__276"></a>4.2 隐式转换的作用</h3> 
<blockquote> 
 <p>隐式转换可以说是非常的好用了以后我们在很多地方都可以用到，以往我们使用链表存储类的话每次<strong>push</strong> 都需要，<strong>push</strong> 成员变量，但是有了隐式类型转换就可以直接插入自动转换为我们需要的类了。</p> 
</blockquote> 
<ul><li>而且我们在类里面去给其他类进行使用缺省值的时候也是非常方便</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">C</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//explicit C(int x = 0)</span>
	<span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">const</span> C<span class="token operator">&amp;</span> cc<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"C(const C&amp; cc)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

C <span class="token function">xx</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//定义全局变量来赋缺省值</span>

<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 缺省值</span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	C cc1 <span class="token operator">=</span> xx<span class="token punctuation">;</span>  <span class="token comment">// 虽然可以，但是很费劲</span>
	C cc2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> push 插入时直接使用隐式类型转换，不需要在插入相同类型的类了</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">C</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//explicit C(int x = 0)</span>
	<span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">const</span> C<span class="token operator">&amp;</span> cc<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"C(const C&amp; cc)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span><span class="token keyword">const</span> C<span class="token operator">&amp;</span> c<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span>
	C <span class="token function">cc3</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span>cc3<span class="token punctuation">)</span><span class="token punctuation">;</span>

	st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="42_explicit_356"></a>4.2 explicit关键字的使用</h3> 
<blockquote> 
 <p><strong><code>explict</code></strong> 的关键字是用来修饰构造函数的一旦使用了 <strong><code>explicit</code></strong> 修饰构造函数，禁止类型转换<br> <img src="https://images2.imgbox.com/2d/c7/kaGnJUU8_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<pre><code class="prism language-cpp">
<span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">explicit</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">explicit</span> <span class="token function">Data</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"data()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~data()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a1 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	Data a2 <span class="token operator">=</span> <span class="token number">2020</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/b1/fc/tE5gcGgs_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7e86dccd2a70fe3753dedc8534891351/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI大模型探索之路-应用篇17：GLM大模型-大数据自助查询平台架构实践</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf04a3facc2ac2fa2dfa1ddf2ac966d5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">图像生成模型浅析（Stable Diffusion、DALL-E、Imagen）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>