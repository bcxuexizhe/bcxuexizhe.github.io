<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java生成四位数随机验证码 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/ff78f22f9fdf97c353eda432b974144d/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="Java生成四位数随机验证码">
  <meta property="og:description" content="引言： 我们生活中登录的时候都要输入验证码，这些验证码是为了增加注册或者登录难度，减少被人用脚本疯狂登录注册导致的一系列危害，减少数据库的一些压力。
毕竟那些用脚本生成的账号都是垃圾账号
本次实践：生成这样的验证码
并且附带一些干扰线
项目想法： 我们生成一个验证码有好几个要求
1.验证码必须是随机的，每次都不能重复出现一模一样的
2.验证码得让人有体验感，最起码得看得清，大小要合适
3.验证码初步需要一些干扰线，防止很轻易的就被脚本识别出来。
初步学习先以这些为要求进行实践。
项目思路： 我们要理解这个验证码的生成过程。
1.我们需要有一个画板
2.我们需要一只笔可以在画板上涂鸦
3.我们需要用笔在画板上画字符
4.我们需要调节画板和字符的颜色，及其大小，提升体验感
5.我们需要画出干扰线
项目实践： 1.我们需要一些字母或者数字，这样组成随机的四位验证码 我们可以写一个程序快速生成这样的数组
public class Zifu { public static void main(String[] args) { for(int i=0; i&lt;26; i&#43;&#43;){ char ch = (char) (&#39;a&#39; &#43; i); // 生成字母 if (i != 25) { System.out.print(&#34;\&#34;&#34; &#43; ch &#43; &#34;\&#34;, &#34;); } else { System.out.print(&#34;\&#34;&#34; &#43; ch &#43; &#34;\&#34;&#34;); } } for(int i=0; i&lt;10; i&#43;&#43;){ char ch=(char)(&#39;0&#39;&#43;i); if (i !">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-15T00:35:57+08:00">
    <meta property="article:modified_time" content="2024-01-15T00:35:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java生成四位数随机验证码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>引言：</h2> 
<p>我们生活中登录的时候都要输入验证码，这些验证码是为了增加注册或者登录难度，减少被人用脚本疯狂登录注册导致的一系列危害，减少数据库的一些压力。<br> 毕竟那些用脚本生成的账号都是垃圾账号</p> 
<p>本次实践：生成这样的验证码</p> 
<p><img alt="" height="301" src="https://images2.imgbox.com/be/50/68731GGT_o.png" width="600"><br> 并且附带一些干扰线</p> 
<p></p> 
<h2>项目想法：</h2> 
<p>我们生成一个验证码有好几个要求</p> 
<p>1.验证码必须是随机的，每次都不能重复出现一模一样的<br> 2.验证码得让人有体验感，最起码得看得清，大小要合适<br> 3.验证码初步需要一些干扰线，防止很轻易的就被脚本识别出来。</p> 
<p>初步学习先以这些为要求进行实践。</p> 
<p></p> 
<h2>项目思路：</h2> 
<p>我们要理解这个验证码的生成过程。</p> 
<p>1.我们需要有一个画板<br> 2.我们需要一只笔可以在画板上涂鸦<br> 3.我们需要用笔在画板上画字符<br> 4.我们需要调节画板和字符的颜色，及其大小，提升体验感<br> 5.我们需要画出干扰线</p> 
<p></p> 
<h2>项目实践：</h2> 
<h3>1.我们需要一些字母或者数字，这样组成随机的四位验证码</h3> 
<p>我们可以写一个程序快速生成这样的数组</p> 
<pre><code class="language-java">public class Zifu {
    public static void main(String[] args) {
        for(int i=0; i&lt;26; i++){
            char ch = (char) ('a' + i); // 生成字母
            if (i != 25) {
                System.out.print("\"" + ch + "\", ");
            } else {
                System.out.print("\"" + ch + "\"");
            } 
        }
        for(int i=0; i&lt;10; i++){
            char ch=(char)('0'+i);
            if (i != 9) {
                System.out.print("\"" + ch + "\", ");
            } else {
                System.out.print("\"" + ch + "\"");
            } 
        }
        for(int i=0; i&lt;26; i++){
            char ch = (char) ('A' + i); // 生成字母
            if (i != 25) {
                System.out.print("\"" + ch + "\", ");
            } else {
                System.out.print("\"" + ch + "\"");
            } 
        }
    }
}</code></pre> 
<p>输出为：<br><img alt="" height="87" src="https://images2.imgbox.com/45/fc/9zethJxv_o.png" width="1200"></p> 
<p>然后我们将其复制粘贴在静态数组里面<br><img alt="" height="177" src="https://images2.imgbox.com/8f/e3/TGMuZpvw_o.png" width="1023"><br> 这样我们就准备好我们所需要的数组了</p> 
<h3>2.怎样画图</h3> 
<p>画图的思路是：</p> 
<p>1.准备画板<br> 2.准备笔<br> 3.然后笔在画板上画</p> 
<p>如何准备画板？<br><img alt="" height="283" src="https://images2.imgbox.com/8b/40/7Pt05di7_o.png" width="1200"><br> 先导入相关包，画板有专门的类是<span style="color:#fe2c24;"><strong>BufferedImage<br> 笔相关的包是，Graphics</strong></span></p> 
<h3><span style="color:#0d0016;">3.创建画板</span></h3> 
<p><span style="color:#0d0016;">创建画板要先实例化一个画板，然后补充宽高和组成</span></p> 
<pre><code class="language-java">        int height=200;//高
        int width=400;//宽
        int imageType = BufferedImage.TYPE_INT_RGB;//画板的组成，rgb是red，green，blue，红绿蓝组成
        BufferedImage image = new BufferedImage(width,height,imageType);//实例化画板对象，三个参数</code></pre> 
<p><img alt="" height="438" src="https://images2.imgbox.com/88/72/HuWjS6kh_o.png" width="1200"><br> 代码运行后生成的jpg文件<br><img alt="" height="414" src="https://images2.imgbox.com/ec/56/Tu9sYf5z_o.png" width="750"></p> 
<h3>4.生成随机验证码</h3> 
<p><strong>这里需要用到random模块</strong></p> 
<p>r是实例化Random的对象，r.newInt(界限)，可以帮我们生成0到界限-1之间的随机数值，我们可以通过它去随机选取字符数组的下标</p> 
<p><img alt="" height="426" src="https://images2.imgbox.com/59/ef/GRfCu7Tk_o.png" width="1200"><br> 生成的效果图为<br><img alt="" height="454" src="https://images2.imgbox.com/01/c5/GD4Gdvvt_o.png" width="750"></p> 
<h3>5.生成干扰线</h3> 
<p>干扰线原理其实与生成字符一样</p> 
<p>生成的重要代码是g.drawLine(x1,y1,x2,y2);<br> 意思是两个点(x1,y1),(x2,y2)之间画条直线</p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/5d/11/Wa8HqAXX_o.png" width="1200"></p> 
<p>生成的效果图为：</p> 
<p><img alt="" height="422" src="https://images2.imgbox.com/c3/52/Qix7wsTp_o.png" width="750"></p> 
<p></p> 
<h2>本次项目的小知识点</h2> 
<p>1.画板有java自带的BufferedImage，我们只需要导包就好了<br> 2.笔有java自带的Graphice,也是只要导包就好了<br> 3.画字符的时候字符的位置以及横坐标偏移，如果不偏移两次画在同一个地方就会覆盖掉<br> 4.字符的颜色，字体可以通过Font去设置<br> 5.最后就是将画出的图生成在本地了</p> 
<p><span style="color:#fe2c24;"><strong>tips：最好的方法就是每做出一步就把图生成在本地查看情况然后根据需求进行调整，我上面的步骤就是一步一步来的。</strong></span></p> 
<p>本次验证码生成的整体代码如下：<br> 文件路径我就删了，需要的朋友们自己补充吧，随便找个空的文件夹然后复制地址就好了</p> 
<p>格式是这样的：<br><img alt="" height="102" src="https://images2.imgbox.com/68/da/N6z67IOS_o.png" width="1200"><br><strong><span style="color:#fe2c24;">tips：为什么我用的都是\\，因为如果是单斜杠的话我的vscode会识别为转义字符，所以都用双斜杠了\\</span></strong></p> 
<p><strong><span style="color:#0d0016;">整体代码如下：</span></strong></p> 
<pre><code class="language-java">import java.awt.Color; // 引入 Color 类，提供系统颜色和关于颜色空间的类。
import java.awt.Font; // 引入 Font 类，支持在AWT的所有渲染环境下的通用文字布局，并为所有给定字符和脚本提供字体处理功能。
import java.awt.Graphics; // 引入 Graphics 类，允许应用程序以协同的方式绘制到屏幕上或者其他任何地方。
import java.awt.image.BufferedImage; // 引入 BufferedImage 类，描述一些整数像素的具有可访问的数据缓冲区的图像。
import java.io.File; // 引入 File 类，它提供了与文件和路径名相关的操作，它具有创建、删除、读取文件等功能。
import java.io.IOException; // 引入 IOException 类，处理输入、输出操作失败或中断的情况（类似于文件未找到等）。
import java.util.Random; // 引入 Random 类，用于生成伪随机数。
import javax.imageio.ImageIO; // 引入 ImageIO 类，用于读取和写入图像格式，如 JPEG、PNG等。

public class checkimage {
    static String[] strs={"a", "b", "c", "d", "e", "f", "g", "h", 
    "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", 
    "u", "v", "w", "x", "y", "z","0", "1", "2", "3", "4", "5", "6", 
    "7", "8", "9","A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", 
    "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"};
    
    public static void main(String[] args) {
        int height=200;//高
        int width=400;//宽
        int imageType = BufferedImage.TYPE_INT_RGB;//画板的组成，rgb是red，green，blue，红绿蓝组成
        BufferedImage image = new BufferedImage(width,height,imageType);//实例化画板对象，三个参数
        
        Graphics g = image.getGraphics();//实例化了一支笔
        g.setColor(Color.white);//笔的颜色为白色
        g.fillRect(0, 0, width, height);//然后将画板填充为白色，x，y为矩形左上角的坐标
        /*设置画板 */

        Random r=new Random();//实例化一个随机的对象
        int x=25,y=125;//这个是x，y界限
        g.setColor(Color.blue);//让验证码的颜色为蓝色
        g.setFont(new Font("宋体",Font.PLAIN,100));//设置字体，字体为宋体，并且大小为100
        for(int i=0;i&lt;4;i++){//用for循环生成4个随机验证码
            int index=r.nextInt(62);//strs数组总共62个数，所以下标界限是0-61
            String str=strs[index];//随机取一个字符
            g.drawString(str, x, y);//画字符在画板上
            x+=100;//这个移位，不然我第一次在这个位置画A，第二次画B的时候还在这个位置不就覆盖掉了吗，所以要移动位置
        }
        /*画出四位数的验证码 */

        g.setColor(Color.green);//让画笔的颜色为绿色
        for(int i=0;i&lt;10;i++){//生成十条干扰线
            int a=r.nextInt(10);
            int b=r.nextInt(400);
            int c=r.nextInt(10)+380;
            int d=r.nextInt(400);
            g.drawLine(a,b,c,d);//ab是干扰线的左边的横纵坐标，cd是右边的
        }        
        /*画出干扰线 */

        // 尝试写入图像
        try {
            ImageIO.write(image, "jpg", new File("C:\\Users\\Desktop\\项目学习\\myImage.jpg")); //此处应给出具体的文件名
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre> 
<hr> 
<p><em>这是我第一次除了做题之外做出的有用的东西了！！！<br> 虽然都是照着视频学习照搬的，但是也是第一次对做这些有那么一点小感悟和经历了！</em></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d0148b25f5d7ba93ef3ce789f0bbc2b1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matlab从图（fig）中提取数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2c659316861843105ad600c829352318/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">大数据与AI人工智能：AI的影响与应对措施</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>