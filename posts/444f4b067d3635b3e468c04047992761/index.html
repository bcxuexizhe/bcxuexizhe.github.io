<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前端秘法进阶----css中那些不能说的秘密 - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/444f4b067d3635b3e468c04047992761/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="前端秘法进阶----css中那些不能说的秘密">
  <meta property="og:description" content="目录
一.css属性计算过程
1.使用继承
2.使用默认值
3.面试题
二.css之包含块
一.css属性计算过程 1.使用继承 层叠冲突这一步完成后，解决了相同元素被声明了多条样式规则究竟应用哪一条样式规则的问题。
那么如果没有声明的属性呢？此时就使用默认值么？
答案并不是，此时还有第三个步骤，那就是使用继承而来的值。
例如：
```html
&lt;div&gt;
&lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;
&lt;/div&gt;
```
```css
div {
color: red;
}
```
在上面的代码中，我们针对 div 设置了 color 属性值为红色，而针对 p 元素我们没有声明任何的属性，但是由于 color 是可以继承的，因此 p 元素从最近的 div 身上继承到了 color 属性的值。
这里有两个点需要我们注意一下。
首先第一个是我强调了是**最近的** div 元素，看下面的例子：
```html
&lt;div class=&#34;test&#34;&gt;
&lt;div&gt;
&lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
```
```css
div {
color: red;
}
.test{
color: blue;
}">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-17T20:01:30+08:00">
    <meta property="article:modified_time" content="2024-02-17T20:01:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前端秘法进阶----css中那些不能说的秘密</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80.css%E5%B1%9E%E6%80%A7%E8%AE%A1%E7%AE%97%E8%BF%87%E7%A8%8B-toc" style="margin-left:0px;"><a href="#%E4%B8%80.css%E5%B1%9E%E6%80%A7%E8%AE%A1%E7%AE%97%E8%BF%87%E7%A8%8B" rel="nofollow">一.css属性计算过程</a></p> 
<p id="1.%E4%BD%BF%E7%94%A8%E7%BB%A7%E6%89%BF-toc" style="margin-left:40px;"><a href="#1.%E4%BD%BF%E7%94%A8%E7%BB%A7%E6%89%BF" rel="nofollow">1.使用继承</a></p> 
<p id="2.%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%80%BC-toc" style="margin-left:40px;"><a href="#2.%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%80%BC" rel="nofollow">2.使用默认值</a></p> 
<p id="3.%E9%9D%A2%E8%AF%95%E9%A2%98-toc" style="margin-left:40px;"><a href="#3.%E9%9D%A2%E8%AF%95%E9%A2%98" rel="nofollow">3.面试题</a></p> 
<p id="%E4%BA%8C.css%E4%B9%8B%E5%8C%85%E5%90%AB%E5%9D%97-toc" style="margin-left:0px;"><a href="#%E4%BA%8C.css%E4%B9%8B%E5%8C%85%E5%90%AB%E5%9D%97" rel="nofollow">二.css之包含块</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2><strong>一.css属性计算过程</strong></h2> 
<h3 id="1.%E4%BD%BF%E7%94%A8%E7%BB%A7%E6%89%BF"><br><strong>1.使用继承</strong></h3> 
<p><strong>层叠冲突这一步完成后，解决了相同元素被声明了多条样式规则究竟应用哪一条样式规则的问题。</strong></p> 
<p><strong>那么如果没有声明的属性呢？此时就使用默认值么？</strong></p> 
<p><strong>答案并不是，此时还有第三个步骤，那就是使用继承而来的值。</strong></p> 
<p><strong>例如：</strong></p> 
<p><strong>```html<br> &lt;div&gt;<br>   &lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;<br> &lt;/div&gt;<br> ```</strong></p> 
<p><strong>```css<br> div {<!-- --><br>   color: red;<br> }<br> ```</strong></p> 
<p><strong>在上面的代码中，我们针对 div 设置了 color 属性值为红色，而针对 p 元素我们没有声明任何的属性，但是由于 color 是可以继承的，因此 p 元素从最近的 div 身上继承到了 color 属性的值。</strong></p> 
<p><strong>这里有两个点需要我们注意一下。</strong></p> 
<p><strong>首先第一个是我强调了是**最近的** div 元素，看下面的例子：</strong></p> 
<p><strong>```html<br> &lt;div class="test"&gt;<br>   &lt;div&gt;<br>     &lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;<br>   &lt;/div&gt;<br> &lt;/div&gt;<br> ```</strong></p> 
<p><strong>```css<br> div {<!-- --><br>   color: red;<br> }<br> .test{<!-- --><br>   color: blue;<br> }<br> ```</strong></p> 
<p><strong>因为这里并不涉及到选中 p 元素声明 color 值，而是从父元素上面继承到 color 对应的值，因此这里是**谁近就听谁**的，初学者往往会产生混淆，又去比较权重，但是这里根本不会涉及到权重比较，因为压根儿就没有选中到 p 元素。</strong></p> 
<p><strong>第二个就是哪些属性能够继承？</strong></p> 
<p><strong>关于这一点的话，大家可以在 MDN 上面很轻松的查阅到。例如我们以 text-align 为例，如下图所示：</strong></p> 
<h3 id="2.%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%80%BC"><strong>2.使用默认值</strong></h3> 
<p><strong>目前走到这一步，如果属性值都还不能确定下来，那么就只能是使用默认值了。</strong></p> 
<p><strong>如下图所示：</strong></p> 
<p><strong>前面我们也说过，一个 HTML 元素要在浏览器中渲染出来，必须具备所有的 CSS 属性值，但是绝大部分我们是不会去设置的，用户代理样式表里面也不会去设置，也无法从继承拿到，因此最终都是用默认值。</strong></p> 
<p><strong>这就是关于 CSS 属性计算过程的所有知识了。</strong></p> 
<h3 id="3.%E9%9D%A2%E8%AF%95%E9%A2%98"><strong>3.面试题</strong></h3> 
<p><strong>好了，学习了今天的内容，让我来用一道面试题测试测试大家的理解程度。</strong></p> 
<p><strong>下面的代码，最终渲染出来的效果，a 元素是什么颜色？p 元素又是什么颜色？</strong></p> 
<p><strong>```html<br> &lt;div&gt;<br>   &lt;a href=""&gt;test&lt;/a&gt;<br>   &lt;p&gt;test&lt;/p&gt;<br> &lt;/div&gt;<br> ```</strong></p> 
<p><strong>```css<br> div {<!-- --><br>   color: red;<br> }<br> ```</strong></p> 
<p><strong>实际上原因很简单，因为 a 元素在用户代理样式表中已经设置了 color 属性对应的值，因此会应用此声明值。而在 p 元素中无论是作者样式表还是用户代理样式表，都没有对此属性进行声明，然而由于 color 属性是可以继承的，因此最终 p 元素的 color 属性值通过继承来自于父元素。</strong><br>  </p> 
<h2 id="%E4%BA%8C.css%E4%B9%8B%E5%8C%85%E5%90%AB%E5%9D%97">二.css之包含块</h2> 
<p><strong>一说到 CSS 盒模型，我们耳熟能详，甚至还能说出 border-box 和 content-box 这两种盒模型的区别。</strong></p> 
<p><strong>但是一说到 CSS 包含块，有的懵了，什么是包含块？好像从来没有听说过。</strong></p> 
<p><strong>如果你对包含块的知识一无所知，那么接下来的东西要好好听。</strong></p> 
<p><strong>包含块英语全称为**containing block**，实际上平时你在书写 CSS 时，大多数情况下你是感受不到它的存在，因此你不知道这个知识点也是一件很正常的事情。但是这是确确实实存在的，在 CSS 规范中也是明确书写了的：</strong><a class="link-info" href="https://drafts.csswg.org/css2/#containing-block-details" rel="nofollow" title="https://drafts.csswg.org/css2/#containing-block-details">https://drafts.csswg.org/css2/#containing-block-details</a></p> 
<p><strong>并且，如果你不了解它的运作机制，有时就会出现一些你认为的莫名其妙的现象。</strong></p> 
<p><strong>那么，这个包含块究竟说了什么内容呢？</strong></p> 
<p><strong>就是元素的尺寸和位置，会受它的包含块所影响。对于一些属性，例如 width, height, padding, margin，绝对定位元素的偏移值（比如 position 被设置为 absolute 或 fixed），当我们对其赋予百分比值时，这些值的计算值，就是通过元素的包含块计算得来。**</strong></p> 
<p><strong>让我们从最简单的 case 开始看。</strong></p> 
<p><strong>```html<br> &lt;body&gt;<br>   &lt;div class="container"&gt;<br>     &lt;div class="item"&gt;&lt;/div&gt;<br>   &lt;/div&gt;<br> &lt;/body&gt;<br> ```</strong></p> 
<p><strong>```css<br> .container{<!-- --><br>   width: 500px;<br>   height: 300px;<br>   background-color: skyblue;<br> }<br> .item{<!-- --><br>   width: 50%;<br>   height: 50%;<br>   background-color: red;<br> }<br> ```</strong></p> 
<p><strong>请仔细阅读上面的代码，然后你认为 div.item 这个盒子的宽高是多少？</strong></p> 
<p><strong>div.item 盒子的 width 为 250px，height 为 150px。</strong></p> 
<p><strong>这个答案确实是没有问题的，但是如果我追问你是怎么得到这个答案的，我猜不了解包含块的你大概率会说，因为它的父元素 div.container 的 width 为 500px，50% 就是 250px，height 为 300px，因此 50% 就是 150px。</strong></p> 
<p><strong>这个答案实际上是不准确的。正确的答案应该是，div.item 的宽高是根据它的包含块来计算的，而这里包含块的大小，正是这个元素最近的祖先块元素的内容区。</strong></p> 
<p><strong>因此正如我前面所说，**很多时候你都感受不到包含块的存在。**</strong></p> 
<p><strong>包含块分为两种，一种是根元素（HTML 元素）所在的包含块，被称之为初始包含块（**initial containing block**）。对于浏览器而言，初始包含块的的大小等于视口 viewport 的大小，基点在画布的原点（视口左上角）。它是作为元素绝对定位和固定定位的参照物。</strong></p> 
<p><strong>另外一种是对于非根元素，对于非根元素的包含块判定就有几种不同的情况了。大致可以分为如下几种：</strong></p> 
<p><strong>- 如果元素的 positiion 是 relative 或 static ，那么包含块由离它最近的块容器（block container）的内容区域（content area）的边缘建立。<br> - 如果 position 属性是 fixed，那么包含块由视口建立。<br> - 如果元素使用了 absolute 定位，则包含块由它的最近的 position 的值不是 static （也就是值为fixed、absolute、relative 或 sticky）的祖先元素的内边距区的边缘组成。</strong></p> 
<p><strong>前面两条实际上都还比较好理解，第三条往往是初学者容易比较忽视的，我们来看一个示例：</strong></p> 
<p><strong>```html<br> &lt;body&gt;<br>     &lt;div class="container"&gt;<br>       &lt;div class="item"&gt;<br>         &lt;div class="item2"&gt;&lt;/div&gt;<br>       &lt;/div&gt;<br>     &lt;/div&gt;<br>   &lt;/body&gt;<br> ```</strong></p> 
<p><strong>```css<br> .container {<!-- --><br>   width: 500px;<br>   height: 300px;<br>   background-color: skyblue;<br>   position: relative;<br> }<br> .item {<!-- --><br>   width: 300px;<br>   height: 150px;<br>   border: 5px solid;<br>   margin-left: 100px;<br> }<br> .item2 {<!-- --><br>   width: 100px;<br>   height: 100px;<br>   background-color: red;<br>   position: absolute;<br>   left: 10px;<br>   top: 10px;<br> }<br> ```</strong></p> 
<p><strong>首先阅读上面的代码，然后你能在脑海里面想出其大致的样子么？或者用笔和纸画一下也行。</strong></p> 
<p><strong>公布正确答案：</strong></p> 
<p><strong>怎么样？有没有和你所想象的对上？</strong></p> 
<p><strong>其实原因也非常简单，根据上面的第三条规则，对于 div.item2 来讲，它的包含块应该是 div.container，而非 div.item。</strong></p> 
<p><strong>如果你能把上面非根元素的包含块判定规则掌握，那么关于包含块的知识你就已经掌握 80% 了。</strong></p> 
<p><strong>实际上对于非根元素来讲，包含块还有一种可能，那就是如果 position 属性是 absolute 或 fixed，包含块也可能是由满足以下条件的最近父级元素的内边距区的边缘组成的：</strong></p> 
<p><strong>- transform 或 perspective 的值不是 none<br> -  will-change 的值是 transform 或 perspective <br> - filter 的值不是 none 或 will-change 的值是 filter(只在 Firefox 下生效). <br> - contain 的值是 paint (例如: contain: paint;)</strong></p> 
<p><strong>我们还是来看一个示例：</strong></p> 
<p><strong>```html<br> &lt;body&gt;<br>   &lt;div class="container"&gt;<br>     &lt;div class="item"&gt;<br>       &lt;div class="item2"&gt;&lt;/div&gt;<br>     &lt;/div&gt;<br>   &lt;/div&gt;<br> &lt;/body&gt;<br> ```</strong></p> 
<p><strong>```css<br> .container {<!-- --><br>   width: 500px;<br>   height: 300px;<br>   background-color: skyblue;<br>   position: relative;<br> }<br> .item {<!-- --><br>   width: 300px;<br>   height: 150px;<br>   border: 5px solid;<br>   margin-left: 100px;<br>   transform: rotate(0deg); /* 新增代码 */<br> }<br> .item2 {<!-- --><br>   width: 100px;<br>   height: 100px;<br>   background-color: red;<br>   position: absolute;<br>   left: 10px;<br>   top: 10px;<br> }<br> ```</strong></p> 
<p><strong>我们对于上面的代码只新增了一条声明，那就是 transform: rotate(0deg)，此时的渲染效果却发生了改变</strong></p> 
<p><strong>可以看到，此时对于 div.item2 来讲，包含块就变成了 div.item。</strong></p> 
<p><strong>我们再把 CSS 规范中所举的例子来看一下。</strong></p> 
<p><strong>```html<br> &lt;html&gt;<br>   &lt;head&gt;<br>     &lt;title&gt;Illustration of containing blocks&lt;/title&gt;<br>   &lt;/head&gt;<br>   &lt;body id="body"&gt;<br>     &lt;div id="div1"&gt;<br>       &lt;p id="p1"&gt;This is text in the first paragraph...&lt;/p&gt;<br>       &lt;p id="p2"&gt;<br>         This is text<br>         &lt;em id="em1"&gt;<br>           in the<br>           &lt;strong id="strong1"&gt;second&lt;/strong&gt;<br>           paragraph.<br>         &lt;/em&gt;<br>       &lt;/p&gt;<br>     &lt;/div&gt;<br>   &lt;/body&gt;<br> &lt;/html&gt;</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0025eb5c2946fc8389faf1c1a20aae04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">macOS 安装 conda</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8bd839ecd75020870dbd25185aafd4dc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用Python开发一个飞机大战游戏（附源码教程）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>