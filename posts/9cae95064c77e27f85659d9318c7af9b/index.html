<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>手把手带你用Python和文心一言搭建《AI看图写诗》网页项目（附上完整项目源码） - 编程学习者</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcxuexizhe.github.io/posts/9cae95064c77e27f85659d9318c7af9b/">
  <meta property="og:site_name" content="编程学习者">
  <meta property="og:title" content="手把手带你用Python和文心一言搭建《AI看图写诗》网页项目（附上完整项目源码）">
  <meta property="og:description" content="今年年初，ChatGPT的火爆在全球掀起AI大模型的开发热潮，国内外的科技公司纷纷加入“百模大战”行列。百度在率先发布了国内第一款人工智能大语言模型“文心一言”后，又推出了文心千帆大模型平台，帮助企业和开发者加速大模型应用落地。
而最近百度创始人、董事长兼首席执行官李彦宏在一场活动上透露了百度世界大会2023的重磅消息，他将在10月17号百度世界大会召开的时候，“手把手教你怎么做AI原生应用”。
我自己也突发奇想用文心一言搭建一个AI小应用：《看图写诗》，说干就干，接下来就跟着博主一起实现这个网页吧！
文章目录 一、实现思路二、《AI看图写诗》网页搭建实现步骤2.1 网页前端2.2 图像识别2.2.1 安装百度智能云Python SDK2.2.2 创建应用2.2.3 Python代码测试 2.3 文心一言写诗2.3.1 安装ERNIE Bot SDK2.3.2 获取令牌Token2.3.3 Python代码测试 2.4 网页后端2.5 完整项目拷贝2.6 项目运行步骤2.7 运行流程视频 三、未来优化四、总结 一、实现思路 1、设计一款网页实现接受上传图片和接收文心一言令牌Token功能
2、Python调用百度智能云的图片识别接口，识别图片类别和内容
3、Python调用文心一言接口，输入图片类别，通过文心一言写诗
4、Python后端将诗返回到网页上
二、《AI看图写诗》网页搭建实现步骤 2.1 网页前端 网页前端采用HTML&#43;CSS&#43;JavaScript技术，实现了上传图片、展示图片，传入百度智能云AppId、百度智能云API Key、百度智能云Secret Key、飞浆星河Access Token和点击写诗功能，界面如下：
2.2 图像识别 百度智能图像识别接口是百度提供的一项人工智能服务，能够对图片进行高精度的内容识别，该接口支持多种图像识别任务，包括通用物体识别、场景识别、文字识别、动物识别等，这里我们通过Python直接调用免费的通用物体识别图像识别接口，极大的提高了开发工作的效率。
2.2.1 安装百度智能云Python SDK 可以通过pip安装百度智能云Python SDK。在终端下输入以下命令：
pip install baidu-aip 安装完毕后，你就可以在Python代码中导入该包了：
from aip import AipImageClassify 2.2.2 创建应用 1、登录百度智能云的官网：https://console.bce.baidu.com
2、依次找到点击 产品 》人工智能 》图像识别
3、登录控制台后点击免费尝鲜：
4、勾选全部然后点击0元领取：
5、创建成功后，点击应用进入应用详情页，进入应用管理菜单，点击API Key，可查看API Key和Secret Key，用于Python代码调用API。
2.2.3 Python代码测试 经过以上两步准备工作，我们便可以开始编写Python代码，实现百度智能图片识别。以下是一个简单的测试示例，需要修改AppId 、API Key、Secret Key和图片路径：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-10-16T14:54:56+08:00">
    <meta property="article:modified_time" content="2023-10-16T14:54:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程学习者" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程学习者</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">手把手带你用Python和文心一言搭建《AI看图写诗》网页项目（附上完整项目源码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>今年年初，ChatGPT的火爆在全球掀起AI大模型的开发热潮，国内外的科技公司纷纷加入“百模大战”行列。百度在率先发布了国内第一款人工智能大语言模型“文心一言”后，又推出了文心千帆大模型平台，帮助企业和开发者加速大模型应用落地。</p> 
<p>而最近百度创始人、董事长兼首席执行官李彦宏在一场活动上透露了百度世界大会2023的重磅消息，他将在10月17号百度世界大会召开的时候，“手把手教你怎么做AI原生应用”。</p> 
<p>我自己也突发奇想用文心一言搭建一个AI小应用：《看图写诗》，说干就干，接下来就跟着博主一起实现这个网页吧！</p> 
<p><img src="https://images2.imgbox.com/2d/3a/gytXEYK0_o.png" alt=""><br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_12" rel="nofollow">一、实现思路</a></li><li><a href="#AI_23" rel="nofollow">二、《AI看图写诗》网页搭建实现步骤</a></li><li><ul><li><a href="#21__24" rel="nofollow">2.1 网页前端</a></li><li><a href="#22__30" rel="nofollow">2.2 图像识别</a></li><li><ul><li><a href="#221_Python_SDK_33" rel="nofollow">2.2.1 安装百度智能云Python SDK</a></li><li><a href="#222__50" rel="nofollow">2.2.2 创建应用</a></li><li><a href="#223_Python_74" rel="nofollow">2.2.3 Python代码测试</a></li></ul> 
   </li><li><a href="#23__123" rel="nofollow">2.3 文心一言写诗</a></li><li><ul><li><a href="#231_ERNIE_Bot_SDK_129" rel="nofollow">2.3.1 安装ERNIE Bot SDK</a></li><li><a href="#232_Token_145" rel="nofollow">2.3.2 获取令牌Token</a></li><li><a href="#233_Python_157" rel="nofollow">2.3.3 Python代码测试</a></li></ul> 
   </li><li><a href="#24__191" rel="nofollow">2.4 网页后端</a></li><li><a href="#25__268" rel="nofollow">2.5 完整项目拷贝</a></li><li><a href="#26__275" rel="nofollow">2.6 项目运行步骤</a></li><li><a href="#27__327" rel="nofollow">2.7 运行流程视频</a></li></ul> 
  </li><li><a href="#_332" rel="nofollow">三、未来优化</a></li><li><a href="#_342" rel="nofollow">四、总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_12"></a>一、实现思路</h2> 
<p>1、设计一款网页实现接受上传图片和接收文心一言令牌Token功能</p> 
<p>2、Python调用百度智能云的图片识别接口，识别图片类别和内容</p> 
<p>3、Python调用文心一言接口，输入图片类别，通过文心一言写诗</p> 
<p>4、Python后端将诗返回到网页上</p> 
<h2><a id="AI_23"></a>二、《AI看图写诗》网页搭建实现步骤</h2> 
<h3><a id="21__24"></a>2.1 网页前端</h3> 
<p>网页前端采用HTML+CSS+JavaScript技术，实现了上传图片、展示图片，传入百度智能云AppId、百度智能云API Key、百度智能云Secret Key、飞浆星河Access Token和点击写诗功能，界面如下：</p> 
<p><img src="https://images2.imgbox.com/bf/17/TAQOIKlQ_o.png" alt=""></p> 
<h3><a id="22__30"></a>2.2 图像识别</h3> 
<p>百度智能图像识别接口是百度提供的一项人工智能服务，能够对图片进行高精度的内容识别，该接口支持多种图像识别任务，包括通用物体识别、场景识别、文字识别、动物识别等，这里我们通过Python直接调用免费的通用物体识别图像识别接口，极大的提高了开发工作的效率。</p> 
<h4><a id="221_Python_SDK_33"></a>2.2.1 安装百度智能云Python SDK</h4> 
<p>可以通过pip安装百度智能云Python SDK。在终端下输入以下命令：</p> 
<pre><code class="prism language-python">pip install baidu<span class="token operator">-</span>aip 
</code></pre> 
<p>安装完毕后，你就可以在Python代码中导入该包了：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> aip <span class="token keyword">import</span> AipImageClassify
</code></pre> 
<h4><a id="222__50"></a>2.2.2 创建应用</h4> 
<p>1、登录百度智能云的官网：<a href="https://console.bce.baidu.com" rel="nofollow">https://console.bce.baidu.com</a></p> 
<p>2、依次找到点击 产品 》人工智能 》图像识别</p> 
<p><img src="https://images2.imgbox.com/1b/04/lHNZD1Pz_o.png" alt=""></p> 
<p>3、登录控制台后点击免费尝鲜：</p> 
<p><img src="https://images2.imgbox.com/bd/2f/RSeBC83B_o.png" alt=""></p> 
<p>4、勾选全部然后点击0元领取：</p> 
<p><img src="https://images2.imgbox.com/58/26/ubZTjZRC_o.png" alt=""></p> 
<p>5、创建成功后，点击应用进入应用详情页，进入应用管理菜单，点击API Key，可查看API Key和Secret Key，用于Python代码调用API。</p> 
<p><img src="https://images2.imgbox.com/b2/48/bxR6SuaZ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="223_Python_74"></a>2.2.3 Python代码测试</h4> 
<p>经过以上两步准备工作，我们便可以开始编写Python代码，实现百度智能图片识别。以下是一个简单的测试示例，需要修改AppId 、API Key、Secret Key和图片路径：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> aip <span class="token keyword">import</span> AipImageClassify

<span class="token comment"># 定义百度智能云API的参数</span>
APP_ID <span class="token operator">=</span> <span class="token string">'你的API ID'</span>
API_KEY <span class="token operator">=</span> <span class="token string">'你的API Key'</span>
SECRET_KEY <span class="token operator">=</span> <span class="token string">'你的 Secret Key'</span>

<span class="token comment"># 实例化AipImageClassify</span>
client <span class="token operator">=</span> AipImageClassify<span class="token punctuation">(</span>APP_ID<span class="token punctuation">,</span> API_KEY<span class="token punctuation">,</span> SECRET_KEY<span class="token punctuation">)</span>

<span class="token comment"># 读取并设置图片路径</span>
filePath <span class="token operator">=</span> <span class="token string">"1.png"</span>

<span class="token comment"># 打开图片文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
   image <span class="token operator">=</span> fp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 定义可选参数</span>
options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"baike_num"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>

<span class="token comment"># 调用图片标签识别接口</span>
result <span class="token operator">=</span> client<span class="token punctuation">.</span>advancedGeneral<span class="token punctuation">(</span>image<span class="token punctuation">,</span> options<span class="token punctuation">)</span>

<span class="token comment"># 输出结果</span>
<span class="token keyword">for</span> res <span class="token keyword">in</span> result<span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
   <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'keyword'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">", "</span><span class="token punctuation">)</span>
</code></pre> 
<p>我输出图片是这张风景图，没有文字还是很有挑战的：</p> 
<p><img src="https://images2.imgbox.com/9b/f3/3yPzpt20_o.png" alt=""></p> 
<p>识别效果，图片上的信息都给识别出来了：</p> 
<p><img src="https://images2.imgbox.com/73/98/pjDw1sdC_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/36/57/LOrUdy8w_o.png" alt=""></p> 
<p>接下来我们就需要把识别出来的图像内容传给文心一言写诗了。</p> 
<h3><a id="23__123"></a>2.3 文心一言写诗</h3> 
<p>这里我是通过ERNIE Bot SDK提供便捷易用的接口，可以调用文心一言的能力，包含文本创作、通用对话、语义向量、Al作图等，并且可以免费调用100万Token：</p> 
<p><img src="https://images2.imgbox.com/38/e4/qpqIlkv4_o.png" alt=""></p> 
<h4><a id="231_ERNIE_Bot_SDK_129"></a>2.3.1 安装ERNIE Bot SDK</h4> 
<p>ERNIE Bot SDK是文心&amp;飞桨官方提供的Python软件开发工具包，简称EB SDK，通过下面的pip命令安装：</p> 
<pre><code class="prism language-python">pip install erniebot
</code></pre> 
<p>EB SDK认证鉴权主要是设置后端和access token，分别通过api_type和access_token参数来指定，默认使用aistudio后端（api_type为aistudio），将个人中心令牌Token，复制后填入下面代码中即可（替换{YOUR-ACCESS-TOKEN}）：</p> 
<p><img src="https://images2.imgbox.com/ee/f8/G3JTv6Wy_o.png" alt=""></p> 
<h4><a id="232_Token_145"></a>2.3.2 获取令牌Token</h4> 
<p>1、打开飞浆星河社区的官网：<a href="https://aistudio.baidu.com/cooperate/erniebotsdk" rel="nofollow">https://aistudio.baidu.com/cooperate/erniebotsdk</a></p> 
<p>2、注册完账号后，点击查看：</p> 
<p><img src="https://images2.imgbox.com/d1/b7/BExCsykX_o.png" alt=""></p> 
<p>3、获取自己的Token令牌并复制，后面我们用Python去调用接口会使用到：</p> 
<p><img src="https://images2.imgbox.com/c9/85/FLsmVEx2_o.png" alt=""></p> 
<h4><a id="233_Python_157"></a>2.3.3 Python代码测试</h4> 
<p>下面我们来单独测试一下通过ERNIE Bot SDK调用文心一言接口写诗的能力，完整代码如下（只需要替换为自己的Token）：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> erniebot


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
   <span class="token comment"># img_str，access_token需要传入</span>
   img_str <span class="token operator">=</span> <span class="token string">'树, 瀑布, 江河, 峡谷, 山峦'</span> <span class="token comment"># 这里需要图片识别的内容信息</span>
   access_token <span class="token operator">=</span> <span class="token string">"这里替换为自己的TOken"</span>
   content <span class="token operator">=</span> <span class="token string">'根据'</span><span class="token operator">+</span>img_str<span class="token punctuation">,</span><span class="token string">'写10首两句七言诗'</span>

   erniebot<span class="token punctuation">.</span>api_type <span class="token operator">=</span> <span class="token string">'aistudio'</span>
   erniebot<span class="token punctuation">.</span>access_token <span class="token operator">=</span> access_token
   response <span class="token operator">=</span> erniebot<span class="token punctuation">.</span>ChatCompletion<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
       model<span class="token operator">=</span><span class="token string">'ernie-bot'</span><span class="token punctuation">,</span>
       messages<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">'role'</span><span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>content<span class="token punctuation">}</span></span><span class="token string">”"</span></span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span>
   <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
</code></pre> 
<p>运行输出结果还是非常不错的：</p> 
<p><img src="https://images2.imgbox.com/ab/17/iAyXiTLg_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/e9/a5/7BT3Schz_o.png" alt="在这里插入图片描述"></p> 
<p>接下来就只需要将生成的诗句传递给网页端展示出来就可以啦。</p> 
<h3><a id="24__191"></a>2.4 网页后端</h3> 
<p>使用到了下面两个Python库，执行pip命令安装一下：</p> 
<pre><code class="prism language-python">pip install fastapi
pip install pydantic
</code></pre> 
<p>网页后端实现接收前端传入的图片和令牌，然后调用百度智能云的图片识别接口和文心一言大模型接口，然后将生成的诗句返回给网页前端的功能，后端代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> fastapi <span class="token keyword">import</span> FastAPI<span class="token punctuation">,</span> File<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> UploadFile
<span class="token keyword">from</span> pydantic <span class="token keyword">import</span> BaseModel
<span class="token keyword">from</span> fastapi<span class="token punctuation">.</span>middleware<span class="token punctuation">.</span>cors <span class="token keyword">import</span> CORSMiddleware
<span class="token keyword">import</span> erniebot
<span class="token keyword">from</span> aip <span class="token keyword">import</span> AipImageClassify

app <span class="token operator">=</span> FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>
origins <span class="token operator">=</span> <span class="token punctuation">[</span>
   <span class="token string">"http://localhost.tiangolo.com"</span><span class="token punctuation">,</span>
   <span class="token string">"https://localhost.tiangolo.com"</span><span class="token punctuation">,</span>
   <span class="token string">"http://localhost"</span><span class="token punctuation">,</span>
   <span class="token string">"http://localhost:8000"</span><span class="token punctuation">,</span>
   <span class="token string">"http://localhost:63342"</span><span class="token punctuation">,</span>
   <span class="token comment"># "http://127.0.0.1:8000"</span>
<span class="token punctuation">]</span>
app<span class="token punctuation">.</span>add_middleware<span class="token punctuation">(</span>
   CORSMiddleware<span class="token punctuation">,</span>
   allow_origins<span class="token operator">=</span>origins<span class="token punctuation">,</span>
   allow_credentials<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
   allow_methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   allow_headers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">PoeSimpleReq</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
   access_token<span class="token punctuation">:</span> <span class="token builtin">str</span>
   app_id<span class="token punctuation">:</span> <span class="token builtin">str</span>
   api_key<span class="token punctuation">:</span> <span class="token builtin">str</span>
   classify_secret_key<span class="token punctuation">:</span> <span class="token builtin">str</span>
   <span class="token builtin">file</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span> <span class="token operator">=</span> File<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">"/poe"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">read_root</span><span class="token punctuation">(</span>access_token<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Form<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> app_id<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Form<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> api_key<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Form<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   classify_secret_key<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Form<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> image<span class="token punctuation">:</span> UploadFile <span class="token operator">=</span> File<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">if</span> access_token <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> app_id <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> api_key <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> classify_secret_key <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> classify_secret_key <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> image <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
       <span class="token keyword">return</span> <span class="token string">"Supplementary information on the left"</span>
   access_token <span class="token operator">=</span> access_token

   APP_ID <span class="token operator">=</span> app_id
   API_KEY <span class="token operator">=</span> api_key
   CLASSIFY_SECRET_KEY <span class="token operator">=</span> classify_secret_key

   client <span class="token operator">=</span> AipImageClassify<span class="token punctuation">(</span>APP_ID<span class="token punctuation">,</span> API_KEY<span class="token punctuation">,</span> CLASSIFY_SECRET_KEY<span class="token punctuation">)</span>
   <span class="token comment"># 定义可选参数</span>
   options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"baike_num"</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">}</span>
   <span class="token comment"># 调用图片标签识别接口</span>
   result <span class="token operator">=</span> client<span class="token punctuation">.</span>advancedGeneral<span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
   <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"pic result:"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
   keyword_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

   <span class="token keyword">for</span> res <span class="token keyword">in</span> result<span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
       keyword_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'keyword'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   keyword_string <span class="token operator">=</span> <span class="token string">', '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>keyword_list<span class="token punctuation">)</span>
   content <span class="token operator">=</span> <span class="token string">'根据'</span> <span class="token operator">+</span> keyword_string <span class="token operator">+</span> <span class="token string">'写10首两句七言诗'</span>
   erniebot<span class="token punctuation">.</span>api_type <span class="token operator">=</span> <span class="token string">'aistudio'</span>
   erniebot<span class="token punctuation">.</span>access_token <span class="token operator">=</span> access_token
   response <span class="token operator">=</span> erniebot<span class="token punctuation">.</span>ChatCompletion<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
       model<span class="token operator">=</span><span class="token string">'ernie-bot'</span><span class="token punctuation">,</span>
       messages<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">'role'</span><span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>content<span class="token punctuation">}</span></span><span class="token string">”"</span></span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span>

   data_str <span class="token operator">=</span> response<span class="token punctuation">.</span>result
   <span class="token keyword">return</span> data_str<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span> <span class="token string">"  "</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="25__268"></a>2.5 完整项目拷贝</h3> 
<p>博主已经将这个项目的完整源码上传到Gitee上开源，小伙伴们可以自行下载和修改项目：<br> <a href="https://gitee.com/xiaoyuan-itsuper/AI.git" rel="nofollow">https://gitee.com/xiaoyuan-itsuper/AI.git</a></p> 
<p><img src="https://images2.imgbox.com/9c/aa/HMpcdNqY_o.png" alt=""></p> 
<h3><a id="26__275"></a>2.6 项目运行步骤</h3> 
<p>1、根据上面教程提前准备好百度智能云AppId、百度智能云API Key、百度智能云Secret Key、飞浆星河Access Token</p> 
<p>2、下载拷贝完整源码，创建虚拟环境，pip安装依赖包</p> 
<p>3、进入源码路径，启动对应虚拟环境，在cmd输入下面命令启动代码：</p> 
<pre><code class="prism language-python">uvicorn main<span class="token punctuation">:</span>app <span class="token operator">-</span><span class="token operator">-</span><span class="token builtin">reload</span>
</code></pre> 
<p>如图：</p> 
<p><img src="https://images2.imgbox.com/ac/83/3rAkXYGf_o.png" alt="在这里插入图片描述"></p> 
<p>4、选择HTML代码，从pycharm点击打开网页：</p> 
<p><img src="https://images2.imgbox.com/20/95/4CoavBSh_o.png" alt="在这里插入图片描述"></p> 
<p>5、打开主界面如下所示：</p> 
<p><img src="https://images2.imgbox.com/b4/c0/9yHkoc5a_o.png" alt="在这里插入图片描述"></p> 
<p>6、点击选择图片，并展示图片：</p> 
<p><img src="https://images2.imgbox.com/c0/fb/bPqQV6bc_o.png" alt=""></p> 
<p>7、填写根据上面教程准备好的百度智能云AppId、百度智能云API Key、百度智能云Secret Key、飞浆星河Access Token（注意：这个四个都需要填写）：</p> 
<p><img src="https://images2.imgbox.com/67/e0/P2WMxf4j_o.png" alt=""></p> 
<p>8、点击生成诗句：</p> 
<p><img src="https://images2.imgbox.com/7c/b2/bjJLInE8_o.png" alt="在这里插入图片描述"></p> 
<p>9、等待一会就生成完成了：</p> 
<p><img src="https://images2.imgbox.com/b5/0b/sUqkWd05_o.png" alt="在这里插入图片描述"></p> 
<p>OK这里完整项目运行流程就结束了，大家还不速度上号体验一番！</p> 
<h3><a id="27__327"></a>2.7 运行流程视频</h3> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="pw9O6nrn-1697239182713" frameborder="0" src="https://live.csdn.net/v/embed/334868" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>《AI看图写诗》项目运行流程</p> 
</div> 
<p></p> 
<h2><a id="_332"></a>三、未来优化</h2> 
<p>1、网页主页界面UI设计优化。</p> 
<p>2、增强新功能，如：通过文心一言的接口实现根据文字绘画、文档整理等功能。</p> 
<p>3、网站部署上线</p> 
<p><strong>大家有更好多想法可以评论区留言我们一起去实现！</strong></p> 
<h2><a id="_342"></a>四、总结</h2> 
<p>通过这小案例我们了解到了如何通过AI实现了看图写诗应用，主要依靠的还是百度智能云的图片识别接口和文心一言大模型的文本生成能力，当然除了文本生成以外，文心一言大模型还可以生成图片、音频和视频功能等等，这些非常都值得我们后续不断去探索和应用。</p> 
<p>以“生成未来”为主题的百度世界大会将于10月17日在北京首钢园举行,除了李彦宏的现场教学“手把手教你怎么做AI原生应用”，百度世界大会2023还将带来大模型、AI原生应用、生成式AI生态等内容的最新进展。让我们一起抓住大模型应用这场机遇吧！</p> 
<p><img src="https://images2.imgbox.com/1d/eb/NDdNmd0F_o.png" alt=""></p> 
<p>直播地址分享给大家：<a href="https://baiduworld.baidu.com/m/world/2023/#intro-title" rel="nofollow">https://baiduworld.baidu.com/m/world/2023/#intro-title</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f58cf7ee77c268a5acf19a73a55638d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">哈希表C&#43;&#43;哈希表详解（知识点&#43;相关LeetCode题目）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68269934d57716d58df59984e2cd3a54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端TypeScript学习day05-索引签名、映射与类型声明文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程学习者.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>